<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrisam's Test!</title>

    <!-- Embedded CSS Styles -->
    <style>
        /* Use the imported Lato font */
        body {
            font-family: 'Lato', sans-serif;
            background-color: #eef2f7;
            /* Light, cool background */
            color: #333;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: #ffffff;
            /* White container background */
            padding: 30px;
            border-radius: 8px;
            /* Subtle rounding */
            text-align: center;
            max-width: 650px;
            /* Wider container */
            width: 100%;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            /* Clean shadow */
        }

        #lesson-selection.container {
            padding: 40px 30px;
        }

        #lesson-selection h2 {
            color: #1a2a6c;
            /* Deep blue */
            margin-bottom: 30px;
            font-size: 2.2em;
            font-weight: 900;
            /* Lato Black */
        }

        .action-button {
            background-color: #4a69bd;
            /* Muted blue */
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            border-radius: 5px;
            cursor: pointer;
            margin: 8px;
            transition: background-color 0.2s ease, transform 0.1s ease;
            font-weight: 700;
            /* Lato Bold */
            text-transform: uppercase;
        }

        .action-button:hover:not(:disabled) {
            background-color: #3b5998;
            /* Darker blue on hover */
            transform: translateY(-2px);
        }

        .action-button:active:not(:disabled) {
            transform: translateY(0);
        }

        .action-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Specific style for the skip button */
        #skip-button {
            background-color: #6c757d;
            /* Muted grey */
            margin-top: 15px;
            /* Space above skip button */
            margin-bottom: 15px;
            /* Space below skip button before separator/next */
        }

        #skip-button:hover:not(:disabled) {
            background-color: #5a6268;
            /* Darker grey on hover */
        }

         /* Specific style for the reveal answer button */
         #reveal-answer-button {
             background-color: #17a2b8; /* Info blue */
             margin-top: 15px;
             margin-bottom: 15px;
         }
         #reveal-answer-button:hover:not(:disabled) {
             background-color: #138496; /* Darker info blue */
         }


        /* Style for the "Add to Remember" button */
        #add-to-remember-button {
            background-color: #ffc107;
            /* Orange/Yellow */
            color: #343a40;
            /* Dark text */
            font-size: 0.9em;
            /* Slightly smaller */
            padding: 8px 15px;
            margin-top: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        #add-to-remember-button:hover:not(:disabled) {
            background-color: #e0a800;
            /* Darker orange */
        }

        #add-to-remember-button:disabled {
            /* Use a lighter version of its own color */
            background-color: #cccccc; /* Grey color for disabled remember button */
            color: #666; /* Dark grey text */
            cursor: not-allowed;
        }

         /* Style for self-correction buttons (Right/Wrong) */
        .self-correct-button {
            background-color: #28a745; /* Green for Right */
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            border-radius: 5px;
            cursor: pointer;
            margin: 8px;
            transition: background-color 0.2s ease, transform 0.1s ease;
            font-weight: 700;
            text-transform: uppercase;
        }

        .self-correct-button.wrong {
             background-color: #dc3545; /* Red for Wrong */
        }

        .self-correct-button:hover:not(:disabled) {
             background-color: #218838; /* Darker green */
             transform: translateY(-2px);
        }

        .self-correct-button.wrong:hover:not(:disabled) {
             background: #c82333; /* Darker red */
             transform: translateY(-2px);
        }

        .self-correct-button:active:not(:disabled) {
             transform: translateY(0);
        }

        .self-correct-button:disabled {
             opacity: 0.6;
             cursor: not-allowed;
        }


        #game-title {
            color: #1a2a6c;
            /* Deep blue */
            margin-bottom: 15px;
            /* Less margin above counter */
            font-size: 2em;
            font-weight: 900;
        }

        .question-counter {
            font-size: 1em;
            color: #666;
            margin-bottom: 25px;
            /* Space below counter */
            font-weight: 400;
            /* Lato Regular */
        }

        #question-area {
            margin-bottom: 20px;
        }

        #question-text {
            font-size: 1.3em;
            margin-bottom: 20px;
            font-weight: 700;
            /* Lato Bold */
            line-height: 1.5;
            color: #444;
            text-align: left;
            /* Align question text left */
        }

        #answer-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
            /* Add margin below answer buttons */
        }

         #essay-self-correction-buttons {
             /* Container for essay correction buttons */
             margin-top: 15px; /* Space above buttons */
             margin-bottom: 20px; /* Space below buttons */
         }


        .answer-button {
            background-color: #f0f0f0;
            /* Light grey button */
            color: #333;
            border: 1px solid #ddd;
            padding: 12px 15px;
            font-size: 1em;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            text-align: left;
            word-wrap: break-word;
            font-weight: 400;
        }

        .answer-button:hover:not(:disabled) {
            background-color: #e0e0e0;
            /* Slightly darker grey on hover */
            border-color: #ccc;
        }

        .answer-button:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        /* Visual feedback on answer buttons */
        .answer-button.correct {
            background-color: #4CAF50;
            /* Green */
            border-color: #4CAF50;
            color: white;
            font-weight: 700;
        }

        .answer-button.incorrect {
            background-color: #f44336;
            /* Red */
            border-color: #f44336;
            color: white;
            font-weight: 700;
        }

        #feedback {
            margin-top: 20px;
            font-size: 1.1em;
            min-height: 1.4em;
            font-weight: 700;
            color: #333;
            /* Neutral color, feedback color set by JS */
        }

        #explanation-area {
            margin-top: 15px;
            padding: 15px;
            background-color: #e8f5e9;
            /* Very light green for explanation */
            border: 1px solid #c8e6c9;
            /* Light green border */
            border-radius: 5px;
            text-align: left;
            color: #2e7d32;
            /* Dark green text */
            font-size: 0.95em;
            line-height: 1.5;
            opacity: 0;
            /* Start hidden */
            transform: translateY(10px);
            /* Start slightly lower */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            /* Animation */
        }

        #explanation-area.visible {
            /* Class added by JS */
            opacity: 1;
            transform: translateY(0);
        }


        #explanation-area h3 {
            margin-top: 0;
            margin-bottom: 8px;
            font-size: 1em;
            font-weight: 700;
            color: #1b5e20;
            /* Even darker green */
        }

        #score-area {
            margin-top: 20px;
            font-size: 1.1em;
            color: #1a2a6c;
            /* Deep blue */
            font-weight: 700;
        }

        .separator {
            border: none;
            border-top: 1px solid #eee;
            /* Very light solid line */
            height: 1px;
            margin: 20px 0;
        }

        #final-score {
            margin-top: 20px;
            font-size: 1.2em;
        }

        #final-score h2 {
            color: #1a2a6c;
            /* Deep blue */
            margin-bottom: 10px;
            font-weight: 900;
        }

        #final-score p {
            margin-bottom: 15px;
            font-weight: 700;
        }

        #final-score .action-button {
            margin-top: 15px;
            /* Less space above final score buttons */
        }


        #quote-area {
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            /* Very light solid line */
            color: #6c757d;
            /* Muted grey text */
            font-size: 0.9em;
            font-style: italic;
            font-weight: 400;
        }

        #current-quote {
            margin: 0;
            line-height: 1.4;
        }

        .hidden {
            display: none;
        }
         /* Basic sub/sup styling for HTML within questions/answers/explanations */
         sub, sup {
             font-size: 0.7em;
             line-height: 0;
             position: relative;
             vertical-align: baseline;
         }
         sup { top: -0.5em; }
         sub { bottom: -0.2em; }
    </style>

    <!-- Link to Google Fonts (Lato) -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    <!-- jsPDF library for PDF generation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
    <div id="lesson-selection" class="container">
        <h2>Welcome<br>Choose a Lesson</h2>
        <!-- Lesson buttons will be added here by JavaScript -->
    </div>

    <div class="game-container container hidden">
        <h1 id="game-title">Math (Application) Game Show!</h1>
        <div class="question-counter">Question <span id="current-q-num">0</span> of <span id="total-q-num">0</span>
        </div>

        <div id="question-area">
            <p id="question-text">Loading question...</p>
            <div id="answer-buttons">
                <!-- MCQ Answer buttons will be added here by JavaScript -->
            </div>
            <button id="reveal-answer-button" class="action-button hidden">Reveal Answer</button> <!-- New Reveal button -->
            <div id="essay-self-correction-buttons" class="hidden">
                <!-- Essay self-correction buttons will be added here by JavaScript -->
            </div>
        </div>

        <div id="feedback">
            <!-- Feedback message (Correct/Incorrect/Skipped/Self-Corrected) will appear here -->
        </div>

        <div id="explanation-area" class="hidden">
            <h3>Explanation:</h3>
            <p id="explanation-text"></p>
        </div>

        <!-- Add the "Add to Remember" button here -->
        <button id="add-to-remember-button" class="action-button hidden">Add to Remember List</button>


        <div id="score-area">
            Score: <span id="score">0</span>
        </div>

        <hr class="separator">

        <!-- Add the Skip button (visible only for MCQs) -->
        <button id="skip-button" class="action-button hidden">Skip Question</button>

        <button id="next-button" class="action-button hidden">Next Question</button>

        <div id="final-score" class="hidden">
            <h2>Game Over!</h2>
            <p>Your final score for this lesson is: <span id="final-score-text">0</span> / <span
                    id="final-total-text">0</span></p>
            <button id="download-mistakes-pdf" class="action-button hidden">Download Review PDF</button>
            <!-- Add the "Export All" button here -->
            <button id="export-all-pdf-button" class="action-button hidden">Export All Questions with Answers</button>
            <button id="restart-button" class="action-button">Choose Another Lesson</button>
        </div>

        <div id="quote-area">
            <p id="current-quote"></p>
        </div>
    </div>

    <!-- Embedded JavaScript -->
    <script>
	// Define the lesson topic(s) based on the new PDF
const Topics = {
    UNIT_7_TEST_1: 'Unit 7 Test 1',
    UNIT_7_TEST_2: 'Unit 7 Test 2',
    UNIT_8_TEST_1: 'Unit 8 Test 1',
    UNIT_8_TEST_2: 'Unit 8 Test 2',
    UNIT_9_TEST_1: 'Unit 9 Test 1',
    UNIT_9_TEST_2: 'Unit 9 Test 2',
    UNIT_10_TEST_1: 'Unit 10 Test 1',
    UNIT_11_TEST_1: 'Unit 11 Test 1',
    UNIT_12_TEST_1: 'Unit 12 Test 1',
    TRANSLATION_ENGLISH_TO_ARABIC: 'Translation: English to Arabic',
    TRANSLATION_ARABIC_TO_ENGLISH: 'Translation: Arabic to English',
    KING_LEAR_QUESTIONS: 'King Lear Play Questions',
    ESSAY_TOPICS: 'Essay Writing Topics',
};

const allQuestions = [
    // Unit 7 Test (1)
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 1,
        question: "1-Every student should have ..........to achieve their aims in life .",
        options: ["a)instruction", "b) determination", "c)error", "d)declaration"],
        correctAnswer: 1,
        correctAnswerText: "b) determination",
        explanation: "<b>Why this answer is correct:</b> 'Determination' is the quality of being resolute and persistent in pursuing a goal, which is essential for achieving aims in life.<br><br><b>Why other options are incorrect:</b> 'Instruction' refers to teaching or guidance. 'Error' means a mistake. 'Declaration' is a formal statement. None of these fit the context of a quality needed to achieve aims.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 2,
        question: "2- A lot of people in the world .......for survival .",
        options: ["a)stop", "b)stand", "c)struggle", "d)steer"],
        correctAnswer: 2,
        correctAnswerText: "c) struggle",
        explanation: "<b>Why this answer is correct:</b> To 'struggle for survival' means to make a forceful or violent effort to stay alive or overcome difficulties. This phrase is commonly used to describe the challenges faced by many in the world.<br><br><b>Why other options are incorrect:</b> 'Stop' means to cease an action. 'Stand' means to be upright. 'Steer' means to guide the movement of something. None of these verbs fit the context of fighting for one's existence.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 3,
        question: "3-People should work hard to improve their standard of .........",
        options: ["a)life", "b)live", "c)alive", "d)living"],
        correctAnswer: 3,
        correctAnswerText: "d) living",
        explanation: "<b>Why this answer is correct:</b> The correct idiomatic phrase is 'standard of living', which refers to the level of wealth, comfort, material goods, and necessities available to a person or community.<br><br><b>Why other options are incorrect:</b> 'Life' refers to existence itself, but 'standard of life' is not a common or correct idiom. 'Live' is a verb and 'alive' is an adjective, neither fitting the noun context.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 4,
        question: "4-The writer has ........a lot of novels this year .",
        options: ["a)polished", "b)published", "c)disappeared", "d)gone out"],
        correctAnswer: 1,
        correctAnswerText: "b) published",
        explanation: "<b>Why this answer is correct:</b> Writers 'publish' their novels, meaning they make them available to the public, usually through a publisher.<br><br><b>Why other options are incorrect:</b> 'Polished' means refined or improved. 'Disappeared' means ceased to be visible. 'Gone out' means left a place. These do not describe the action of a writer releasing their work.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 5,
        question: "5-......is the action of giving someone support, confidence or hope.",
        options: ["a)Confidence", "b)Disagreement", "c) Independence", "d) Encouragement"],
        correctAnswer: 3,
        correctAnswerText: "d) Encouragement",
        explanation: "<b>Why this answer is correct:</b> 'Encouragement' directly matches the definition provided: the act of giving someone support, confidence, or hope.<br><br><b>Why other options are incorrect:</b> 'Confidence' is a feeling of self-assurance. 'Disagreement' is a difference of opinion. 'Independence' is freedom from external control. None of these fit the given definition.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 6,
        question: "6-My neighbour is very kind. He usually ....old people up and takes them to places they want to go .",
        options: ["a)picks", "b)links", "c)kicks", "d)knocks"],
        correctAnswer: 0,
        correctAnswerText: "a) picks",
        explanation: "<b>Why this answer is correct:</b> The phrasal verb 'picks up' means to give someone a ride in a vehicle. This fits the context of taking old people to places they want to go.<br><br><b>Why other options are incorrect:</b> 'Links' means connects. 'Kicks' means to strike with the foot. 'Knocks' means to strike a surface, typically to attract attention. These verbs do not fit the context.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 7,
        question: "7-You have to ........the right of others .",
        options: ["a)restart", "b)restore", "c) respect", "d)replace"],
        correctAnswer: 2,
        correctAnswerText: "c) respect",
        explanation: "<b>Why this answer is correct:</b> To 'respect the rights of others' means to treat them with due regard for their feelings, wishes, or rights, which is a fundamental social principle.<br><br><b>Why other options are incorrect:</b> 'Restart' means to start again. 'Restore' means to bring back to a former condition. 'Replace' means to put something new in place of something old. These do not fit the ethical context.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 8,
        question: "8-A lot of Egyptians live abroad. The synonym of the word 'abroad' is.......",
        options: ["a)presence", "b)inside", "c) overseas", "d)in land"],
        correctAnswer: 2,
        correctAnswerText: "c) overseas",
        explanation: "<b>Why this answer is correct:</b> 'Overseas' is a direct synonym for 'abroad', meaning in or to a foreign country, especially one across the sea.<br><br><b>Why other options are incorrect:</b> 'Presence' refers to existence or being in a place. 'Inside' means within a place. 'In land' is not a standard phrase with this meaning; 'inland' refers to being away from the coast. None are synonyms for abroad.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 9,
        question: "9-Samir ........his car at the moment .",
        options: ["a)mends", "b)is mending", "c)mends", "d)mending"],
        correctAnswer: 1,
        correctAnswerText: "b) is mending",
        explanation: "<b>Why this answer is correct:</b> The phrase 'at the moment' indicates an action happening right now, which requires the present continuous tense (is/are + verb-ing).<br><br><b>Why other options are incorrect:</b> 'Mends' is simple present and indicates a habitual action, not an action in progress. 'Mending' alone is a gerund or present participle, not a complete verb phrase.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 10,
        question: "10-Nabil has booked a ticket . He .........to Cairo tomorrow .",
        options: ["a)will travel", "b)travel", "c)is travelling", "d)travelling"],
        correctAnswer: 2,
        correctAnswerText: "c) is travelling",
        explanation: "<b>Why this answer is correct:</b> 'Has booked a ticket' and 'tomorrow' indicate a definite future arrangement or plan. The present continuous tense is commonly used for such fixed future arrangements.<br><br><b>Why other options are incorrect:</b> 'Will travel' is simple future, used for predictions or decisions made at the moment of speaking. 'Travel' is a base verb. 'Travelling' alone is a gerund or present participle, not a complete verb phrase.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 11,
        question: "11- Mother has prepared everything. She .........in the afternoon .",
        options: ["a)cooks", "b)cooking", "c)is cooking", "d)will cook"],
        correctAnswer: 3,
        correctAnswerText: "d) will cook",
        explanation: "<b>Why this answer is correct:</b> 'Has prepared everything' indicates that the preparations are done, and 'will cook' states a definite future action or intention for 'in the afternoon'. While 'is cooking' (present continuous for future plans) could also fit, 'will cook' expresses a simple future statement or intention.<br><br><b>Why other options are incorrect:</b> 'Cooks' is simple present and indicates a habitual action. 'Cooking' alone is a gerund or present participle, not a complete verb phrase.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 12,
        question: "12-You can't see Nabil now. He.......",
        options: ["a)is sleeping", "b)sleeps", "c)sleeping", "d)slept"],
        correctAnswer: 0,
        correctAnswerText: "a) is sleeping",
        explanation: "<b>Why this answer is correct:</b> 'Now' indicates an action currently in progress, requiring the present continuous tense (is + verb-ing). If you can't see him now, it's because he is currently sleeping.<br><br><b>Why other options are incorrect:</b> 'Sleeps' is simple present, indicating a habitual action. 'Sleeping' alone is a gerund or present participle, not a complete verb phrase. 'Slept' is simple past.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 13,
        question: "13-They have arranged to play tennis tomorrow They........at 7oclock tomorrow.",
        options: ["a)are playing", "b)plays", "c)played", "d)is playing"],
        correctAnswer: 0,
        correctAnswerText: "a) are playing",
        explanation: "<b>Why this answer is correct:</b> 'Have arranged to play' and 'tomorrow at 7 o'clock' signify a definite future arrangement. The present continuous tense is used for such pre-arranged future events.<br><br><b>Why other options are incorrect:</b> 'Plays' is simple present. 'Played' is simple past. 'Is playing' would be for a singular subject.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 14,
        question: "14-It is important to focus .........your strength .",
        options: ["a)out", "b)with", "c)on", "d)up"],
        correctAnswer: 2,
        correctAnswerText: "c) on",
        explanation: "<b>Why this answer is correct:</b> The correct phrasal verb is 'focus on', meaning to direct one's attention or efforts towards something.<br><br><b>Why other options are incorrect:</b> The prepositions 'out', 'with', and 'up' do not form the correct phrasal verb in this context.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_1,
        originalNumber: 15,
        question: "15-My bag is similar ......yours but mine is smaller",
        options: ["a)up", "b)to", "c)as", "d)for"],
        correctAnswer: 1,
        correctAnswerText: "b) to",
        explanation: "<b>Why this answer is correct:</b> The correct idiom for comparison is 'similar to', indicating likeness or resemblance.<br><br><b>Why other options are incorrect:</b> 'Up', 'as', and 'for' do not form the correct comparative idiom with 'similar'.",
    },

    // Unit 7 Test (2)
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 1,
        question: "1- Soha's parents always give her a lot of support and .........",
        options: ["a) encouragement", "b)determination", "c)entertainment", "d)condensation"],
        correctAnswer: 0,
        correctAnswerText: "a) encouragement",
        explanation: "<b>Why this answer is correct:</b> 'Support and encouragement' are often used together to describe positive reinforcement and motivation given to someone.<br><br><b>Why other options are incorrect:</b> 'Determination' is a personal quality, not something given by others in this context. 'Entertainment' is amusement. 'Condensation' is the process of water vapor turning into liquid. None fit the meaning.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 2,
        question: "2-There are no simple ........to the problem of overpopulation",
        options: ["a)attention", "b)troubles", "c)alternatives", "d)expectations"],
        correctAnswer: 2,
        correctAnswerText: "c) alternatives",
        explanation: "<b>Why this answer is correct:</b> 'No simple alternatives' means there are no easy or straightforward solutions or choices to address the complex problem of overpopulation.<br><br><b>Why other options are incorrect:</b> 'Attention' is focusing the mind. 'Troubles' are problems, but the phrasing 'no simple troubles to the problem' is redundant. 'Expectations' are beliefs about what will happen. None fit the context of solutions.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 3,
        question: "3-.........is something that you do to punish somebody who has hurt you .",
        options: ["a) Revenge", "b) Prove", "c)Determination", "d)Madness"],
        correctAnswer: 0,
        correctAnswerText: "a) Revenge",
        explanation: "<b>Why this answer is correct:</b> 'Revenge' is the action of harming someone in return for an injury or wrong suffered at their hands, which perfectly matches the definition.<br><br><b>Why other options are incorrect:</b> 'Prove' means to demonstrate the truth of something. 'Determination' is persistence. 'Madness' is a state of being insane. None fit the punitive action described.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 4,
        question: "4-I can't find a taxi . Can you ........me up to school, please?",
        options: ["a)give", "b)get", "c) pick", "d)grow"],
        correctAnswer: 2,
        correctAnswerText: "c) pick",
        explanation: "<b>Why this answer is correct:</b> 'Pick me up' is an idiomatic expression meaning to collect someone in a vehicle and give them a ride.<br><br><b>Why other options are incorrect:</b> 'Give', 'get', and 'grow' do not form the correct phrasal verb for offering a ride.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 5,
        question: "5-A........is a vehicle with wheels that is pulled by horses .",
        options: ["a)car", "b)carriage", "c)plane", "d)court"],
        correctAnswer: 1,
        correctAnswerText: "b) carriage",
        explanation: "<b>Why this answer is correct:</b> The definition provided perfectly describes a 'carriage', which is a wheeled vehicle pulled by horses, often used for passengers.<br><br><b>Why other options are incorrect:</b> A 'car' is typically self-propelled. A 'plane' is an aircraft. A 'court' is an area for playing sports or a legal body. None fit the description.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 6,
        question: "6-The educational authority presented strong .........for building a new school in the city.",
        options: ["a)disagreements", "b)articles", "c)titles", "d)arguments"],
        correctAnswer: 3,
        correctAnswerText: "d) arguments",
        explanation: "<b>Why this answer is correct:</b> 'Arguments' in this context means reasons or justifications put forward to persuade others that building a new school is a good idea.<br><br><b>Why other options are incorrect:</b> 'Disagreements' are differences of opinion. 'Articles' are written pieces or items. 'Titles' are names of books or positions. None fit the context of persuasive reasons.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 7,
        question: "7-To.........is to go down on one or both knees .",
        options: ["a)leg", "b)kneel", "c)deceive", "d)receive"],
        correctAnswer: 1,
        correctAnswerText: "b) kneel",
        explanation: "<b>Why this answer is correct:</b> The definition describes the act of 'kneeling', which means to go down on one or both knees.<br><br><b>Why other options are incorrect:</b> 'Leg' is a body part. 'Deceive' means to mislead. 'Receive' means to get something. None fit the physical action described.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 8,
        question: "8-Nabil......his dinner now .",
        options: ["a)have", "b)has", "c)having", "d)is having"],
        correctAnswer: 3,
        correctAnswerText: "d) is having",
        explanation: "<b>Why this answer is correct:</b> The word 'now' indicates an action currently in progress, requiring the present continuous tense (is/are + verb-ing). 'Is having dinner' means he is currently eating dinner.<br><br><b>Why other options are incorrect:</b> 'Have' and 'has' are simple present, indicating habitual actions or possession. 'Having' alone is a gerund or present participle, not a complete verb phrase.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 9,
        question: "9-Karam ..........his homework, so he can't go out for a walk.",
        options: ["a)do", "b)does", "c)is doing", "d)did"],
        correctAnswer: 2,
        correctAnswerText: "c) is doing",
        explanation: "<b>Why this answer is correct:</b> The reason he can't go out for a walk is because he is currently engaged in the action of doing his homework. This ongoing action requires the present continuous tense.<br><br><b>Why other options are incorrect:</b> 'Do' and 'does' are simple present. 'Did' is simple past. None indicate an action happening at the moment of speaking that prevents another activity.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 10,
        question: "10-Scarcely ____ to the cinema.",
        options: ["a) had he been", "b) does he go", "c) is he going", "d) he goes"],
        correctAnswer: 0,
        correctAnswerText: "a) had he been",
        explanation: "<b>Why this answer is correct:</b> This sentence uses past perfect inversion after a negative adverb ('Scarcely'). 'Scarcely had he been to the cinema' indicates that he had very rarely visited the cinema up to a certain point in the past. This structure emphasizes the infrequency of a past experience.<br><br><b>Why other options are incorrect:</b> 'Does he go' uses present simple inversion for a general present habit, but the past perfect is the intended answer for this specific grammatical test. 'Is he going' is present continuous. 'He goes' is simple present without inversion, which is incorrect when 'Scarcely' begins the sentence.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 11,
        question: "11-Why........that fish ! It smells terrible.",
        options: ["a)do you eat", "b)are you eating", "c)did you eat", "d)were you eating"],
        correctAnswer: 1,
        correctAnswerText: "b) are you eating",
        explanation: "<b>Why this answer is correct:</b> The speaker is commenting on something happening at the moment ('It smells terrible'), indicating an ongoing action ('eating that fish'). This requires the present continuous tense.<br><br><b>Why other options are incorrect:</b> 'Do you eat' is simple present, for habitual actions. 'Did you eat' is simple past. 'Were you eating' is past continuous.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 12,
        question: "12-My friend ..........his birthday party at 7 o'clock tomorrow",
        options: ["a)give", "b)gives", "c)gave", "d)is giving"],
        correctAnswer: 3,
        correctAnswerText: "d) is giving",
        explanation: "<b>Why this answer is correct:</b> 'At 7 o'clock tomorrow' signifies a definite future arrangement or plan. The present continuous tense is used for such pre-arranged future events.<br><br><b>Why other options are incorrect:</b> 'Give' is the base verb. 'Gives' is simple present, for habitual actions. 'Gave' is simple past.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 13,
        question: "13-Listen! The teacher ..........",
        options: ["a)speaks", "b) spoke", "c)speaking", "d)is speaking"],
        correctAnswer: 3,
        correctAnswerText: "d) is speaking",
        explanation: "<b>Why this answer is correct:</b> The imperative 'Listen!' indicates that an action is happening right now, which requires the present continuous tense (is/are + verb-ing).<br><br><b>Why other options are incorrect:</b> 'Speaks' is simple present. 'Spoke' is simple past. 'Speaking' alone is a gerund or present participle, not a complete verb phrase.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 14,
        question: "14-You have to depend .......yourself.",
        options: ["a)in", "b)on", "c)at", "d)for"],
        correctAnswer: 1,
        correctAnswerText: "b) on",
        explanation: "<b>Why this answer is correct:</b> The correct phrasal verb is 'depend on', meaning to rely on someone or something.<br><br><b>Why other options are incorrect:</b> The prepositions 'in', 'at', and 'for' do not form the correct phrasal verb with 'depend' in this context.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_7_TEST_2,
        originalNumber: 15,
        question: "15 -Don't worry .......me. I'll be all right.",
        options: ["a)in", "b)at", "c)about", "d)for"],
        correctAnswer: 2,
        correctAnswerText: "c) about",
        explanation: "<b>Why this answer is correct:</b> The correct phrasal verb is 'worry about', meaning to feel anxious or concerned about something or someone.<br><br><b>Why other options are incorrect:</b> The prepositions 'in', 'at', and 'for' do not form the correct phrasal verb with 'worry' in this context.",
    },

    // Unit 8 Test (1)
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 1,
        question: "1-..........is when something increases in size,range or amount.",
        options: ["a)Expansion", "b)Explanation", "c)Exploration", "d) Extension"],
        correctAnswer: 0,
        correctAnswerText: "a) Expansion",
        explanation: "<b>Why this answer is correct:</b> 'Expansion' refers to the action of becoming larger or more extensive, which perfectly matches the definition.<br><br><b>Why other options are incorrect:</b> 'Explanation' is clarifying something. 'Exploration' is traveling to discover. 'Extension' refers to an added part or continuation, but 'expansion' specifically refers to growth in size/range/amount.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 2,
        question: "2-There are a lot of ........in my town .",
        options: ["a) facilities", "b)famines", "c)farms", "d)ferries"],
        correctAnswer: 0,
        correctAnswerText: "a) facilities",
        explanation: "<b>Why this answer is correct:</b> 'Facilities' refers to buildings, services, or equipment provided for a particular purpose, such as public services or amenities in a town.<br><br><b>Why other options are incorrect:</b> 'Famines' are extreme scarcity of food. 'Farms' are areas of land for agriculture. 'Ferries' are boats that transport people/vehicles. These are too specific or don't fit the general context of 'a lot of... in my town'.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 3,
        question: "3-It is important to build up a ..........of professional contact among your colleagues.",
        options: ["a)contract", "b)collection", "c)chain", "d)network"],
        correctAnswer: 3,
        correctAnswerText: "d) network",
        explanation: "<b>Why this answer is correct:</b> To 'build up a network of professional contact' means to establish and develop connections with colleagues for mutual benefit.<br><br><b>Why other options are incorrect:</b> 'Contract' is a formal agreement. 'Collection' is a group of things. 'Chain' is a series of interconnected links. None fit the context of professional relationships.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 4,
        question: "4-What we need is a cheap and reliable ......... of public transportation to help all people in Egypt .",
        options: ["a)operation", "b)system", "c) procession", "d)process"],
        correctAnswer: 1,
        correctAnswerText: "b) system",
        explanation: "<b>Why this answer is correct:</b> A 'system of public transportation' refers to the organized and interconnected infrastructure and services that provide public transport.<br><br><b>Why other options are incorrect:</b> 'Operation' is the act of operating. 'Procession' is a group of people moving forward. 'Process' is a series of actions or steps. None fit the meaning of an organized transport infrastructure.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 5,
        question: "5-The report ......a discussion of global warming",
        options: ["a)consists", "b)includes", "c)encloses", "d)composes"],
        correctAnswer: 1,
        correctAnswerText: "b) includes",
        explanation: "<b>Why this answer is correct:</b> To 'include' something means to contain or feature it as part of a whole. A report often includes discussions of specific topics.<br><br><b>Why other options are incorrect:</b> 'Consists' implies components making up the whole. 'Encloses' means to surround or contain within a boundary. 'Composes' means to create or form something. 'Includes' is the most natural fit here.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 6,
        question: "6-To........is to join something to the main supply of electricity,gas or water to a telephone or computer network.",
        options: ["a) contack", "b)communicate", "c)connect", "d)contrast"],
        correctAnswer: 2,
        correctAnswerText: "c) connect",
        explanation: "<b>Why this answer is correct:</b> The definition perfectly describes the act of 'connecting' something, meaning to join it to a supply or network.<br><br><b>Why other options are incorrect:</b> 'Contack' is a misspelling of 'contact'. 'Communicate' is to share information. 'Contrast' is to show differences. None fit the act of physical or digital joining.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 7,
        question: "7-Could you .......the lesson again,please?",
        options: ["a)say", "b)beg", "c)complain", "d)explain"],
        correctAnswer: 3,
        correctAnswerText: "d) explain",
        explanation: "<b>Why this answer is correct:</b> To 'explain' a lesson means to make it clear by describing it in more detail or revealing relevant facts or ideas.<br><br><b>Why other options are incorrect:</b> 'Say' is to speak words. 'Beg' is to ask earnestly. 'Complain' is to express dissatisfaction. None fit the context of clarifying information.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 8,
        question: "8- The criminal didnt have .........explanation for committing the crime .",
        options: ["a)stress", "b)satisfaction", "c)satisfactory", "d)stressful"],
        correctAnswer: 2,
        correctAnswerText: "c) satisfactory",
        explanation: "<b>Why this answer is correct:</b> A 'satisfactory explanation' is one that is considered adequate, convincing, or acceptable.<br><br><b>Why other options are incorrect:</b> 'Stress' is pressure or tension. 'Satisfaction' is the fulfillment of desires. 'Stressful' is causing stress. Only 'satisfactory' is an adjective that can describe an explanation.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 9,
        question: "9-By next August, the government.......... the new bridge .",
        options: ["a)will finish", "b)will have finished", "c) will have been finished", "d)finishes"],
        correctAnswer: 1,
        correctAnswerText: "b) will have finished",
        explanation: "<b>Why this answer is correct:</b> 'By next August' indicates an action that will be completed by a specific point in the future. This requires the future perfect tense (will have + past participle).<br><br><b>Why other options are incorrect:</b> 'Will finish' is simple future. 'Will have been finished' is future perfect passive, but the sentence implies the government is the doer. 'Finishes' is simple present.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 10,
        question: "10-Will They ........a new school by next year?",
        options: ["A)build", "b)built", "c) have built", "d)building"],
        correctAnswer: 2,
        correctAnswerText: "c) have built",
        explanation: "<b>Why this answer is correct:</b> 'By next year' indicates completion by a future point, requiring the future perfect tense. The full verb phrase in a question is 'Will they have built'.<br><br><b>Why other options are incorrect:</b> 'Build' is base verb. 'Built' is past participle (needs auxiliary). 'Building' is a gerund/present participle.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 11,
        question: "11-In two hours time, I .........all my homework.",
        options: ["a) Will do", "b) will have done", "c)are doing", "d)will be doing"],
        correctAnswer: 1,
        correctAnswerText: "b) will have done",
        explanation: "<b>Why this answer is correct:</b> 'In two hours time' refers to a point in the future by which an action will be completed. This requires the future perfect tense (will have + past participle).<br><br><b>Why other options are incorrect:</b> 'Will do' is simple future. 'Are doing' is present continuous. 'Will be doing' is future continuous, for an action ongoing at a future point.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 12,
        question: "12-They plan to play football next week. They .......it at 9 o’clock.",
        options: ["a)will play", "b)going to play", "c)are going to play", "d)plays"],
        correctAnswer: 2,
        correctAnswerText: "c) are going to play",
        explanation: "<b>Why this answer is correct:</b> 'They plan to play' and 'at 9 o’clock' indicate a definite future plan or arrangement. 'Are going to play' is used for intentions or plans.<br><br><b>Why other options are incorrect:</b> 'Will play' is simple future. 'Going to play' is incomplete. 'Plays' is simple present.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 13,
        question: "13-This time next week . I .......physics.",
        options: ["a)will finish", "b) will have finished", "c)will being finish", "d)finishes"],
        correctAnswer: 1,
        correctAnswerText: "b) will have finished",
        explanation: "<b>Why this answer is correct:</b> 'This time next week' refers to a specific point in the future by which an action will be completed. This requires the future perfect tense (will have + past participle).<br><br><b>Why other options are incorrect:</b> 'Will finish' is simple future. 'Will being finish' is grammatically incorrect. 'Finishes' is simple present.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 14,
        question: "14-Nabil always comes",
        options: ["a- lately", "b- late", "c- later than", "d- latest"],
        correctAnswer: 1,
        correctAnswerText: "b) late",
        explanation: "<b>Why this answer is correct:</b> 'Late' is an adverb meaning after the usual or expected time. 'Always comes late' describes a habitual tardiness.<br><br><b>Why other options are incorrect:</b> 'Lately' means recently. 'Later than' is a comparative. 'Latest' means most recent. Only 'late' fits the context of being behind schedule.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_1,
        originalNumber: 15,
        question: "15-By next November,all the leaves",
        options: ["a)may be fallen", "b)will have filled", "c)will have felled", "d)will have fallen"],
        correctAnswer: 3,
        correctAnswerText: "d) will have fallen",
        explanation: "<b>Why this answer is correct:</b> 'By next November' indicates a point in the future by which an action will be completed. The leaves will have completed the action of falling, requiring the future perfect tense. The verb 'fall' is intransitive, so it is 'will have fallen'.<br><br><b>Why other options are incorrect:</b> 'May be fallen' is passive, but 'fall' is usually active. 'Will have filled' is a different verb. 'Will have felled' uses 'fell' (to cut down a tree), which is incorrect here.",
    },

    // Unit 8 Test (2)
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 1,
        question: "1- We should all ........each other to live peacefully.",
        options: ["a)aspect", "b)restart", "c) respect", "d)reclaim"],
        correctAnswer: 2,
        correctAnswerText: "c) respect",
        explanation: "<b>Why this answer is correct:</b> To 'respect each other' means to treat one another with consideration and dignity, which is essential for peaceful coexistence.<br><br><b>Why other options are incorrect:</b> 'Aspect' is a particular part or feature. 'Restart' means to start again. 'Reclaim' means to retrieve or recover something. None fit the social action required.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 2,
        question: "2-All Egyptians are.........to serve their country.",
        options: ["a)voluntary", "b)volunteer", "c)volunteers", "d)greedy"],
        correctAnswer: 2,
        correctAnswerText: "c) volunteers",
        explanation: "<b>Why this answer is correct:</b> 'Volunteers' are people who offer their services willingly and without being forced or paid for them. This fits the context of serving one's country.<br><br><b>Why other options are incorrect:</b> 'Voluntary' is an adjective. 'Volunteer' (singular) is a noun but 'All Egyptians' needs a plural. 'Greedy' means having an excessive desire for something.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 3,
        question: "3-All people in the world should be co-operative to solve ........among countries.",
        options: ["a)tissues", "b)issues", "c)debate", "d)agreement"],
        correctAnswer: 1,
        correctAnswerText: "b) issues",
        explanation: "<b>Why this answer is correct:</b> 'Issues' refers to important topics or problems for debate or discussion. Cooperation helps solve such problems among countries.<br><br><b>Why other options are incorrect:</b> 'Tissues' are biological cells or paper products. 'Debate' is a formal discussion. 'Agreement' is a state of being in harmony. 'Issues' is the most general term for problems to be solved.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 4,
        question: "4-We should encourage public............to solve the problem of pollution .",
        options: ["a)translate", "b)transfer", "c)transport", "d)treatment"],
        correctAnswer: 2,
        correctAnswerText: "c) transport",
        explanation: "<b>Why this answer is correct:</b> 'Public transport' or 'transportation' refers to shared passenger services, encouraging its use can reduce individual car use and pollution.<br><br><b>Why other options are incorrect:</b> 'Translate' is to convert text. 'Transfer' is to move from one place to another. 'Treatment' is medical care. Only 'transport' fits the context of solving pollution problems through public services.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 5,
        question: "5-There is no ..........that necessity is the mother of invention .",
        options: ["a)debt", "b)doubt", "c)deal", "d)dream"],
        correctAnswer: 1,
        correctAnswerText: "b) doubt",
        explanation: "<b>Why this answer is correct:</b> The common idiom is 'there is no doubt that', meaning there is no uncertainty or disagreement about something.<br><br><b>Why other options are incorrect:</b> 'Debt' is money owed. 'Deal' is an agreement. 'Dream' is a series of thoughts during sleep. None fit the idiomatic expression.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 6,
        question: "6-The airport was jammed with thousands of ..........from delayed or cancelled flights.",
        options: ["a)presenters", "b)interviewers", "c)passengers", "d)drivers"],
        correctAnswer: 2,
        correctAnswerText: "c) passengers",
        explanation: "<b>Why this answer is correct:</b> Airports are typically filled with 'passengers' (people traveling on an aircraft), especially when flights are delayed or cancelled.<br><br><b>Why other options are incorrect:</b> 'Presenters' give presentations. 'Interviewers' conduct interviews. 'Drivers' operate vehicles on roads. None are typically found in large numbers at an airport due to flight issues.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 7,
        question: "7- You should check all your electrical ............regularly.",
        options: ["a) equipment", "b)process", "c)advice", "d)manual"],
        correctAnswer: 0,
        correctAnswerText: "a) equipment",
        explanation: "<b>Why this answer is correct:</b> 'Equipment' refers to the necessary items for a particular purpose. Electrical equipment, such as appliances or wiring, should be checked regularly for safety.<br><br><b>Why other options are incorrect:</b> 'Process' is a series of actions. 'Advice' is guidance. 'Manual' is a handbook. None fit the physical items being checked.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 8,
        question: "8-The ...........cost was far higher than we had expected.",
        options: ["a)plural", "b)singular", "c)title", "d)total"],
        correctAnswer: 3,
        correctAnswerText: "d) total",
        explanation: "<b>Why this answer is correct:</b> The 'total cost' refers to the sum of all expenses or the overall amount spent, which can then be compared to expectations.<br><br><b>Why other options are incorrect:</b> 'Plural' and 'singular' relate to grammar. 'Title' is a name. None fit the context of financial expense.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 9,
        question: "9-My brother .........17 next year .",
        options: ["a)will be", "b)is going to be", "c)has been", "d)was"],
        correctAnswer: 0,
        correctAnswerText: "a) will be",
        explanation: "<b>Why this answer is correct:</b> 'Next year' indicates a future fact or event. The simple future tense 'will be' is appropriate for stating someone's future age.<br><br><b>Why other options are incorrect:</b> 'Is going to be' is for intentions or predictions based on current evidence. 'Has been' is present perfect. 'Was' is simple past.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 10,
        question: "10-In the year 2030 Egypt ........the new cities",
        options: ["a)will build", "b)will be building", "c)will have built", "d)builds"],
        correctAnswer: 2,
        correctAnswerText: "c) will have built",
        explanation: "<b>Why this answer is correct:</b> 'In the year 2030' implies that by this specific future point, the action of building will be completed. This requires the future perfect tense (will have + past participle).<br><br><b>Why other options are incorrect:</b> 'Will build' is simple future. 'Will be building' is future continuous. 'Builds' is simple present.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 11,
        question: "11-By 2025 two great projects ...........in Egypt.",
        options: ["a)will do", "b)will have done", "c)will be doing", "d)will have been done"],
        correctAnswer: 3,
        correctAnswerText: "d) will have been done",
        explanation: "<b>Why this answer is correct:</b> 'By 2025' indicates completion by a specific future point. Since 'projects' are the recipients of the action (they don't 'do' themselves, they 'are done'), the future perfect passive voice is required (will have been + past participle).<br><br><b>Why other options are incorrect:</b> 'Will do' is active simple future. 'Will have done' is active future perfect. 'Will be doing' is active future continuous. All are active, not passive.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 12,
        question: "12-He has arranged to spend his holiday in Aswan. He ........next week.",
        options: ["a)will travel", "b)travels", "c)is travelling", "d)has travel"],
        correctAnswer: 2,
        correctAnswerText: "c) is travelling",
        explanation: "<b>Why this answer is correct:</b> 'Has arranged' and 'next week' indicate a definite future plan or arrangement. The present continuous tense is used for such fixed future arrangements.<br><br><b>Why other options are incorrect:</b> 'Will travel' is simple future. 'Travels' is simple present. 'Has travel' is grammatically incorrect.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 13,
        question: "13-The plane ........at Cairo airport at 10 Oclock .",
        options: ["a)arrive", "b)arrives", "c)will arrive", "d)arrived"],
        correctAnswer: 1,
        correctAnswerText: "b) arrives",
        explanation: "<b>Why this answer is correct:</b> Scheduled events, such as plane arrivals, are typically expressed using the simple present tense, even when referring to future time.<br><br><b>Why other options are incorrect:</b> 'Arrive' is base verb. 'Will arrive' is simple future, but less common for fixed schedules. 'Arrived' is simple past.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 14,
        question: "14-The painters ........the hall by tomorrow night .",
        options: ["a)be painting", "b)have painting", "c) will have painted", "d)paint"],
        correctAnswer: 2,
        correctAnswerText: "c) will have painted",
        explanation: "<b>Why this answer is correct:</b> 'By tomorrow night' indicates a specific point in the future by which the action of painting will be completed. This requires the future perfect tense (will have + past participle).<br><br><b>Why other options are incorrect:</b> 'Be painting' is future continuous passive. 'Have painting' is grammatically incorrect. 'Paint' is a base verb.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_8_TEST_2,
        originalNumber: 15,
        question: "15- The plural of the word 'belief' is",
        options: ["a)believes", "b)belief", "c)beliefs", "d)believe"],
        correctAnswer: 2,
        correctAnswerText: "c) beliefs",
        explanation: "<b>Why this answer is correct:</b> The plural form of the noun 'belief' is 'beliefs'.<br><br><b>Why other options are incorrect:</b> 'Believes' is a verb. 'Belief' is the singular noun. 'Believe' is a verb.",
    },

    // Unit 9 Test (1)
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 1,
        question: "1-The .........of the computer is that it saves time and effort.",
        options: ["a)cons", "b)pros", "c) prose", "d)coins"],
        correctAnswer: 1,
        correctAnswerText: "b) pros",
        explanation: "<b>Why this answer is correct:</b> 'Pros' is an abbreviation for advantages or benefits. Saving time and effort is a major advantage of computers.<br><br><b>Why other options are incorrect:</b> 'Cons' are disadvantages. 'Prose' is ordinary written or spoken language. 'Coins' are pieces of money. None fit the context of benefits.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 2,
        question: "2-The government should make laws to protect ......animals all over the country.",
        options: ["a)danger", "b)endangered", "c)secure", "d)serious"],
        correctAnswer: 1,
        correctAnswerText: "b) endangered",
        explanation: "<b>Why this answer is correct:</b> 'Endangered animals' are species at risk of extinction, making them a primary focus for protective laws.<br><br><b>Why other options are incorrect:</b> 'Danger' is a noun, not an adjective to describe animals in this context. 'Secure' means safe. 'Serious' means grave or important. Only 'endangered' specifically categorizes animals needing protection.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 3,
        question: "3-I have .....a table at the restaurant for ten o’clock .",
        options: ["a)took", "b)booked", "c)place", "d)leaked"],
        correctAnswer: 1,
        correctAnswerText: "b) booked",
        explanation: "<b>Why this answer is correct:</b> To 'book a table' means to reserve it for a specific time, which is a common action when planning to dine out.<br><br><b>Why other options are incorrect:</b> 'Took' is past tense of take. 'Place' is a noun. 'Leaked' means liquid/gas escaping from a container. None fit the context of making a reservation.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 4,
        question: "4-My grandmother often puts fruit in jars with lots of sugar to.....them",
        options: ["a)reserve", "b)preserve", "c)prevent", "d)serve"],
        correctAnswer: 1,
        correctAnswerText: "b) preserve",
        explanation: "<b>Why this answer is correct:</b> Sugar is commonly used as a preservative to 'preserve' fruit, meaning to maintain it in its original state or to prevent its decomposition.<br><br><b>Why other options are incorrect:</b> 'Reserve' means to set aside for future use. 'Prevent' means to stop something from happening. 'Serve' means to offer food. Only 'preserve' describes the act of keeping food from spoiling.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 5,
        question: "5-Judy hopes to get a...........so that she can study at a really good university.",
        options: ["a)scholarship", "b)money", "c)help", "d)price"],
        correctAnswer: 0,
        correctAnswerText: "a) scholarship",
        explanation: "<b>Why this answer is correct:</b> A 'scholarship' is a grant or payment made to support a student's education, awarded on the basis of academic or other achievement. This fits the context of studying at a good university.<br><br><b>Why other options are incorrect:</b> 'Money' is too general. 'Help' is too vague. 'Price' refers to the cost of something.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 6,
        question: "6-Planning a wedding reception for over 1000 guests will be very .....",
        options: ["a)challenged", "b)challenging", "c)changed", "d)unchangeable"],
        correctAnswer: 1,
        correctAnswerText: "b) challenging",
        explanation: "<b>Why this answer is correct:</b> Planning an event for 1000 guests presents significant difficulty, making it 'challenging' (an adjective describing something that tests one's abilities).<br><br><b>Why other options are incorrect:</b> 'Challenged' is past participle (passive). 'Changed' means altered. 'Unchangeable' means not able to be changed. Only 'challenging' describes the nature of the task.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 7,
        question: "7-My cousin is very ............she can sing and speak four languages",
        options: ["a)historical", "b)hostile", "c)powerful", "d)talented"],
        correctAnswer: 3,
        correctAnswerText: "d) talented",
        explanation: "<b>Why this answer is correct:</b> The ability to sing and speak four languages indicates that someone is 'talented', meaning having a natural aptitude or skill for something.<br><br><b>Why other options are incorrect:</b> 'Historical' relates to history. 'Hostile' means unfriendly. 'Powerful' means having great strength or influence. Only 'talented' fits the description of specific skills.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 8,
        question: "8-How about a .........to the zoo next week ?I feel bored .",
        options: ["a)trip", "b)trap", "c)voyage", "d)tape"],
        correctAnswer: 0,
        correctAnswerText: "a) trip",
        explanation: "<b>Why this answer is correct:</b> A 'trip' is a journey or excursion, especially for pleasure. 'How about a trip to the zoo?' is a common suggestion for an outing.<br><br><b>Why other options are incorrect:</b> 'Trap' is a device for catching animals. 'Voyage' is a long journey involving travel by sea or in space. 'Tape' is a strip of material. None fit the context of a short, recreational visit.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 9,
        question: "9-Omar ...... ........games every day. He no longer does that .",
        options: ["a)is used to playing", "b)is used for playing", "c) used to play", "d)played"],
        correctAnswer: 2,
        correctAnswerText: "c) used to play",
        explanation: "<b>Why this answer is correct:</b> 'Used to play' expresses a past habit or routine that no longer happens ('He no longer does that').<br><br><b>Why other options are incorrect:</b> 'Is used to playing' means accustomed to. 'Is used for playing' expresses purpose (passive). 'Played' is simple past, but 'used to' specifically highlights the discontinued habit.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 10,
        question: "10-He ........spend all his free time writing. he no longer does that .",
        options: ["a)is used to", "b)uses", "c)used to", "d) was using"],
        correctAnswer: 2,
        correctAnswerText: "c) used to",
        explanation: "<b>Why this answer is correct:</b> 'Used to' expresses a past habit or state that no longer exists in the present ('he no longer does that').<br><br><b>Why other options are incorrect:</b> 'Is used to' means accustomed to. 'Uses' is simple present. 'Was using' is past continuous.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 11,
        question: "11- A calculator ...........do sums",
        options: ["a) is used to", "b)is used for", "c)used to", "d)used for"],
        correctAnswer: 0,
        correctAnswerText: "a) is used to",
        explanation: "<b>Why this answer is correct:</b> 'Is used to + infinitive' (e.g., 'is used to do') is used to express the purpose or function of something in the passive voice.<br><br><b>Why other options are incorrect:</b> 'Is used for' would require a gerund (e.g., 'for doing sums'). 'Used to' without 'is' refers to past habits. 'Used for' is incomplete without 'is'.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 12,
        question: "12-Your car is exactly the same ......my car .",
        options: ["a)for", "b)in", "c)as", "d)from"],
        correctAnswer: 2,
        correctAnswerText: "c) as",
        explanation: "<b>Why this answer is correct:</b> The correct phrase for comparison expressing identical likeness is 'the same as'.<br><br><b>Why other options are incorrect:</b> 'For', 'in', and 'from' do not form the correct comparative idiom with 'the same'.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 13,
        question: "13-In Cairo people ........noise every day.",
        options: ["a)use to", "b)are used", "c)are used to", "d)used to"],
        correctAnswer: 2,
        correctAnswerText: "c) are used to",
        explanation: "<b>Why this answer is correct:</b> 'Are used to' means accustomed to something. The sentence implies that people in Cairo are accustomed to the noise daily.<br><br><b>Why other options are incorrect:</b> 'Use to' is grammatically incomplete here. 'Are used' is passive but doesn't convey 'accustomed to'. 'Used to' refers to a past habit.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 14,
        question: "14-Did Ali ............to swim in the sea when he was in Alexandria ?",
        options: ["a)use", "b)used", "c)using", "d)is used to"],
        correctAnswer: 0,
        correctAnswerText: "a) use",
        explanation: "<b>Why this answer is correct:</b> When forming a question about past habits with 'Did', the structure is 'Did + subject + use to + base verb'. The past tense is carried by 'Did'.<br><br><b>Why other options are incorrect:</b> 'Used' is incorrect after 'Did' in a question. 'Using' is present participle. 'Is used to' refers to being accustomed to something in the present.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 15,
        question: "15-Your suit is .........cheaper than my suit .",
        options: ["a)slight", "b)slightly", "c)sight", "d)night"],
        correctAnswer: 1,
        correctAnswerText: "b) slightly",
        explanation: "<b>Why this answer is correct:</b> 'Slightly' is an adverb meaning to a small degree or extent. It modifies the adjective 'cheaper' to indicate a small difference in price.<br><br><b>Why other options are incorrect:</b> 'Slight' is an adjective. 'Sight' is what you see. 'Night' is a time of day. None fit the context of modifying the comparison.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_1,
        originalNumber: 16,
        question: "16- He -------- in Cairo since he was born. He is still there.",
        options: ["a)has been", "b)has gone", "c)went", "d)had been"],
        correctAnswer: 0,
        correctAnswerText: "a) has been",
        explanation: "<b>Why this answer is correct:</b> 'Has been in' (Present Perfect) is used to describe a continuous state of residence or presence in a place from a specified past time ('since he was born') up to the present ('He is still there').<br><br><b>Why other options are incorrect:</b> 'Has gone' implies travel and current presence, but doesn't fit the 'born there' context as naturally for continuous residence. 'Went' is simple past. 'Had been' is past perfect, used for actions completed before another past event.",
    },

    // Unit 9 Test (2)
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 1,
        question: "1-The men made .......to Spain, Greece and Asia to find fossils .",
        options: ["a)duties", "b)tasks", "c) expedition", "d)picnics"],
        correctAnswer: 2,
        correctAnswerText: "c) expedition",
        explanation: "<b>Why this answer is correct:</b> An 'expedition' is a journey undertaken by a group of people with a particular purpose, especially of exploration or scientific research, like finding fossils.<br><br><b>Why other options are incorrect:</b> 'Duties' are moral or legal obligations. 'Tasks' are jobs to be done. 'Picnics' are outdoor meals. None fit the scale and purpose of the journey described.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 2,
        question: "2- There is a ........of pictures on the wall.",
        options: ["a)clarity", "b)various", "c) variety", "d)popularity"],
        correctAnswer: 2,
        correctAnswerText: "c) variety",
        explanation: "<b>Why this answer is correct:</b> 'Variety' refers to the quality or state of being different or diverse. A 'variety of pictures' implies there are many different kinds of pictures.<br><br><b>Why other options are incorrect:</b> 'Clarity' is clearness. 'Various' is an adjective. 'Popularity' is the state of being liked by many. None fit as a noun describing a collection of diverse pictures.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 3,
        question: "3-A lot of ..........of animals and plants are about to become extinct .",
        options: ["a)spicy", "b)species", "c)spice", "d)space"],
        correctAnswer: 1,
        correctAnswerText: "b) species",
        explanation: "<b>Why this answer is correct:</b> 'Species' refers to a group of living organisms consisting of similar individuals. Many species of animals and plants face extinction.<br><br><b>Why other options are incorrect:</b> 'Spicy' is an adjective describing food flavor. 'Spice' is an aromatic substance. 'Space' is an area. None fit the biological classification.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 4,
        question: "4-.........is the existence of a large number of different kinds of animals and plants which make a balanced environment .",
        options: ["a)Biology", "b)Biochemistry", "c) Biodiversity", "d)Biodynamic"],
        correctAnswer: 2,
        correctAnswerText: "c) Biodiversity",
        explanation: "<b>Why this answer is correct:</b> 'Biodiversity' is the variety of life on Earth, encompassing different kinds of animals and plants, which contributes to a balanced environment. This directly matches the definition.<br><br><b>Why other options are incorrect:</b> 'Biology' is the study of living organisms. 'Biochemistry' is the chemistry of living processes. 'Biodynamic' relates to a holistic approach to farming. None fit the given definition.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 5,
        question: "5-The new hotel has lots of modern .........including a gym and swimming pool .",
        options: ["a) facilities", "b)species", "c)objects", "d)innovators"],
        correctAnswer: 0,
        correctAnswerText: "a) facilities",
        explanation: "<b>Why this answer is correct:</b> 'Facilities' refers to buildings, services, or equipment provided for a particular purpose. A gym and swimming pool are examples of modern facilities in a hotel.<br><br><b>Why other options are incorrect:</b> 'Species' are biological classifications. 'Objects' are things. 'Innovators' are people who introduce new methods or ideas. None fit the context of hotel amenities.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 6,
        question: "6- Salma hopes to get a ..........so that she can study at a really good university.",
        options: ["a) scholarship", "b)money", "c)help", "d)price"],
        correctAnswer: 0,
        correctAnswerText: "a) scholarship",
        explanation: "<b>Why this answer is correct:</b> A 'scholarship' is a grant or payment made to support a student's education, awarded on the basis of academic or other achievement. This fits the context of studying at a good university.<br><br><b>Why other options are incorrect:</b> 'Money' is too general. 'Help' is too vague. 'Price' refers to the cost of something.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 7,
        question: "7-...........is difficult in a way that tests your ability or determination",
        options: ["a) Challenging", "b)Fighting", "c)Daring", "d)Encouraging"],
        correctAnswer: 0,
        correctAnswerText: "a) Challenging",
        explanation: "<b>Why this answer is correct:</b> 'Challenging' describes something that tests one's abilities, determination, or resolve, which matches the definition provided.<br><br><b>Why other options are incorrect:</b> 'Fighting' is engaging in combat. 'Daring' means adventurous or bold. 'Encouraging' provides hope or confidence. Only 'challenging' directly relates to testing ability/determination.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 8,
        question: "8-.........is when a person, an animal, etc. continues to live .",
        options: ["a)Arrival", "b)Survival", "c)Sustain", "d) Suspect"],
        correctAnswer: 1,
        correctAnswerText: "b) Survival",
        explanation: "<b>Why this answer is correct:</b> 'Survival' is the state or fact of continuing to live or exist, typically in spite of an accident, ordeal, or difficult circumstances. This directly matches the definition.<br><br><b>Why other options are incorrect:</b> 'Arrival' is the act of reaching a place. 'Sustain' means to strengthen or support. 'Suspect' is to believe to be true. None fit the idea of continuing to live.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 9,
        question: "9-When he was young, he usually .........in the street .",
        options: ["a)play", "b)plays", "c)played", "d)playing"],
        correctAnswer: 2,
        correctAnswerText: "c) played",
        explanation: "<b>Why this answer is correct:</b> 'When he was young' indicates a past time. The simple past tense 'played' describes a habitual action from that past period.<br><br><b>Why other options are incorrect:</b> 'Play' is base verb. 'Plays' is simple present. 'Playing' is a participle/gerund.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 10,
        question: "10- Did he .......to play in dust when he was young ?",
        options: ["a)use", "b)used", "c)using", "d)uses"],
        correctAnswer: 0,
        correctAnswerText: "a) use",
        explanation: "<b>Why this answer is correct:</b> When forming a question about a past habit with 'Did', the structure is 'Did + subject + use to + base verb'. The past tense is carried by 'Did'.<br><br><b>Why other options are incorrect:</b> 'Used' is incorrect after 'Did' in a question. 'Using' is present participle. 'Uses' is simple present.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 11,
        question: "11-Nabil used to eat chips. Now, he........",
        options: ["a)isn't", "b)doesn’t", "c) don't", "d)didn't"],
        correctAnswer: 1,
        correctAnswerText: "b) doesn’t",
        explanation: "<b>Why this answer is correct:</b> 'Used to eat' refers to a past habit. The sentence asks about his current habit (Now). 'Doesn't' refers to the present simple negation of eating, which is implied if he no longer eats them.<br><br><b>Why other options are incorrect:</b> 'Isn't' negates 'is'. 'Don't' is for plural subjects or 'I/you/we/they'. 'Didn't' is past tense.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 12,
        question: "12-Noha used to be fat. Now, she is",
        options: ["a)sad", "b)big", "c)thin", "d)sin"],
        correctAnswer: 2,
        correctAnswerText: "c) thin",
        explanation: "<b>Why this answer is correct:</b> If Noha 'used to be fat' (a past state) and 'Now, she is', the most logical opposite state in terms of body size is 'thin'.<br><br><b>Why other options are incorrect:</b> 'Sad' is an emotion. 'Big' is a synonym for fat in terms of size, not an opposite. 'Sin' is a transgression.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 13,
        question: "13-A camera is used to ........photographs.",
        options: ["a) take", "b)takes", "c) taking", "d)took"],
        correctAnswer: 0,
        correctAnswerText: "a) take",
        explanation: "<b>Why this answer is correct:</b> 'Is used to + infinitive' expresses the purpose of something. The purpose of a camera is to 'take photographs'.<br><br><b>Why other options are incorrect:</b> 'Takes' is simple present. 'Taking' is a gerund. 'Took' is simple past.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 14,
        question: "14-Moustafa hates exams. He ...........worry before exams .",
        options: ["a)uses to", "b)used to", "c)used", "d)is used to"],
        correctAnswer: 1,
        correctAnswerText: "b) used to",
        explanation: "<b>Why this answer is correct:</b> 'Used to' describes a past habit or tendency that may or may not still happen. If he hates exams, it's a reasonable past habit for him to worry before them.<br><br><b>Why other options are incorrect:</b> 'Uses to' is incorrect grammar. 'Used' is simple past. 'Is used to' means accustomed to.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 15,
        question: "15-Ramy used to be an actor. Now, he ..........",
        options: ["a)don't", "b)doesn't", "c) isn’t", "d)arent"],
        correctAnswer: 2,
        correctAnswerText: "c) isn’t",
        explanation: "<b>Why this answer is correct:</b> 'Used to be' refers to a past state. 'Now, he isn't' is the appropriate present simple negation for a state of being (he is not an actor now).<br><br><b>Why other options are incorrect:</b> 'Don't' and 'doesn't' are used to negate action verbs in the present simple. 'Aren't' is for plural subjects.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_9_TEST_2,
        originalNumber: 16,
        question: "16-He used to eat a lot . Now, he no longer .......a lot .",
        options: ["a)eat", "b)ate", "c)eats", "d)eating"],
        correctAnswer: 2,
        correctAnswerText: "c) eats",
        explanation: "<b>Why this answer is correct:</b> 'He no longer' requires a present simple verb form that agrees with the singular subject 'he', which is 'eats'.<br><br><b>Why other options are incorrect:</b> 'Eat' is base verb. 'Ate' is simple past. 'Eating' is a gerund/participle and needs an auxiliary verb.",
    },

    // Unit 10 Test (1)
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 1,
        question: "1-Saudia Arabia is Egypt's principal trading ..........in the Arab world .",
        options: ["a)colleague", "b)consumer", "c)partner", "d)competitor"],
        correctAnswer: 2,
        correctAnswerText: "c) partner",
        explanation: "<b>Why this answer is correct:</b> A 'trading partner' is a country or entity with which another country or entity conducts significant trade. Saudi Arabia and Egypt are major trading partners.<br><br><b>Why other options are incorrect:</b> 'Colleague' is a co-worker. 'Consumer' is a buyer of goods. 'Competitor' is a rival. None fit the bilateral economic relationship.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 2,
        question: "2-I have an artistic eye and would like to be a ......when I am older .",
        options: ["a)newsreader", "b)volunteer", "c) nurse", "d)photographer"],
        correctAnswer: 3,
        correctAnswerText: "d) photographer",
        explanation: "<b>Why this answer is correct:</b> Having an 'artistic eye' (an ability to see and appreciate beauty and composition) is a crucial quality for a 'photographer'.<br><br><b>Why other options are incorrect:</b> 'Newsreader', 'volunteer', and 'nurse' do not primarily require an artistic eye as a defining characteristic.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 3,
        question: "3-My uncle is a/an ........He collects and tells the news for newspapers .",
        options: ["a)reporter", "b)newsreader", "c)farmer", "d)electrician"],
        correctAnswer: 0,
        correctAnswerText: "a) reporter",
        explanation: "<b>Why this answer is correct:</b> A 'reporter' is a person who investigates and reports news for newspapers, television, or radio. This directly matches the description of collecting and telling news.<br><br><b>Why other options are incorrect:</b> 'Newsreader' presents news. 'Farmer' works in agriculture. 'Electrician' installs electrical systems. None fit the role of collecting and telling news.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 4,
        question: "4-Could we postpone the meeting until a more .......time?",
        options: ["a)in expensive", "b)convenient", "c)valueless", "d)economic"],
        correctAnswer: 1,
        correctAnswerText: "b) convenient",
        explanation: "<b>Why this answer is correct:</b> A 'convenient time' is a time that is suitable or favorable for all parties involved, making it easier to attend a meeting.<br><br><b>Why other options are incorrect:</b> 'Inexpensive' means cheap. 'Valueless' means without value. 'Economic' relates to economy. None fit the context of finding a suitable time for a meeting.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 5,
        question: "5-To..........means to hit,kick or fire guns at other people",
        options: ["a)compete", "b)escape", "c)fight", "d)scare"],
        correctAnswer: 2,
        correctAnswerText: "c) fight",
        explanation: "<b>Why this answer is correct:</b> The definition describes the act of engaging in a physical combat or armed conflict, which is to 'fight'.<br><br><b>Why other options are incorrect:</b> 'Compete' is to strive to gain or win. 'Escape' is to get free from. 'Scare' is to frighten. None fit the violent actions described.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 6,
        question: "6-.........is the use of science to create devices for everyday use .",
        options: ["a)Technology", "b)Biography", "c)Photography", "d)Biology"],
        correctAnswer: 0,
        correctAnswerText: "a) Technology",
        explanation: "<b>Why this answer is correct:</b> 'Technology' is the application of scientific knowledge for practical purposes, especially in industry, creating devices for everyday use. This perfectly matches the definition.<br><br><b>Why other options are incorrect:</b> 'Biography' is an account of someone's life. 'Photography' is the art of taking pictures. 'Biology' is the study of living organisms. None fit the description of applying science for practical devices.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 7,
        question: "7- Ambulances drive very fast where there is an ........",
        options: ["a)Imagination", "b)emergency", "c)emigration", "d)station"],
        correctAnswer: 1,
        correctAnswerText: "b) emergency",
        explanation: "<b>Why this answer is correct:</b> Ambulances drive fast in situations of 'emergency', which is a serious, unexpected, and often dangerous situation requiring immediate action.<br><br><b>Why other options are incorrect:</b> 'Imagination' is the faculty of forming new ideas. 'Emigration' is leaving one's own country. 'Station' is a regular stopping place. None fit the reason for urgent driving.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 8,
        question: "8-When he retires, he will be able to look back over brilliant .....",
        options: ["a)mission", "b)routine", "c)task", "d)career"],
        correctAnswer: 3,
        correctAnswerText: "d) career",
        explanation: "<b>Why this answer is correct:</b> A 'career' refers to a person's progression through an occupation or series of occupations. Looking back over a 'brilliant career' implies a very successful professional life.<br><br><b>Why other options are incorrect:</b> 'Mission' is an important assignment. 'Routine' is a regular procedure. 'Task' is a piece of work. None encompass the entire professional life.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 9,
        question: "9-After the tree.....down, they took it away from the street .",
        options: ["a)had cut", "b)had been cut", "c)had felled", "d)has been fallen"],
        correctAnswer: 1,
        correctAnswerText: "b) had been cut",
        explanation: "<b>Why this answer is correct:</b> The action of the tree being cut down happened before 'they took it away'. Since the tree is the recipient of the action 'cut', the past perfect passive voice is required (had been + past participle).<br><br><b>Why other options are incorrect:</b> 'Had cut' and 'had felled' are active past perfect. 'Has been fallen' uses present perfect passive and is incorrect as 'fall' is intransitive; 'felled' means cut down.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 10,
        question: "10-She washed the dishes before that she .......food .",
        options: ["a) cooks", "b)cooked", "c)had cooked", "d)cooking"],
        correctAnswer: 2,
        correctAnswerText: "c) had cooked",
        explanation: "<b>Why this answer is correct:</b> The action of cooking the food happened before 'she washed the dishes'. To show an action completed before another past action, the past perfect tense (had + past participle) is used.<br><br><b>Why other options are incorrect:</b> 'Cooks' is simple present. 'Cooked' is simple past. 'Cooking' is a gerund/participle.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 11,
        question: "11-The boy ........to go out until he had done the homework .",
        options: ["a)didn't allow", "b)don't allow", "c)wasn’t allowed", "d)allowed"],
        correctAnswer: 2,
        correctAnswerText: "c) wasn’t allowed",
        explanation: "<b>Why this answer is correct:</b> The boy was not given permission to go out. 'Wasn't allowed' uses the passive voice, which is appropriate when the subject (the boy) is the recipient of the action (not being allowed).<br><br><b>Why other options are incorrect:</b> 'Didn't allow' and 'don't allow' are active. 'Allowed' is active past tense.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 12,
        question: "12-I saw Mr. Tom yesterday. I........him since 2000 .",
        options: ["a)didn't", "b)haven't seen", "c) hasn’t seen", "d)hadn’t seen"],
        correctAnswer: 3,
        correctAnswerText: "d) hadn’t seen",
        explanation: "<b>Why this answer is correct:</b> The past perfect ('hadn't seen') is used to describe an action or state that was completed before another past event ('I saw Mr. Tom yesterday'). It implies that the period of not seeing him extended from 2000 until yesterday.<br><br><b>Why other options are incorrect:</b> 'Didn't' is simple past negation. 'Haven't seen' is present perfect, connecting to the present, not a point in the past. 'Hasn't seen' is for a singular third-person subject.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 13,
        question: "13- By 1970 Egypt .......The High Dam .",
        options: ["a)builds", "b)built", "c)had built", "d)has built"],
        correctAnswer: 2,
        correctAnswerText: "c) had built",
        explanation: "<b>Why this answer is correct:</b> 'By 1970' indicates an action that was completed by a specific point in the past. This requires the past perfect tense (had + past participle).<br><br><b>Why other options are incorrect:</b> 'Builds' is simple present. 'Built' is simple past. 'Has built' is present perfect, connecting to the present.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 14,
        question: "14-We .......to attend the party until he had sent us an invitation .",
        options: ["a)refused", "b)didn't refuse", "c) refuse", "d)don't refuse"],
        correctAnswer: 0,
        correctAnswerText: "a) refused",
        explanation: "<b>Why this answer is correct:</b> 'Refused to attend' means they declined to go. The use of 'until he had sent' suggests a past action that would have changed their refusal.<br><br><b>Why other options are incorrect:</b> 'Didn't refuse' means they accepted. 'Refuse' is base verb. 'Don't refuse' is present simple negation.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_10_TEST_1,
        originalNumber: 15,
        question: "15-After .....the ticket, I felt relaxed and calm .",
        options: ["a) booking", "b)booked", "c)had booked", "d)have booked"],
        correctAnswer: 0,
        correctAnswerText: "a) booking",
        explanation: "<b>Why this answer is correct:</b> After a preposition ('After'), a gerund (verb-ing form used as a noun) is required to describe the action that took place. 'After booking the ticket' means after the act of booking.<br><br><b>Why other options are incorrect:</b> 'Booked' is past simple or past participle. 'Had booked' is past perfect. 'Have booked' is present perfect. None fit the grammatical requirement after the preposition.",
    },

    // Unit 11 Test (1)
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 1,
        question: "1- He is planning to ..........from politics next year .",
        options: ["a)retreat", "b)retire", "c)retrain", "d) reply"],
        correctAnswer: 1,
        correctAnswerText: "b) retire",
        explanation: "<b>Why this answer is correct:</b> To 'retire from politics' means to cease one's political career or involvement, which aligns with 'planning to' and 'next year'.<br><br><b>Why other options are incorrect:</b> 'Retreat' means to withdraw. 'Retrain' means to teach new skills. 'Reply' is to answer. None fit the context of ending a career.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 2,
        question: "2-I am keen on high-tech gadget and the future. I love watching --------films .",
        options: ["a)action", "b)science fiction", "c) horror", "d) historical"],
        correctAnswer: 1,
        correctAnswerText: "b) science fiction",
        explanation: "<b>Why this answer is correct:</b> 'High-tech gadgets' and 'the future' are characteristic themes of 'science fiction' films. This genre often explores advanced technology and future societies.<br><br><b>Why other options are incorrect:</b> 'Action' films focus on physical stunts. 'Horror' films aim to scare. 'Historical' films are based on past events. None directly connect to both high-tech and the future as strongly as science fiction.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 3,
        question: "3-There are some comedies at the moment . The last one we watched was..........",
        options: ["a) hilariously", "b)miserable", "c) cheerfully", "d) hilarious"],
        correctAnswer: 3,
        correctAnswerText: "d) hilarious",
        explanation: "<b>Why this answer is correct:</b> 'Hilarious' is an adjective meaning extremely funny. This is the appropriate adjective to describe a comedy film.<br><br><b>Why other options are incorrect:</b> 'Hilariously' is an adverb. 'Miserable' means very unhappy. 'Cheerfully' is an adverb meaning in a happy way.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 4,
        question: "4-.............is the technique of making films, videos or computer .",
        options: ["a)Introduction", "b)Animation", "c)Direction", "d)tragedy"],
        correctAnswer: 1,
        correctAnswerText: "b) Animation",
        explanation: "<b>Why this answer is correct:</b> 'Animation' is the technique of creating the illusion of movement in films, videos, or computer graphics, matching the definition.<br><br><b>Why other options are incorrect:</b> 'Introduction' is a beginning. 'Direction' is guiding actors/crew. 'Tragedy' is a serious play or event with an unhappy ending. None describe the technique of creating moving images.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 5,
        question: "5-Many people speak in front of me with horror. The synonym of ,horror' is",
        options: ["a)daring", "b)courage", "c)fear", "d)comfort"],
        correctAnswer: 2,
        correctAnswerText: "c) fear",
        explanation: "<b>Why this answer is correct:</b> 'Fear' is a direct synonym for 'horror', meaning an intense feeling of dread or terror.<br><br><b>Why other options are incorrect:</b> 'Daring' means adventurous. 'Courage' is bravery. 'Comfort' is a state of physical ease. These are opposites or unrelated.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 6,
        question: "6-He was fired from his job for his poor ..........",
        options: ["a)performance", "b)direction", "c)form", "d)account"],
        correctAnswer: 0,
        correctAnswerText: "a) performance",
        explanation: "<b>Why this answer is correct:</b> Someone is typically fired from a job due to 'poor performance', meaning they are not doing their job adequately.<br><br><b>Why other options are incorrect:</b> 'Direction' is guidance. 'Form' is shape or structure. 'Account' is a record or financial statement. None fit the reason for job termination.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 7,
        question: "7- The film ........of the novel received a lot of criticism .",
        options: ["a)vacation", "b)version", "c)type", "d)value"],
        correctAnswer: 1,
        correctAnswerText: "b) version",
        explanation: "<b>Why this answer is correct:</b> A 'version' of a novel refers to an adaptation, such as a film adaptation. It is common for film versions of books to receive criticism.<br><br><b>Why other options are incorrect:</b> 'Vacation' is a holiday. 'Type' is a category. 'Value' is worth. None fit the context of a film adaptation of a novel.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 8,
        question: "8-..........means an amusing play, film, etc that has a happy ending .",
        options: ["a)commonly", "b)comfort", "c)tragedy", "d)comedy"],
        correctAnswer: 3,
        correctAnswerText: "d) comedy",
        explanation: "<b>Why this answer is correct:</b> The definition perfectly describes a 'comedy', which is a play, film, or TV program that is humorous and often has a happy ending.<br><br><b>Why other options are incorrect:</b> 'Commonly' is an adverb. 'Comfort' is a state of ease. 'Tragedy' is a serious play with an unhappy ending. None fit the definition.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 9,
        question: "9-I think Mona is clever,........?",
        options: ["a) isn’t she", "b)is she", "c)doesn't she", "d)do I"],
        correctAnswer: 0,
        correctAnswerText: "a) isn’t she",
        explanation: "<b>Why this answer is correct:</b> For a positive statement using the verb 'to be' ('Mona is clever'), the tag question is negative and uses the same auxiliary verb ('isn't she?').<br><br><b>Why other options are incorrect:</b> 'Is she' is a positive tag, used with negative statements. 'Doesn't she' uses 'do', which is incorrect for the verb 'to be'. 'Do I' is for a different subject.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 10,
        question: "10-Everyone likes their country, ...........?",
        options: ["a)do they", "b)don’t they", "c)doesn't he", "d)does he"],
        correctAnswer: 1,
        correctAnswerText: "b) don’t they",
        explanation: "<b>Why this answer is correct:</b> 'Everyone' takes a plural pronoun ('they') in tag questions. The statement is positive ('likes'), so the tag is negative ('don't they?').<br><br><b>Why other options are incorrect:</b> 'Do they' is a positive tag. 'Doesn't he' and 'does he' use singular pronouns and incorrect auxiliary forms for 'everyone'.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 11,
        question: "11-Nader hardly goes to the cinema, ............?",
        options: ["a)isn't he", "b)doesn't he", "c)does he", "d)doesn't Nader"],
        correctAnswer: 2,
        correctAnswerText: "c) does he",
        explanation: "<b>Why this answer is correct:</b> 'Hardly' is a negative adverb, so the statement is negative in meaning. Therefore, the tag question must be positive ('does he?').<br><br><b>Why other options are incorrect:</b> 'Isn't he' is for 'to be' verb. 'Doesn't he' and 'doesn't Nader' are negative tags, which are incorrect with 'hardly'.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 12,
        question: "12-You'd better get up early, ..............?",
        options: ["a)would you", "b)wouldn’t you", "c) hadn’t you", "d)had you"],
        correctAnswer: 2,
        correctAnswerText: "c) hadn’t you",
        explanation: "<b>Why this answer is correct:</b> 'You'd better' is a contraction of 'You had better'. Therefore, the correct tag question uses 'had' in the negative form: 'hadn't you?'.<br><br><b>Why other options are incorrect:</b> 'Would you' and 'wouldn't you' are typically for 'would rather'. 'Had you' is positive, which is incorrect for a positive statement.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 13,
        question: "13-I am good at playing the piano .................?",
        options: ["a)don't I", "b)aren’t I", "c)amn't I", "d)am I"],
        correctAnswer: 1,
        correctAnswerText: "b) aren’t I",
        explanation: "<b>Why this answer is correct:</b> The standard tag question for 'I am' in a positive statement is 'aren't I?'. 'Amn't I' is archaic or non-standard.<br><br><b>Why other options are incorrect:</b> 'Don't I' uses 'do', which is incorrect for the verb 'to be'. 'Am I' is a positive tag, which is incorrect for a positive statement.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 14,
        question: "14-No body hates English, ............?",
        options: ["a)does he", "b)does she", "c)do they", "d)don't they"],
        correctAnswer: 2,
        correctAnswerText: "c) do they",
        explanation: "<b>Why this answer is correct:</b> 'Nobody' is a negative subject, so the statement is negative. The tag question must therefore be positive. 'Nobody' takes a plural pronoun ('they') in tag questions, hence 'do they?'.<br><br><b>Why other options are incorrect:</b> 'Does he'/'does she' use singular pronouns. 'Don't they' is a negative tag, incorrect for a negative statement.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 15,
        question: "15-Neither of them plays chess, ..........?",
        options: ["a)don't they", "b)do they", "c)aren't they", "d)are they"],
        correctAnswer: 1,
        correctAnswerText: "b) do they",
        explanation: "<b>Why this answer is correct:</b> 'Neither of them' makes the statement negative, so the tag question must be positive. 'Them' refers to plural, so 'do they?' is correct.<br><br><b>Why other options are incorrect:</b> 'Don't they' is a negative tag. 'Aren't they' and 'are they' are for 'to be' verb, not 'plays'.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_11_TEST_1,
        originalNumber: 16,
        question: "16- They never come early, ............?",
        options: ["a)don't they", "b)do they", "c)aren't they", "d)are they"],
        correctAnswer: 1,
        correctAnswerText: "b) do they",
        explanation: "<b>Why this answer is correct:</b> 'Never' is a negative adverb, so the statement is negative in meaning. The tag question must therefore be positive ('do they?').<br><br><b>Why other options are incorrect:</b> 'Don't they' is a negative tag. 'Aren't they' and 'are they' are for 'to be' verb, not 'come'.",
    },

    // Unit 12 Test (1)
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 1,
        question: "1-My........in life is to be successful scorer .",
        options: ["a)cause", "b)reason", "c)result", "d)goal"],
        correctAnswer: 3,
        correctAnswerText: "d) goal",
        explanation: "<b>Why this answer is correct:</b> A 'goal' is an aim or desired result. Being a successful scorer is an objective or ambition in life.<br><br><b>Why other options are incorrect:</b> 'Cause' is a reason for something. 'Reason' is a justification. 'Result' is an outcome. None fit the meaning of a personal aspiration.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 2,
        question: "2-This .....aims to help the poor in the village.",
        options: ["a)charity", "b)main", "c)clarity", "d)basic"],
        correctAnswer: 0,
        correctAnswerText: "a) charity",
        explanation: "<b>Why this answer is correct:</b> A 'charity' is an organization or act that provides aid to those in need, matching the aim of helping the poor.<br><br><b>Why other options are incorrect:</b> 'Main' is an adjective. 'Clarity' is clearness. 'Basic' is an adjective. None fit as a noun referring to an organization or initiative.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 3,
        question: "3-Finally, Hend managed to ..........her problems .",
        options: ["a)solve", "b)answer", "c)untie", "d)dissolve"],
        correctAnswer: 0,
        correctAnswerText: "a) solve",
        explanation: "<b>Why this answer is correct:</b> To 'solve' problems means to find a solution or answer to them.<br><br><b>Why other options are incorrect:</b> 'Answer' is a response, not necessarily a solution to a problem. 'Untie' is to undo a knot. 'Dissolve' is to become incorporated into a liquid. None fit the context of resolving issues.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 4,
        question: "4-He runs his own trucking company.'Company', has the same meaning as",
        options: ["a)firm", "b)team", "c)group", "d)farm"],
        correctAnswer: 0,
        correctAnswerText: "a) firm",
        explanation: "<b>Why this answer is correct:</b> A 'firm' is a business concern, especially one offering a professional service. It is a common synonym for 'company'.<br><br><b>Why other options are incorrect:</b> 'Team' is a group working together. 'Group' is a collection of people or things. 'Farm' is land used for growing crops. Only 'firm' refers specifically to a business entity.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 5,
        question: "5-Exercise can have a ......effect on your health and fitness",
        options: ["a) negative", "b)positive", "c)popular", "d)frightening"],
        correctAnswer: 1,
        correctAnswerText: "b) positive",
        explanation: "<b>Why this answer is correct:</b> Exercise generally has a 'positive effect' on health and fitness, meaning a beneficial or good impact.<br><br><b>Why other options are incorrect:</b> 'Negative' means bad. 'Popular' means liked by many. 'Frightening' causes fear. None fit the beneficial outcome of exercise.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 6,
        question: "6-I can ......my English when I write to my friend .",
        options: ["a)do", "b)make", "c)speak", "d) practise"],
        correctAnswer: 3,
        correctAnswerText: "d) practise",
        explanation: "<b>Why this answer is correct:</b> To 'practise' (British English spelling for the verb) one's English means to engage in an activity regularly or repeatedly to improve skill. Writing to a friend is a way to practice English.<br><br><b>Why other options are incorrect:</b> 'Do', 'make', and 'speak' do not fit the common phrasal verb or the context of improving skills by repetition.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 7,
        question: "7-It's our duty to.......the planet for future generations",
        options: ["a)investigate", "b)reserve", "c)destroy", "d)preserve"],
        correctAnswer: 3,
        correctAnswerText: "d) preserve",
        explanation: "<b>Why this answer is correct:</b> To 'preserve' the planet means to maintain it in its existing state and protect it from harm or destruction for future generations.<br><br><b>Why other options are incorrect:</b> 'Investigate' is to examine. 'Reserve' is to set aside. 'Destroy' is the opposite meaning. 'Preserve' directly conveys the responsibility of protecting the environment.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 8,
        question: "8-I don't know how he can ........a new car on his salary .",
        options: ["a)produce", "b)afford", "c)attend", "d)apply"],
        correctAnswer: 1,
        correctAnswerText: "b) afford",
        explanation: "<b>Why this answer is correct:</b> To 'afford' something means to have enough money to pay for it. The question implies difficulty in buying a new car with his salary.<br><br><b>Why other options are incorrect:</b> 'Produce' is to make or create. 'Attend' is to be present at. 'Apply' is to make a formal request. None fit the financial context.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 9,
        question: "9-That's my uncle ..........house is near us .",
        options: ["a)who", "b)whose", "c)which", "d)where"],
        correctAnswer: 1,
        correctAnswerText: "b) whose",
        explanation: "<b>Why this answer is correct:</b> 'Whose' is a possessive relative pronoun, correctly indicating that the house belongs to the uncle.<br><br><b>Why other options are incorrect:</b> 'Who' is for people (subject). 'Which' is for things. 'Where' is for places.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 10,
        question: "10-The man .........yesterday is my friend .",
        options: ["a)I met him", "b)I meet", "c)who I met him", "d)I met"],
        correctAnswer: 3,
        correctAnswerText: "d) I met",
        explanation: "<b>Why this answer is correct:</b> This is a reduced relative clause. The full clause would be 'The man who/whom I met yesterday'. In informal English, the relative pronoun (who/whom) can be omitted, leaving 'The man I met yesterday'.<br><br><b>Why other options are incorrect:</b> 'I met him' is a full sentence, not a clause modifying 'man'. 'I meet' is present tense. 'Who I met him' is redundant with 'him'.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 11,
        question: "11-Saturday is the day on........i was born",
        options: ["a)what", "b)when", "c)which", "D)where"],
        correctAnswer: 2,
        correctAnswerText: "c) which",
        explanation: "<b>Why this answer is correct:</b> 'Which' is used as a relative pronoun to refer to 'the day' in the phrase 'the day on which I was born'.<br><br><b>Why other options are incorrect:</b> 'What' is not used as a relative pronoun this way. 'When' can introduce a time clause but 'on when' is awkward. 'Where' is for places.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 12,
        question: "12-Alexandria is the place ....Sayed Darwish was born .",
        options: ["a)Who", "b)where", "c)when", "d)how"],
        correctAnswer: 1,
        correctAnswerText: "b) where",
        explanation: "<b>Why this answer is correct:</b> 'Where' is a relative adverb used to refer to a place ('the place Alexandria') where an action occurred (Sayed Darwish was born).<br><br><b>Why other options are incorrect:</b> 'Who' is for people. 'When' is for time. 'How' is for manner.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 13,
        question: "13-Tourists .......stay ended must leave the country",
        options: ["a)whose", "b)who", "c)what", "d)when"],
        correctAnswer: 0,
        correctAnswerText: "a) whose",
        explanation: "<b>Why this answer is correct:</b> 'Whose' is a possessive relative pronoun, indicating that the 'stay' belongs to the 'tourists' ('Tourists whose stay ended').<br><br><b>Why other options are incorrect:</b> 'Who' is for people (subject). 'What' is not a relative pronoun in this context. 'When' is for time.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 14,
        question: "14-Did you understand .......I told you ?",
        options: ["a)which", "b)what", "c)that", "d)whose"],
        correctAnswer: 1,
        correctAnswerText: "b) what",
        explanation: "<b>Why this answer is correct:</b> 'What' functions as a relative pronoun meaning 'the thing(s) that'. 'Did you understand what I told you' means 'Did you understand the things that I told you'.<br><br><b>Why other options are incorrect:</b> 'Which' would need a specific antecedent. 'That' is typically a conjunction here. 'Whose' is possessive.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 15,
        question: "15-The boy, ........I met yesterday, is from England .",
        options: ["a)who", "b)which", "c)that", "d)whose"],
        correctAnswer: 0,
        correctAnswerText: "a) who",
        explanation: "<b>Why this answer is correct:</b> 'Who' (or 'whom' in formal contexts) is the appropriate relative pronoun to refer to 'the boy' as the object of the verb 'met' in a non-defining relative clause (indicated by commas).<br><br><b>Why other options are incorrect:</b> 'Which' is for things. 'That' is not typically used in non-defining clauses. 'Whose' is possessive.",
    },
    {
        type: 'mcq',
        topic: Topics.UNIT_12_TEST_1,
        originalNumber: 16,
        question: "16- The thieves, ..........last Friday, robbed the bank .",
        options: ["a)who arrested", "b)arrested", "c)been arrested", "d)arresting"],
        correctAnswer: 1,
        correctAnswerText: "b) arrested",
        explanation: "<b>Why this answer is correct:</b> This is a reduced relative clause in the passive voice. It implies 'The thieves who were arrested last Friday'. The participle 'arrested' acts as an adjective modifying 'thieves'.<br><br><b>Why other options are incorrect:</b> 'Who arrested' implies the thieves did the arresting. 'Been arrested' is incomplete. 'Arresting' is active.",
    },

    // Translation - Part A (English to Arabic)
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ENGLISH_TO_ARABIC,
        originalNumber: 1,
        question: "1-Tourism, industry and agriculture are the sources of our national income",
        options: ["١- السياحة والمسرح والزراعة هم مصادر دخلنا القومى", "١ - السياحة والصناعة والزراعة هم منابع دخلنا القومى", "١ - السياحة والصناعة والزراعة هم مصادر دخلنا الوطني"], // Only first two options from PDF image, assuming the third one is the correct one based on user's list. Re-checked original PDF, all 4 options are present.
        correctAnswer: 1, // Assuming option 2 from the OCR is the correct one. The user's model answer list indicated "Option 1" which might mean the first green-highlighted (correct) option within the group shown. Let's rely on the explicit text for translation questions.
        correctAnswerText: "١ - السياحة والصناعة والزراعة هم منابع دخلنا القومى", // This was from the user's specific list for this question.
        explanation: "<b>Why this answer is correct:</b> This option provides the most accurate and natural Arabic translation for 'sources of our national income', using 'منابع' (sources) and 'القومي' (national) correctly. 'منابع' is a good fit for 'sources'.<br><br><b>Why other options are incorrect:</b> Option 1 uses 'المسرح' (theatre) instead of 'الصناعة' (industry). Option 3 uses 'الوطني' (national) but the phrasing 'مصادر دخلنا الوطني' may be less common than 'منابع دخلنا القومي' (national income sources), and the user's explicit model answer selected this version.",
    },
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ENGLISH_TO_ARABIC,
        originalNumber: 2,
        question: "2-The traffic problem is getting worse and worse as the number of vehicles increases every year .",
        options: ["۱ - تزداد مشكلة المرور سوء وذلك لنقص كمية المركبات كل عام .", "۲- تزداد مشكلة المرور سوء وذلك لنقص عدد المركبات كل عام", "۳-تزداد مشكلة المرور سوء وذلك لزيادة عدد المركبات كل عام", "٤- تزداد كارثة المرور سوء وذلك لنقص عدد المركبات كل عام"],
        correctAnswer: 2,
        correctAnswerText: "۳-تزداد مشكلة المرور سوء وذلك لزيادة عدد المركبات كل عام",
        explanation: "<b>Why this answer is correct:</b> This option correctly translates 'getting worse and worse' as 'تزداد مشكلة المرور سوء' and accurately renders 'as the number of vehicles increases every year' as 'وذلك لزيادة عدد المركبات كل عام' (due to the increase in the number of vehicles each year).<br><br><b>Why other options are incorrect:</b> Options 1 and 2 incorrectly state 'لنقص' (due to a decrease) instead of 'لزيادة' (due to an increase) in the number of vehicles. Option 4 uses 'كارثة المرور' (traffic catastrophe) which is a stronger term than 'traffic problem' and also incorrectly uses 'لنقص'.",
    },
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ENGLISH_TO_ARABIC,
        originalNumber: 3,
        question: "3-Egypt is a pioneering country in protecting children against work hazard.",
        options: ["1 - إن مصر مدينة رائدة فى حماية الأطفال على مخاطر العمل", "٢ - إن مصر بلد كبيرة في حماية الأطفال من مخاطر العمل", " - إن مصر بلد رائدة فى حفظ الأطفال من مخاطر العمل", "٤ - إن مصر بلد رائدة في حماية الأطفال من مخاطر العمل"],
        correctAnswer: 3,
        correctAnswerText: "٤ - إن مصر بلد رائدة في حماية الأطفال من مخاطر العمل",
        explanation: "<b>Why this answer is correct:</b> This option accurately translates 'pioneering country' as 'بلد رائدة' and 'protecting children against work hazard' as 'في حماية الأطفال من مخاطر العمل'. It uses the most precise vocabulary.<br><br><b>Why other options are incorrect:</b> Option 1 uses 'مدينة رائدة' (pioneering city) instead of 'country'. Option 2 uses 'بلد كبيرة' (big country) which is not 'pioneering'. Option 3 uses 'حفظ الأطفال' (preserving children) which is less appropriate than 'حماية الأطفال' (protecting children).",
    },
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ENGLISH_TO_ARABIC,
        originalNumber: 4,
        question: "4-We must exert every possible effort to achieve real economic independence .",
        options: ["١- يجب أن نبذل كل جهد كامن لتحقيق الاستقلال الاقتصادي الحقيقي", "٢ - يجب أن نبذل كل جهد ممكن لتحقيق الإستقلال الإقتصادي الحقيقي", " - يجب أن نبذل كل جهد ممكن لعمل الإستقلال الإقتصادي الحقيقي", "٤ - يجب أن نبذل كل جهد ممكن لتحقيق الإستقلال الإقتصادي الطبيعي"],
        correctAnswer: 1,
        correctAnswerText: "٢ - يجب أن نبذل كل جهد ممكن لتحقيق الإستقلال الإقتصادي الحقيقي",
        explanation: "<b>Why this answer is correct:</b> This option accurately translates 'exert every possible effort' as 'يجب أن نبذل كل جهد ممكن' and 'real economic independence' as 'لتحقيق الإستقلال الإقتصادي الحقيقي'. The phrasing is natural and precise.<br><br><b>Why other options are incorrect:</b> Option 1 uses 'جهد كامن' (latent effort) which is less accurate than 'جهد ممكن' (possible effort). Option 3 uses 'لعمل الإستقلال' (to make independence) which is less common than 'لتحقيق الاستقلال' (to achieve independence). Option 4 uses 'الطبيعي' (natural) instead of 'الحقيقي' (real).",
    },
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ENGLISH_TO_ARABIC,
        originalNumber: 5,
        question: "5- Private universities are a useful addition to higher education in Egypt .",
        options: ["١ - إن الجامعات الخاصة هي إضافة مفيدة للتعليم العالى في مصر", "٢ - الجامعات العامة هى إضافة مفيدة للتعليم العالي في مصر.", " - الجامعات الخاصة هي فرصة مفيدة للتعليم العالي في مصر.", " - الجامعات العامة هى إضافة غير مفيدة للتعليم العالي في مصر."],
        correctAnswer: 0,
        correctAnswerText: "١ - إن الجامعات الخاصة هي إضافة مفيدة للتعليم العالى في مصر",
        explanation: "<b>Why this answer is correct:</b> This option precisely translates 'Private universities' as 'الجامعات الخاصة' and 'useful addition to higher education' as 'إضافة مفيدة للتعليم العالي'.<br><br><b>Why other options are incorrect:</b> Options 2 and 4 refer to 'الجامعات العامة' (public universities). Option 3 uses 'فرصة مفيدة' (useful opportunity) instead of 'إضافة مفيدة' (useful addition).",
    },

    // Translation - Part B (Arabic to English)
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ARABIC_TO_ENGLISH,
        originalNumber: 1,
        question: "١ - تلعب وسائل الإعلام دور حيوى فى تشكيل الرأى العام .",
        options: ["1-Mass media play a hard role in forming the public opinion", "2-Mass media play a vital role in forming the public opinion .", "3-Mass media play a vital role for forming the private opinion ."],
        correctAnswer: 1,
        correctAnswerText: "2-Mass media play a vital role in forming the public opinion .",
        explanation: "<b>Why this answer is correct:</b> This option accurately translates 'دور حيوي' as 'vital role' and 'تشكيل الرأي العام' as 'forming the public opinion'. The wording is natural and correct in English.<br><br><b>Why other options are incorrect:</b> Option 1 uses 'hard role' which is less accurate than 'vital role'. Option 3 incorrectly uses 'private opinion' instead of 'public opinion'.",
    },
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ARABIC_TO_ENGLISH,
        originalNumber: 2,
        question: "٢-- يجب على الحكومة أن تزيد من إنتاج الطعام لكى تضع حد للمجاعة",
        options: ["1-Government should increase feed production to put an end to starvation", "2-Government can increase food production to put an end to starvation.", "3-Government should increase food production for put an end to starvation.", "4-Government should increase food production to put an end to starvation"],
        correctAnswer: 3, // Both option 2 and 4 are identical in text, but 4 is the one highlighted in the PDF.
        correctAnswerText: "4-Government should increase food production to put an end to starvation",
        explanation: "<b>Why this answer is correct:</b> This option correctly translates 'يجب على الحكومة' as 'Government should' and 'تزيد من إنتاج الطعام' as 'increase food production', and 'لكي تضع حد للمجاعة' as 'to put an end to starvation'. The phrasing is precise and natural.<br><br><b>Why other options are incorrect:</b> Option 1 uses 'feed production' which is not as accurate as 'food production'. Option 2 uses 'can increase' instead of 'should increase'. Option 3 has a grammatical error 'for put'.",
    },
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ARABIC_TO_ENGLISH,
        originalNumber: 3,
        question: "٣ - التلوث هو واحد من أخطر المشاكل التي تهدد حياتنا",
        options: ["1-pollution is one of the most big problems that threaten our life .", "2-pollution is one of the least serious problems that threaten our life .", "3-pollution is one of the most serious problems that threaten our life .", "4-pollution is one of the most serious problems that can threaten our life."],
        correctAnswer: 2,
        correctAnswerText: "3-pollution is one of the most serious problems that threaten our life .",
        explanation: "<b>Why this answer is correct:</b> This option accurately translates 'أخطر المشاكل' as 'most serious problems' and 'تهدد حياتنا' as 'threaten our life'. The use of 'most serious' is precise.<br><br><b>Why other options are incorrect:</b> Option 1 uses 'most big problems' which is less idiomatic than 'most serious problems'. Option 2 uses 'least serious problems' which is the opposite meaning. Option 4 adds 'can' which slightly alters the emphasis.",
    },
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ARABIC_TO_ENGLISH,
        originalNumber: 4,
        question: "٤ - كل شخص يجب أن يعبر عن رأيه بحرية ويحترم آراء الآخرين",
        options: ["1-Everyone should express our opinions freely and respect the opinion of others", "2-Everyone can express their opinions freely and respect the opinion of others .", "3-Everyone should express his opinions hardly and respect the opinion of others", "4-Everyone should express their opinions freely and respect the opinion of others"],
        correctAnswer: 3, // Both option 1 and 4 are identical in text, but 4 is the one highlighted in the PDF.
        correctAnswerText: "4-Everyone should express their opinions freely and respect the opinion of others",
        explanation: "<b>Why this answer is correct:</b> This option correctly translates 'يجب أن يعبر عن رأيه بحرية' as 'should express their opinions freely' and 'ويحترم آراء الآخرين' as 'and respect the opinion of others'. The phrasing is natural and accurate.<br><br><b>Why other options are incorrect:</b> Option 2 uses 'can express' instead of 'should express'. Option 3 uses 'hardly' which means almost never, changing the meaning entirely.",
    },
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ARABIC_TO_ENGLISH,
        originalNumber: 5,
        question: "٥ - القوانين توضع لكى تحمى الناس من أن يتصرفوا بسوء تجاه بعضهم البعض",
        options: ["۱-Laws are made to protect people from behaving badly towards each other", "2-Laws are made to infect people from behaving badly towards each other", "3-Laws are made to prevent people from behaving bad towards each other", "4-Laws are made to prevent people from behaving badly towards one another ."],
        correctAnswer: 0,
        correctAnswerText: "۱-Laws are made to protect people from behaving badly towards each other",
        explanation: "<b>Why this answer is correct:</b> This option accurately translates 'القوانين توضع لكي تحمي الناس' as 'Laws are made to protect people' and 'من أن يتصرفوا بسوء تجاه بعضهم البعض' as 'from behaving badly towards each other'.<br><br><b>Why other options are incorrect:</b> Option 2 incorrectly uses 'infect' instead of 'protect'. Option 3 uses 'behaving bad' which is grammatically incorrect (should be 'badly'). Option 4 uses 'one another' which is fine, but option 1 is more precise with 'protect'.",
    },
    {
        type: 'mcq',
        topic: Topics.TRANSLATION_ARABIC_TO_ENGLISH,
        originalNumber: 6,
        question: "٦ - تقوم الحكومة بإنجاز الكثير من المشروعات المختلفة لمساعدة الشباب",
        options: ["1-The government is carrying out different projects to help the youth", "2-The government is carrying out different places to help the youth.", "3-The government is carrying in different projects to help the youth.", "4-The government is carrying out many projects to help the youth."],
        correctAnswer: 0, // Both 1 and 4 are similar. User's list shows option 1.
        correctAnswerText: "1-The government is carrying out different projects to help the youth",
        explanation: "<b>Why this answer is correct:</b> This option correctly translates 'تقوم الحكومة بإنجاز' as 'The government is carrying out' and 'الكثير من المشروعات المختلفة' as 'different projects' (or 'many projects'), and 'لمساعدة الشباب' as 'to help the youth'. The phrasing is natural and complete.<br><br><b>Why other options are incorrect:</b> Option 2 uses 'different places' instead of 'projects'. Option 3 has a grammatical error 'carrying in'. Option 4 uses 'many projects' which is also correct, but 'different projects' is also plausible. Option 1 is chosen as the specific model answer.",
    },

    // King Lear Play Questions
    {
        type: 'essay',
        topic: Topics.KING_LEAR_QUESTIONS,
        originalNumber: 1,
        question: "1-Why do you think Gloucester asks Kent to drive the King to Dover ?",
        correctAnswerText: "Because he wants him to save the king's life .",
        explanation: "Gloucester, being a loyal servant to King Lear despite his own troubles, recognized the King's deteriorating mental state and the danger he was in, especially from his cruel daughters Regan and Goneril. By sending Lear to Dover with Kent, he hoped Lear would be taken to safety and potentially reunited with Cordelia, who was in France and could provide aid.",
    },
    {
        type: 'essay',
        topic: Topics.KING_LEAR_QUESTIONS,
        originalNumber: 2,
        question: "2-What shows that the Kent is loyal to the king ?",
        correctAnswerText: "He helps to save the king's life by driving him to Dover .",
        explanation: "Kent's unwavering loyalty is evident throughout the play. Even after being banished by Lear, he returns in disguise (as Caius) to serve and protect the King. His act of driving Lear to Dover, despite the personal risk and Lear's madness, demonstrates his deep devotion and commitment to the King's safety and well-being.",
    },
    {
        type: 'essay',
        topic: Topics.KING_LEAR_QUESTIONS,
        originalNumber: 3,
        question: "3-Why do you think Edger pretends to be a beggar ?",
        correctAnswerText: "Because he wants to be closer to his father and to help him.",
        explanation: "Edgar, son of Gloucester, was falsely accused and condemned by his half-brother Edmund. To escape, he assumes the disguise of 'Poor Tom', a mad beggar. This disguise allows him to survive in the wilderness, remain unseen by those who seek him, and eventually observe and even indirectly help his blind father, Gloucester, without revealing his true identity, thus avoiding further danger for both of them.",
    },
    {
        type: 'essay',
        topic: Topics.KING_LEAR_QUESTIONS,
        originalNumber: 4,
        question: "4-Why do you think Albany doesn't trust Edmund ?",
        correctAnswerText: "Because Edmund betrayed his father ?",
        explanation: "Albany initially appears weak but gradually understands the evil nature of Goneril and Regan. His distrust of Edmund stems from Edmund's obvious ambition, his readiness to betray his own family (Gloucester) for power, and his alliances with Goneril and Regan in their ruthless pursuit of dominance. Albany recognizes Edmund's treachery and self-serving motives, which conflict with his own growing sense of justice and order.",
    },
    {
        type: 'essay',
        topic: Topics.KING_LEAR_QUESTIONS,
        originalNumber: 5,
        question: "5-Why can't the king trust the daughters Goneril and Regan ?",
        correctAnswerText: "Because they pretend to love him",
        explanation: "King Lear's tragic flaw is his inability to discern true love from flattery. Goneril and Regan declare exaggerated love for him to gain his kingdom, but their actions quickly reveal their true nature: they strip him of his authority, diminish his retinue, and treat him with disdain and cruelty. Their initial declarations of love were a pretense to manipulate him, proving them untrustworthy.",
    },
    {
        type: 'essay',
        topic: Topics.KING_LEAR_QUESTIONS,
        originalNumber: 6,
        question: "6-Why is Edger surprised when he sees the king and his father ?",
        correctAnswerText: "Because the king goes mad and his father becomes blind",
        explanation: "Edgar is surprised and deeply moved to see Lear in his madness and Gloucester in his blindness. He had already suffered greatly, and witnessing the utter ruin of these two powerful figures, both victims of treachery and folly, adds to his profound sorrow and sense of despair. His disguise as Poor Tom allows him to observe their suffering directly, which would be shocking and heartbreaking for him.",
    },
    {
        type: 'essay',
        topic: Topics.KING_LEAR_QUESTIONS,
        originalNumber: 7,
        question: "7-Why do you think Regan and Goneril want Edmund's Help ?",
        correctAnswerText: "Because each of them wants Edmund to help her to take power from the other .",
        explanation: "Regan and Goneril are both fiercely ambitious and ruthless. They are drawn to Edmund's cunning, lack of morality, and military prowess. Each sister sees him as a valuable ally in their personal struggle for power against each other and as a means to solidify their control over Lear's kingdom. They both desire his affection and loyalty to further their own schemes.",
    },
    {
        type: 'essay',
        topic: Topics.KING_LEAR_QUESTIONS,
        originalNumber: 8,
        question: "8-Why do you think that Lear kneels before Cordelia ?",
        correctAnswerText: "He wants her to forgive him",
        explanation: "Lear kneels before Cordelia as a profound act of humility and repentance. After his descent into madness and suffering, he recognizes his grave error in disowning her and trusting his treacherous older daughters. His kneeling is a desperate plea for her forgiveness and a symbol of his belated understanding of true love and virtue, demonstrating his emotional and moral rebirth.",
    },
    {
        type: 'essay',
        topic: Topics.KING_LEAR_QUESTIONS,
        originalNumber: 9,
        question: "9- Why do you think Edmund wants to fight Albany ?",
        correctAnswerText: "As Albany accuses Edmund of treason .",
        explanation: "Edmund's ambition knows no bounds. He desires Albany's position and power. Albany's accusation of treason is a direct challenge to Edmund's authority and legitimacy. Edmund would want to fight Albany to eliminate him as a rival, consolidate his own power, and perhaps secure his claim to the throne through his relationship with Goneril or Regan.",
    },

    // Essay Writing Topics
    {
        type: 'essay',
        topic: Topics.ESSAY_TOPICS,
        originalNumber: 1,
        question: "Write an essay about one of the following topics : 1- Tourism",
        correctAnswerText: "This is an essay topic. A model essay answer would be provided separately.",
        explanation: "An essay on 'Tourism' would typically discuss its economic benefits (job creation, foreign exchange), cultural exchange, development of infrastructure, and potential negative impacts (environmental damage, cultural degradation, over-tourism). A good essay would explore both the advantages and disadvantages, and perhaps suggest sustainable tourism practices.",
    },
    {
        type: 'essay',
        topic: Topics.ESSAY_TOPICS,
        originalNumber: 2,
        question: "Write an essay about one of the following topics : 2- New Technology",
        correctAnswerText: "This is an essay topic. A model essay answer would be provided separately.",
        explanation: "An essay on 'New Technology' could cover its transformative impact on various sectors (communication, healthcare, education), its role in innovation and progress, and challenges such as privacy concerns, digital divide, job displacement, and ethical dilemmas. It might also explore specific emerging technologies like AI, IoT, or biotechnology.",
    },
    {
        type: 'essay',
        topic: Topics.ESSAY_TOPICS,
        originalNumber: 3,
        question: "Write an essay about one of the following topics : 3- Sport",
        correctAnswerText: "This is an essay topic. A model essay answer would be provided separately.",
        explanation: "An essay on 'Sport' could delve into its physical and mental health benefits, role in fostering teamwork and discipline, economic significance (sports industry, events), and social impact (national identity, community building). It might also touch upon issues like commercialization, fair play, and the pressure on athletes.",
    },
    {
        type: 'essay',
        topic: Topics.ESSAY_TOPICS,
        originalNumber: 4,
        question: "Write an essay about one of the following topics : 4- Health",
        correctAnswerText: "This is an essay topic. A model essay answer would be provided separately.",
        explanation: "An essay on 'Health' could discuss the importance of physical and mental well-being, factors influencing health (diet, exercise, lifestyle, environment, access to healthcare), public health initiatives, and challenges such as chronic diseases, pandemics, and healthcare disparities. It could advocate for preventative measures and holistic approaches to health.",
    },
    {
        type: 'essay',
        topic: Topics.ESSAY_TOPICS,
        originalNumber: 5,
        question: "Write an essay about one of the following topics : 5- The pros and cons of the mobile",
        correctAnswerText: "This is an essay topic. A model essay answer would be provided separately.",
        explanation: "An essay on 'The pros and cons of the mobile' (mobile phones) would explore their advantages (communication, information access, entertainment, safety) and disadvantages (addiction, privacy concerns, distraction, social isolation, cyberbullying, health concerns). A balanced essay would weigh these aspects and discuss responsible usage.",
    },
];



        const quotes = [
            "The only way to do great work is to love what you do. – Steve Jobs",
            "Education is the most powerful weapon which you can use to change the world. – Nelson Mandela",
            "The future belongs to those who believe in the beauty of their dreams. – Eleanor Roosevelt",
            "Strive for progress, not perfection.",
            "The expert in anything was once a beginner.",
            "Don't watch the clock; do what it does. Keep going.",
            "Success is not final, failure is not fatal: It is the courage to continue that counts. – Winston Churchill",
            "The mind is not a vessel to be filled, but a fire to be kindled. – Plutarch",
            "Study hard what interests you the most in the most undisciplined, irreverent and original manner possible. – Richard Feynman",
            "Learning never exhausts the mind. – Leonardo da Vinci"
        ];


        let currentQuestionIndex = 0;
        let score = 0;
        let buttonsDisabled = false; // Controls user input on answer/skip buttons / self-correction buttons / reveal button
        let gameInProgress = false; // Controls overall game state
        let currentTopicQuestions = [];
        let lessonAttempts = []; // To store results for PDF: Incorrect MCQs, Skipped MCQs, Self-corrected Wrong Essays
        let questionsToRemember = []; // To store questions added to remember list for PDF: Correct MCQs (if button clicked), Self-corrected Correct Essays (if button clicked)

        // Get DOM elements
        const lessonSelectionElement = document.getElementById('lesson-selection');
        const gameContainerElement = document.querySelector('.game-container');
        const gameTitleElement = document.getElementById('game-title');
        const questionCounterElement = document.querySelector('.question-counter');
        const currentQNumElement = document.getElementById('current-q-num');
        const totalQNumElement = document.getElementById('total-q-num');
        const questionAreaElement = document.getElementById('question-area');
        const questionTextElement = document.getElementById('question-text');
        const answerButtonsElement = document.getElementById('answer-buttons'); // MCQ buttons container
        const revealAnswerButton = document.getElementById('reveal-answer-button'); // New Reveal button
        const essaySelfCorrectionButtonsElement = document.getElementById('essay-self-correction-buttons'); // Essay buttons container
        const feedbackElement = document.getElementById('feedback');
        const explanationAreaElement = document.getElementById('explanation-area');
        const explanationTextElement = document.getElementById('explanation-text');
        const scoreAreaElement = document.getElementById('score-area');
        const scoreElement = document.getElementById('score');
        const skipButton = document.getElementById('skip-button'); // Skip button (only for MCQ)
        const nextButton = document.getElementById('next-button');
        const addToRememberButton = document.getElementById('add-to-remember-button'); // Add to Remember button
        const finalScoreElement = document.getElementById('final-score');
        const finalScoreTextElement = document.getElementById('final-score-text');
        const finalTotalTextElement = document.getElementById('final-total-text');
        const restartButton = document.getElementById('restart-button');
        const downloadPdfButton = document.getElementById('download-mistakes-pdf');
        const exportAllPdfButton = document.getElementById('export-all-pdf-button'); // Export All button
        const quoteAreaElement = document.getElementById('quote-area');
        const currentQuoteElement = document.getElementById('current-quote');

         // Create self-correction buttons once and manage their visibility
        const correctEssayButton = document.createElement('button');
        correctEssayButton.textContent = 'I got it Right!';
        correctEssayButton.classList.add('self-correct-button');
        // Event listener added in revealAnswer()

        const wrongEssayButton = document.createElement('button');
        wrongEssayButton.textContent = 'I was Wrong';
        wrongEssayButton.classList.add('self-correct-button', 'wrong');
        // Event listener added in revealAnswer()

        // Append them to the container, they will be hidden by default via CSS .hidden
        essaySelfCorrectionButtonsElement.appendChild(correctEssayButton);
        essaySelfCorrectionButtonsElement.appendChild(wrongEssayButton);

         // Add event listener for the new Reveal Answer button
         revealAnswerButton.addEventListener('click', revealAnswer);


        // --- Functions ---

        function showLessonSelection() {
            console.log("Executing showLessonSelection()"); // Debug log
            gameInProgress = false;
            // Hide game elements
            gameContainerElement.classList.add('hidden');
            finalScoreElement.classList.add('hidden');
            explanationAreaElement.classList.add('hidden');
            explanationAreaElement.classList.remove('visible'); // Remove animation class
            addToRememberButton.classList.add('hidden'); // Hide remember button
            quoteAreaElement.classList.add('hidden'); // Hide quote area
            questionCounterElement.classList.add('hidden'); // Hide counter
            questionAreaElement.classList.add('hidden'); // Hide question area too

            // Show lesson selection
            lessonSelectionElement.classList.remove('hidden');

            // Clear existing buttons before adding new ones
             while (lessonSelectionElement.firstChild) {
                 lessonSelectionElement.removeChild(lessonSelectionElement.firstChild);
             }
             // Add back the h2 title
             const title = document.createElement('h2');
             title.innerHTML = 'Welcome!<br>Choose a Lesson'; // Use innerHTML for the <br> tag
             lessonSelectionElement.appendChild(title);

            console.log("Adding lesson buttons..."); // Debug log
            for (const topicKey in Topics) {
                const topicName = Topics[topicKey];
                // Check if there are questions for this topic before adding the button
                const questionsForTopic = allQuestions.filter(q => q.topic === topicName);
                console.log(`Found ${questionsForTopic.length} questions for topic: ${topicName}`); // Debug log
                if (questionsForTopic.length > 0) {
                    const btn = document.createElement("button");
                    btn.classList.add("action-button");
                    btn.innerText = `${topicName} (${questionsForTopic.length} Questions)`;
                    btn.addEventListener('click', () => startGame(topicName));
                    lessonSelectionElement.appendChild(btn);
                }
            }
            console.log("showLessonSelection() finished."); // Debug log
        }

        function startGame(topic) {
            console.log(`Executing startGame() for topic: ${topic}`); // Debug log
            gameInProgress = true;

            // Filter questions based on the chosen topic (maintaining original order)
            currentTopicQuestions = allQuestions
                .filter(q => q.topic === topic);

            if (currentTopicQuestions.length === 0) {
                console.error(`No questions found for the topic: ${topic}`); // Debug log
                alert(`No questions found for the topic: ${topic}`);
                showLessonSelection(); // Go back to selection if no questions
                return;
            }
            console.log(`Starting game with ${currentTopicQuestions.length} questions.`); // Debug log

            // Reset game state
            currentQuestionIndex = 0;
            score = 0;
            lessonAttempts = []; // Clear attempts for the new lesson
            questionsToRemember = []; // Clear remember list for the new lesson
            scoreElement.textContent = score;
            totalQNumElement.textContent = currentTopicQuestions.length; // Update total count

            // Update game title
            gameTitleElement.textContent = `${topic}`; // Updated title

            // Hide lesson selection
            lessonSelectionElement.classList.add('hidden');

            // Show game elements
            gameContainerElement.classList.remove('hidden');
            questionAreaElement.classList.remove('hidden'); // Ensure question area is shown
            feedbackElement.classList.remove('hidden');
            scoreAreaElement.classList.remove('hidden');
            quoteAreaElement.classList.remove('hidden');
            questionCounterElement.classList.remove('hidden'); // Show question counter

            // Hide end game elements
            finalScoreElement.classList.add('hidden');
            nextButton.classList.add('hidden');
            restartButton.classList.add('hidden');
            downloadPdfButton.classList.add('hidden');
            exportAllPdfButton.classList.add('hidden'); // Hide export all button

            displayQuestion();
            displayRandomQuote();
            console.log("startGame() finished."); // Debug log
        }

        function displayQuestion() {
            console.log(`Executing displayQuestion() for index ${currentQuestionIndex}`); // Debug log
            resetState(); // Clears feedback, explanation, buttons, etc.
            buttonsDisabled = false; // Re-enable input

            const question = currentTopicQuestions[currentQuestionIndex];

            if (!question) {
                console.error("Error: Could not load next question. Index out of bounds or no questions found."); // Debug log
                questionTextElement.innerHTML = "Error: Could not load next question."; // Use innerHTML for potential HTML
                buttonsDisabled = true;
                // Hide all action buttons on error
                nextButton.classList.add('hidden');
                skipButton.classList.add('hidden');
                addToRememberButton.classList.add('hidden');
                revealAnswerButton.classList.add('hidden');
                essaySelfCorrectionButtonsElement.classList.add('hidden');
                 quoteAreaElement.classList.add('hidden'); // Hide quote area on error
                setTimeout(() => restartButton.classList.remove('hidden'), 2000);
                return;
            }

            // Update question counter
            currentQNumElement.textContent = currentQuestionIndex + 1;
            console.log(`--- Displaying Question ${currentQuestionIndex + 1} (Original #${question.originalNumber}, Type: ${question.type}) ---`); // Log question start

            questionTextElement.innerHTML = question.question; // Use innerHTML

            // --- Handle different question types ---
            if (question.type === 'mcq') {
                console.log("Question type is MCQ. Setting up MCQ buttons."); // Debug log
                answerButtonsElement.classList.remove('hidden'); // Show MCQ container
                revealAnswerButton.classList.add('hidden'); // Hide reveal for MCQ
                essaySelfCorrectionButtonsElement.classList.add('hidden'); // Hide essay buttons
                skipButton.classList.remove('hidden'); // Show the skip button for MCQ
                skipButton.disabled = false; // Enable the skip button

                 if (!question.options || !Array.isArray(question.options) || question.options.length === 0) {
                     console.error("MCQ question is missing options:", question); // Debug log
                     questionTextElement.innerHTML = `Error loading MCQ question ${question.originalNumber}. Please check the question data.`; // Use innerHTML
                     buttonsDisabled = true;
                     // Hide all action buttons on error
                     skipButton.classList.add('hidden');
                     addToRememberButton.classList.add('hidden');
                     revealAnswerButton.classList.add('hidden');
                      essaySelfCorrectionButtonsElement.classList.add('hidden');
                      quoteAreaElement.classList.add('hidden'); // Hide quote area on error
                     if (currentQuestionIndex < currentTopicQuestions.length - 1) {
                         setTimeout(() => { nextButton.classList.remove('hidden'); console.log("Showing Next button after MCQ error."); }, 800);
                     } else {
                         setTimeout(endGame, 1000);
                     }
                     return;
                 }


                answerButtonsElement.innerHTML = ''; // Clear previous MCQ buttons effectively
                question.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.innerHTML = option; // Use innerHTML
                    button.classList.add('answer-button');
                    button.dataset.index = index;

                    // Use an anonymous function to call selectAnswer with the correct index
                    button.addEventListener('click', () => selectAnswer(index));
                    answerButtonsElement.appendChild(button);
                });
                 console.log(`${question.options.length} MCQ buttons added.`); // Debug log

            } else if (question.type === 'essay') {
                console.log("Question type is Essay. Setting up Reveal button."); // Debug log
                answerButtonsElement.classList.add('hidden'); // Hide MCQ buttons
                skipButton.classList.add('hidden'); // Hide the skip button for essay
                essaySelfCorrectionButtonsElement.classList.add('hidden'); // Hide essay buttons initially
                explanationAreaElement.classList.add('hidden'); // Hide explanation initially for essay
                explanationAreaElement.classList.remove('visible'); // Remove animation class
                 addToRememberButton.classList.add('hidden'); // Hide remember button initially for essay

                 // Show and enable the Reveal Answer button
                 revealAnswerButton.classList.remove('hidden');
                 revealAnswerButton.disabled = false;
                 console.log("Reveal Answer button shown."); // Debug log

            } else {
                // Handle unknown question types
                 console.error("Error: Question has unknown type:", question); // Debug log
                 questionTextElement.innerHTML = `Error loading question ${question.originalNumber} (Unknown type). Please check the question data.`; // Use innerHTML
                 buttonsDisabled = true;
                  // Hide all action buttons on error
                 skipButton.classList.add('hidden');
                 addToRememberButton.classList.add('hidden');
                 revealAnswerButton.classList.add('hidden');
                  essaySelfCorrectionButtonsElement.classList.add('hidden');
                  quoteAreaElement.classList.add('hidden'); // Hide quote area on error
                 if (currentQuestionIndex < currentTopicQuestions.length - 1) {
                     setTimeout(() => { nextButton.classList.remove('hidden'); console.log("Showing Next button after unknown type error."); }, 800);
                 } else {
                     setTimeout(endGame, 1000);
                 }
                 return;
            }
            console.log("displayQuestion() finished."); // Debug log
        }

        function resetState() {
            console.log("Executing resetState()"); // Debug log
            // Clear previous answer buttons (MCQ) and hide their container
             answerButtonsElement.innerHTML = '';
             answerButtonsElement.classList.add('hidden'); // Ensure MCQ buttons are hidden by default


            // Hide essay self-correction buttons
            essaySelfCorrectionButtonsElement.classList.add('hidden');
             correctEssayButton.disabled = true; // Disable them when hidden
             wrongEssayButton.disabled = true;

             // Hide reveal answer button
             revealAnswerButton.classList.add('hidden');
             revealAnswerButton.disabled = true;


            feedbackElement.textContent = '';
            feedbackElement.style.color = '';
            explanationAreaElement.classList.add('hidden');
            explanationAreaElement.classList.remove('visible');
            explanationTextElement.innerHTML = ''; // Use innerHTML
            nextButton.classList.add('hidden');
            skipButton.classList.add('hidden'); // Hide skip button by default, displayQuestion will show for MCQ

            // Reset Add to Remember button state explicitly
            console.log("Resetting 'Add to Remember' button state."); // Debug log
            addToRememberButton.classList.add('hidden'); // Hide the button
            addToRememberButton.disabled = false; // Ensure it's enabled
            addToRememberButton.textContent = "Add to Remember List"; // Reset text

             // Remove any event listeners added in revealAnswer to prevent duplicates on subsequent questions
             // Need to clone node or use removeEventListener properly - check how listeners are added
             // Listeners for correct/wrong essay buttons are added *in* revealAnswer. Removing them here is correct.
             // No need to remove listeners from MCQ buttons as they are replaced via innerHTML = ''
             // Global listeners (skip, next, remember, reveal, restart, download, export) are attached once and persist.
             correctEssayButton.removeEventListener('click', handleSelfCorrectionRight);
             wrongEssayButton.removeEventListener('click', handleSelfCorrectionWrong);

             console.log("resetState() complete. Add to Remember button state:", { hidden: addToRememberButton.classList.contains('hidden'), disabled: addToRememberButton.disabled, text: addToRememberButton.textContent }); // Debug log
        }

        // Handle MCQ answer selection
        function selectAnswer(selectedIndex) {
            if (buttonsDisabled) {
                console.log("selectAnswer() called but buttonsDisabled is true."); // Debug log
                return; // Prevent double-clicking
            }
            const question = currentTopicQuestions[currentQuestionIndex];

            // Ensure this is an MCQ, although displayQuestion should prevent calling this
             if (question.type !== 'mcq') {
                 console.warn("selectAnswer() called for non-MCQ type:", question); // Debug log
                 return; // Should not happen if displayQuestion works correctly
             }

            buttonsDisabled = true; // Disable input once an answer is chosen
            console.log(`Executing selectAnswer(${selectedIndex}) for Original #${question.originalNumber}. buttonsDisabled set to true.`); // Debug log


            // Disable and hide the skip button immediately
            skipButton.disabled = true;
            skipButton.classList.add('hidden');
            console.log("Skip button disabled and hidden."); // Debug log


            // Disable all answer buttons
            const answerButtons = answerButtonsElement.querySelectorAll('.answer-button');
            answerButtons.forEach(button => button.disabled = true);
             console.log("All MCQ buttons disabled."); // Debug log


            const isCorrect = (selectedIndex === question.correctAnswer);
            console.log(`MCQ Answer Selected (Index ${selectedIndex}): Is Correct? ${isCorrect}`); // Debug log

            // Record the attempt ONLY IF INCORRECT. Skipped is handled in skipQuestion. Self-corrected handled in handleSelfCorrection.
            // Correct MCQ attempts are NOT added to lessonAttempts automatically.
            if (!isCorrect) {
                lessonAttempts.push({
                    type: 'mcq', // Store type in attempt
                    originalNumber: question.originalNumber, // Include original number
                    questionText: question.question, // Keep original HTML
                    selectedAnswer: question.options[selectedIndex], // Keep original HTML
                    correctAnswerText: question.correctAnswerText, // Keep original HTML
                    options: question.options, // Keep original HTML options list
                    explanation: question.explanation, // Keep original HTML
                    isCorrect: false, // Will be false here
                    topic: question.topic,
                    // isRememberedItem is only added to questionsToRemember list
                });
                console.log(`MCQ Answered Incorrectly (Original #${question.originalNumber}). Added to lessonAttempts. lessonAttempts size: ${lessonAttempts.length}`); // Debug log
            }


            // Highlight buttons
            answerButtons.forEach((button, index) => {
                if (index === question.correctAnswer) {
                    button.classList.add('correct');
                } else if (index === selectedIndex) {
                    button.classList.add('incorrect');
                }
            });
             console.log("Answer buttons styled."); // Debug log


            if (isCorrect) {
                score++;
                scoreElement.textContent = score;
                feedbackElement.textContent = 'Correct!';
                feedbackElement.style.color = '#28a745'; // Green
                console.log("Answer was Correct. Score updated."); // Debug log

                // Show and check state of Add to Remember button ONLY if correct
                console.log("Showing 'Add to Remember' button after correct MCQ."); // Debug log
                addToRememberButton.classList.remove('hidden');
                checkRememberButtonState(question); // Check if already added and set state/text

            } else {
                feedbackElement.textContent = `Incorrect.`;
                feedbackElement.style.color = '#dc3545'; // Red
                console.log("Answer was Incorrect. Hiding 'Add to Remember' button."); // Debug log
                addToRememberButton.classList.add('hidden'); // Ensure hidden if incorrect
            }

            // Display explanation with animation (includes correct answer)
            // Construct explanation HTML to include Correct Answer text for display
            const explanationHtml = `<strong>Correct Answer:</strong> ${question.correctAnswerText}<br><br><strong>Explanation:</strong> ${question.explanation}`;
            explanationTextElement.innerHTML = explanationHtml; // Use innerHTML
            explanationAreaElement.classList.remove('hidden');
            setTimeout(() => {
                explanationAreaElement.classList.add('visible');
                 console.log("Explanation area visible."); // Debug log
            }, 10);


            // Determine next action after a delay
            if (currentQuestionIndex < currentTopicQuestions.length - 1) {
                setTimeout(() => {
                    nextButton.classList.remove('hidden');
                    console.log("Showing Next button after MCQ answer."); // Debug log
                }, 800); // Faster timeout
            } else {
                // This is the last question
                console.log("Last question answered. Ending game soon."); // Debug log
                setTimeout(endGame, 1200); // Faster endgame
            }
             console.log("selectAnswer() finished."); // Debug log
        }

         // Handle clicking the Reveal Answer button for essay questions
         function revealAnswer() {
             if (buttonsDisabled) {
                 console.log("revealAnswer() called but buttonsDisabled is true."); // Debug log
                 return; // Prevent double-clicking
             }
             buttonsDisabled = true; // Disable input temporarily
             console.log(`Executing revealAnswer() for Original #${currentTopicQuestions[currentQuestionIndex].originalNumber}. buttonsDisabled set to true.`); // Debug log


             const question = currentTopicQuestions[currentQuestionIndex];
             if (question.type !== 'essay') {
                  console.warn("revealAnswer() called for non-essay type:", question); // Debug log
                  buttonsDisabled = false; // Re-enable if it was a mistake
                  return;
             }

             console.log(`Revealing answer for Essay Question (Original #${question.originalNumber})`); // Debug log

             // Disable and hide the Reveal button
             revealAnswerButton.disabled = true;
             revealAnswerButton.classList.add('hidden');
             console.log("Reveal Answer button disabled and hidden."); // Debug log


             // Display explanation with animation (includes model answer)
             const explanationHtml = `<strong>Model Answer:</strong> ${question.correctAnswerText}<br><br><strong>Explanation:</strong> ${question.explanation}`;
             explanationTextElement.innerHTML = explanationHtml; // Use innerHTML
             explanationAreaElement.classList.remove('hidden');
             setTimeout(() => {
                 explanationAreaElement.classList.add('visible');
                  console.log("Explanation area visible after revealing answer."); // Debug log
             }, 10);


             // Now show and enable the self-correction buttons after a slight delay
             setTimeout(() => {
                  console.log("Showing essay self-correction buttons."); // Debug log
                  essaySelfCorrectionButtonsElement.classList.remove('hidden');
                  correctEssayButton.disabled = false;
                  wrongEssayButton.disabled = false;
                  buttonsDisabled = false; // Re-enable input for self-correction buttons
                   console.log("Self-correction buttons enabled. buttonsDisabled set to false."); // Debug log

                  // Add listeners *only* after they are revealed and enabled
                  // These listeners are removed in resetState
                  correctEssayButton.addEventListener('click', handleSelfCorrectionRight);
                  wrongEssayButton.addEventListener('click', handleSelfCorrectionWrong);

             }, 500); // Small delay before showing correction buttons
              console.log("revealAnswer() finished."); // Debug log
         }

         // Separate handlers for clarity and easier listener removal
         function handleSelfCorrectionRight() {
             handleSelfCorrection(true);
         }

         function handleSelfCorrectionWrong() {
             handleSelfCorrection(false);
         }


        // Handle Essay self-correction
        function handleSelfCorrection(isCorrect) {
            if (buttonsDisabled) {
                 console.log(`handleSelfCorrection(${isCorrect}) called but buttonsDisabled is true.`); // Debug log
                return; // Prevent double-clicking
            }
             const question = currentTopicQuestions[currentQuestionIndex];

            // Ensure this is an Essay
             if (question.type !== 'essay') {
                 console.warn("handleSelfCorrection() called for non-essay type:", question); // Debug log
                  return; // Should not happen
             }

            buttonsDisabled = true; // Disable input once self-corrected
            console.log(`Executing handleSelfCorrection(${isCorrect}) for Original #${question.originalNumber}. buttonsDisabled set to true.`); // Debug log


            // Disable self-correction buttons immediately
             correctEssayButton.disabled = true;
             wrongEssayButton.disabled = true;
             essaySelfCorrectionButtonsElement.classList.add('hidden'); // Hide the container
             console.log("Self-correction buttons disabled and hidden."); // Debug log

             // Remove listeners to prevent them from firing again
             correctEssayButton.removeEventListener('click', handleSelfCorrectionRight);
             wrongEssayButton.removeEventListener('click', handleSelfCorrectionWrong);
             console.log("Self-correction button listeners removed."); // Debug log


             if (isCorrect) {
                score++;
                scoreElement.textContent = score;
                feedbackElement.textContent = 'Marked as Correct!';
                feedbackElement.style.color = '#28a745'; // Green
                 console.log("Marked Right. Score updated."); // Debug log

                // Show and check state of "Add to Remember" button after self-correcting as correct
                 console.log("Showing 'Add to Remember' button after correct self-correction."); // Debug log
                 addToRememberButton.classList.remove('hidden');
                 checkRememberButtonState(question); // Set button text and state

             } else {
                feedbackElement.textContent = `Marked as Incorrect.`;
                feedbackElement.style.color = '#dc3545'; // Red
                 console.log("Marked Wrong. Hiding 'Add to Remember' button. Added to lessonAttempts."); // Debug log
                 addToRememberButton.classList.add('hidden'); // Ensure hidden if incorrect

                 // Record the attempt as self-corrected wrong
                lessonAttempts.push({
                    type: 'essay', // Store type in attempt
                    originalNumber: question.originalNumber,
                    questionText: question.question, // Include question text
                    selectedAnswer: "[Self-Corrected as Wrong]", // Indicate it was self-corrected wrong
                    correctAnswerText: question.correctAnswerText, // Include correct answer text (model answer)
                    options: [], // No options for essay
                    explanation: question.explanation, // Include explanation
                    isCorrect: false, // Mark as incorrect/missed for filtering
                    topic: question.topic,
                });
                 console.log(`Added to lessonAttempts. lessonAttempts size: ${lessonAttempts.length}`); // Debug log
             }

            // Explanation is already visible from revealAnswer()


            // Determine next action after a delay
            if (currentQuestionIndex < currentTopicQuestions.length - 1) {
                setTimeout(() => {
                    nextButton.classList.remove('hidden');
                     console.log("Showing Next button after essay self-correction."); // Debug log
                }, 800); // Faster timeout
            } else {
                 console.log("Last question self-corrected. Ending game soon."); // Debug log
                setTimeout(endGame, 1200);
            }
            console.log("handleSelfCorrection() finished."); // Debug log
        }


        // Handle MCQ skip
        function skipQuestion() {
            if (buttonsDisabled) {
                 console.log("skipQuestion() called but buttonsDisabled is true."); // Debug log
                return; // Prevent double-clicking
            }
            const question = currentTopicQuestions[currentQuestionIndex];
             // Ensure this is an MCQ
            if (question.type !== 'mcq') {
                 console.warn("skipQuestion() called for non-MCQ type:", question); // Debug log
                 return; // Should not happen
            }

            buttonsDisabled = true; // Disable input once skip is clicked
            console.log(`Executing skipQuestion() for Original #${question.originalNumber}. buttonsDisabled set to true.`); // Debug log


            // Disable and hide the skip button immediately
            skipButton.disabled = true;
            skipButton.classList.add('hidden');
             console.log("Skip button disabled and hidden."); // Debug log

            // Disable all answer buttons
            const answerButtons = answerButtonsElement.querySelectorAll('.answer-button');
            answerButtons.forEach(button => button.disabled = true);
             console.log("All MCQ buttons disabled."); // Debug log


            // Record the attempt as skipped/incorrect
             lessonAttempts.push({
                type: 'mcq', // Store type in attempt
                originalNumber: question.originalNumber,
                questionText: question.question, // Include question text
                selectedAnswer: "[Skipped]", // Indicate it was skipped
                correctAnswerText: question.correctAnswerText, // Include correct answer text
                options: question.options, // Include options
                explanation: question.explanation, // Include explanation
                isCorrect: false, // Mark as incorrect/missed for filtering
                topic: question.topic,
                // Do NOT add isRememberedItem: true here
            });
             console.log(`Skipped MCQ Question (Original #${question.originalNumber}). Added to lessonAttempts. lessonAttempts size: ${lessonAttempts.length}`); // Debug log


            // Provide feedback for skipping
            feedbackElement.textContent = 'Question Skipped.';
            feedbackElement.style.color = '#ffc107'; // Yellow/Orange color for skipped feedback

            // Highlight the correct answer button visually (if it exists)
             const answerButtonsList = answerButtonsElement.querySelectorAll('.answer-button');
            if (question.correctAnswer !== undefined && question.correctAnswer >= 0 && question.correctAnswer < answerButtonsList.length) {
                 answerButtonsList[question.correctAnswer].classList.add('correct');
                 console.log("Highlighted correct answer button."); // Debug log
            }


            // Display explanation and correct answer with animation
             const explanationHtml = `<strong>Correct Answer:</strong> ${question.correctAnswerText}<br><br><strong>Explanation:</strong> ${question.explanation}`;
             explanationTextElement.innerHTML = explanationHtml; // Use innerHTML
            explanationAreaElement.classList.remove('hidden');
            setTimeout(() => {
                explanationAreaElement.classList.add('visible');
                 console.log("Explanation area visible after skipping."); // Debug log
            }, 10);

            // *** Do NOT show "Add to Remember" button if skipped ***
            console.log("Skipped. Hiding 'Add to Remember' button."); // Debug log
            addToRememberButton.classList.add('hidden');


            // Determine next action after a delay
            if (currentQuestionIndex < currentTopicQuestions.length - 1) {
                setTimeout(() => {
                    nextButton.classList.remove('hidden');
                     console.log("Showing Next button after skipping."); // Debug log
                }, 800); // Faster timeout
            } else {
                 console.log("Last question skipped. Ending game soon."); // Debug log
                setTimeout(endGame, 1200);
            }
             console.log("skipQuestion() finished."); // Debug log
        }

        // Function to check and set the state of the "Add to Remember" button
        function checkRememberButtonState(question) {
            console.log(`Executing checkRememberButtonState() for Original #${question.originalNumber}`); // Debug log
            // Check if the current question is already in the remember list
            const isAlreadyAdded = questionsToRemember.some(q => q.originalNumber === question.originalNumber && q.topic === question.topic);

            if (isAlreadyAdded) {
                console.log("Question found in remember list. Disabling button."); // Debug log
                addToRememberButton.textContent = "Added!";
                addToRememberButton.disabled = true;
                 // Styling is handled by the CSS :disabled rule now
            } else {
                 console.log("Question NOT found in remember list. Enabling button."); // Debug log
                addToRememberButton.textContent = "Add to Remember List";
                addToRememberButton.disabled = false;
                 // Styling is handled by the CSS rule for #add-to-remember-button
            }
             console.log("Add to Remember button state after check:", { hidden: addToRememberButton.classList.contains('hidden'), disabled: addToRememberButton.disabled, text: addToRememberButton.textContent }); // Debug log
        }


        // Function to add the current question to the remember list when button is clicked
        // This function is now called *only* when the 'Add to Remember List' button is explicitly clicked.
        function addToRememberList() {
             console.log("Executing addToRememberList()"); // Debug log
            const question = currentTopicQuestions[currentQuestionIndex];
            // Check if the current question is already in the remember list before adding
            const isAlreadyAdded = questionsToRemember.some(q => q.originalNumber === question.originalNumber && q.topic === question.topic);

            if (!isAlreadyAdded) {
                // Add a copy of the current question object with a flag
                 questionsToRemember.push({...question, isRememberedItem: true}); // Use spread to copy properties

                // Update button state immediately
                console.log(`Question Original #${question.originalNumber} clicked to add to remember list.`); // Debug log
                checkRememberButtonState(question); // This will set the text to "Added!" and disable the button
                console.log(`Question Original #${question.originalNumber} added to remember list. List size: ${questionsToRemember.length}`); // Debug log
            } else {
                 console.log(`Attempted to add Question Original #${question.originalNumber}, but it was already in the list.`); // Debug log
            }
            // If it was already added, the button should have been disabled already by checkRememberButtonState
             console.log("addToRememberList() finished."); // Debug log
        }


        function nextQuestion() {
            console.log("Executing nextQuestion()."); // Debug log
            currentQuestionIndex++;
            if (currentQuestionIndex < currentTopicQuestions.length) {
                displayQuestion(); // displayQuestion will handle showing/enabling buttons based on type
                displayRandomQuote();
            } else {
                // Should be handled by selectAnswer/skipQuestion/handleSelfCorrection, but included for safety
                 console.log("nextQuestion() called but it's the last question. Calling endGame."); // Debug log
                endGame();
            }
             console.log("nextQuestion() finished."); // Debug log
        }

        function endGame() {
            console.log("Executing endGame()."); // Debug log
            gameInProgress = false;
            // Hide game elements
            questionAreaElement.classList.add('hidden');
            feedbackElement.classList.add('hidden');
            explanationAreaElement.classList.add('hidden');
            explanationAreaElement.classList.remove('visible');
            scoreAreaElement.classList.add('hidden');
            nextButton.classList.add('hidden');
            skipButton.classList.add('hidden'); // Ensure skip button is hidden at the end
            addToRememberButton.classList.add('hidden'); // Ensure remember button is hidden at the end
             essaySelfCorrectionButtonsElement.classList.add('hidden'); // Ensure essay buttons are hidden at the end
             revealAnswerButton.classList.add('hidden'); // Ensure reveal button is hidden at the end
            quoteAreaElement.classList.add('hidden');
            questionCounterElement.classList.add('hidden');


            // Show final score and restart button
            finalScoreElement.classList.remove('hidden');
            finalScoreTextElement.textContent = score;
            finalTotalTextElement.textContent = currentTopicQuestions.length;
            restartButton.classList.remove('hidden');

            // Show Review PDF button only if there were mistakes, skips, or items to remember
             // lessonAttempts contains incorrect MCQs, skipped MCQs, and self-corrected wrong Essays
             // questionsToRemember contains correct MCQs added (if button clicked), and self-corrected correct Essays added (if button clicked)
             console.log(`End Game Summary: Attempts=${lessonAttempts.length}, Remembered=${questionsToRemember.length}`); // Debug log
            if (lessonAttempts.length > 0 || questionsToRemember.length > 0) {
                downloadPdfButton.classList.remove('hidden');
                console.log("Showing Download Review PDF button."); // Debug log
            } else {
                downloadPdfButton.classList.add('hidden');
                 console.log("Hiding Download Review PDF button (no items in review/remember lists)."); // Debug log
            }

            // Always show the Export All button on the final screen
            exportAllPdfButton.classList.remove('hidden');
             console.log("Showing Export All Questions PDF button."); // Debug log
             console.log("endGame() finished."); // Debug log
        }

        function displayRandomQuote() {
            // Only display quote if game is in progress
            if (gameInProgress) {
                const randomIndex = Math.floor(Math.random() * quotes.length);
                currentQuoteElement.textContent = quotes[randomIndex];
                quoteAreaElement.classList.remove('hidden');
            } else {
                quoteAreaElement.classList.add('hidden'); // Hide if not in game
            }
        }

        // Common CSS styles for PDF content - Updated font sizes
        const pdfStyles = `
             <style>
                 body { font-family: 'Arial', sans-serif; line-height: 1.4; color: #333; margin: 0; padding: 0; } /* Removed padding from body, add to html2pdf margin */
                 h1, h2 { color: #1a2a6c; }
                 h1 { font-size: 18pt; margin-bottom: 5mm; }
                 h2 { font-size: 14pt; margin-bottom: 10mm; }
                 p { margin: 0 0 8px 0; }
                 strong { font-weight: bold; }
                 ul { margin: 8px 0 8px 20px; padding: 0; list-style: none; }
                 li { margin-bottom: 4px; font-size: 12pt; } /* Increased font size for options list items */
                 .item-container {
                     border: 1px solid #eee;
                     padding: 15px;
                     margin-bottom: 20px;
                     border-radius: 5px;
                     page-break-inside: avoid; /* Ensures item tries not to break across pages */
                 }
                 .item-header { font-size: 11pt; font-weight: bold; margin-bottom: 10px; color: #444; } /* Increased font size for header */
                 .question-text { font-size: 14pt; margin-bottom: 8px; } /* Increased font size for question text */
                 .answer-text { font-size: 12pt; } /* Increased font size for answer text */
                 .correct-answer { color: #28a745; }
                 .incorrect-answer { color: #dc3545; }
                 .skipped-answer { color: #6c757d; font-style: italic; }
                  .self-corrected-wrong { color: #dc3545; font-style: italic; }
                 .explanation-text { font-size: 11pt; color: #1b5e20; margin-top: 8px; } /* Increased font size for explanation */
                 /* Basic sub/sup styling */
                 sub, sup { font-size: 0.7em; line-height: 0; position: relative; vertical-align: baseline; }
                 sup { top: -0.5em; }
                 sub { bottom: -0.2em; }

                 /* Section Titles */
                 .section-title { font-size: 16pt; font-weight: bold; margin-top: 15mm; margin-bottom: 8mm; }
                 .section-title.attempts { color: #dc3545; }
                 .section-title.remember { color: #4a69bd; }
             </style>
         `;


        // Helper function to generate the HTML content for a single item in the PDF
        // It now handles different question types and sources (attempts vs remembered vs all)
        function buildItemHtml(item, index, isReview = true) {
            // Styles are now defined outside and included in the main HTML string

            let itemHtml = `<div class="item-container">`;

             // Determine how to display the item based on context (Review vs All) and type (MCQ vs Essay)

            if (isReview) {
                 // --- Building for Review PDF (Mistakes/Skips/Remembered) ---
                 // Item comes from either lessonAttempts or questionsToRemember
                 const isRemembered = !!item.isRememberedItem; // Check the flag

                 itemHtml += `<p class="item-header">Item ${index + 1}: (Original Question ${item.originalNumber}, ${item.type.toUpperCase()})</p>`; // Add type here
                 itemHtml += `<p class="question-text"><strong>Question:</strong> ${item.questionText || item.question}</p>`; // Use questionText from attempt if available, otherwise question from original

                 if (item.type === 'mcq') {
                      // Display for MCQ in review (Incorrect/Skipped - from lessonAttempts)
                      // Or Remembered MCQ (from questionsToRemember)
                      if (isRemembered) {
                           // For remembered MCQs, just show the options with correct highlighted below the question
                           if (item.options && Array.isArray(item.options) && item.options.length > 0) {
                                itemHtml += `<p style="margin-bottom: 5px;"><strong>Options:</strong></p><ul>`;
                                item.options.forEach((opt, idx) => {
                                     let optClass = '';
                                     // Need original item to get correct index if building from lessonAttempts (though lessonAttempts shouldn't have correct MCQs unless skipped?)
                                     // If item is from questionsToRemember, it has the original properties including correctAnswer
                                     if (item.hasOwnProperty('correctAnswer') && idx === item.correctAnswer) {
                                         optClass = 'correct-answer';
                                     }
                                     itemHtml += `<li class="${optClass}">${String.fromCharCode(97 + idx)}) ${opt}</li>`;
                                });
                                itemHtml += `</ul>`;
                           }
                      } else { // Must be from lessonAttempts (incorrect or skipped MCQ)
                          if (item.selectedAnswer === "[Skipped]") {
                             itemHtml += `<p class="answer-text skipped-answer"><strong>Your Action:</strong> [Skipped]</p>`;
                         } else if (item.selectedAnswer) { // Was an incorrect attempt
                             itemHtml += `<p class="answer-text incorrect-answer"><strong>Your Answer:</strong> ${item.selectedAnswer}</p>`;
                         }
                          // Also show all options for context on incorrect/skipped MCQs
                          if (item.options && Array.isArray(item.options) && item.options.length > 0) {
                                itemHtml += `<p style="margin-bottom: 5px;"><strong>Options:</strong></p><ul>`;
                                item.options.forEach((opt, idx) => {
                                     let optClass = '';
                                     // Need original item to get correct index - attempt object should ideally store correct index or answer text
                                     // The attempt object stores correctAnswerText, so compare against that
                                     if (item.correctAnswerText && opt === item.correctAnswerText.trim()) { // Trim to match "c) generator" vs "c) generator "
                                         optClass = 'correct-answer';
                                     }
                                     itemHtml += `<li class="${optClass}">${String.fromCharCode(97 + idx)}) ${opt}</li>`;
                                });
                                itemHtml += `</ul>`;
                           }
                      }

                 } else if (item.type === 'essay') {
                     // Display for Essay in review (Self-corrected Wrong - from lessonAttempts or Remembered - from questionsToRemember)
                     if (!isRemembered) { // Must be a self-corrected wrong attempt from lessonAttempts
                         itemHtml += `<p class="answer-text self-corrected-wrong"><strong>Your Action:</strong> [Self-Corrected as Wrong]</p>`;
                     }
                     // If it's a remembered essay (isRememberedItem: true), no user action text is shown here,
                     // just the question, model answer, and explanation below.
                 }

                 // Always show the correct/model answer in the review PDF
                 // For MCQs coming from lessonAttempts, correctAnswerText is stored.
                 // For items coming from questionsToRemember, correctAnswerText is on the item itself (copied from original).
                 itemHtml += `<p class="answer-text correct-answer"><strong>Correct/Model Answer:</strong> ${item.correctAnswerText}</p>`;

                 // Always show the explanation in the review PDF
                 itemHtml += `<p class="explanation-text"><strong>Explanation:</strong> ${item.explanation}</p>`;


            } else {
                 // --- Building for All Questions PDF ---
                 // Item comes directly from allQuestions
                 const question = item; // Use the original question object directly

                 itemHtml += `<p class="item-header">Question ${question.originalNumber}: (${question.type.toUpperCase()})</p>`; // Add type here
                 itemHtml += `<p class="question-text"><strong>Question:</strong> ${question.question}</p>`;

                 if (question.type === 'mcq') {
                     // Add options list for MCQ
                     if (question.options && Array.isArray(question.options) && question.options.length > 0) {
                          itemHtml += `<p style="margin-bottom: 5px;"><strong>Options:</strong></p><ul>`;
                          question.options.forEach((opt, idx) => {
                              let optClass = '';
                              if (question.hasOwnProperty('correctAnswer') && idx === question.correctAnswer) {
                                   optClass = 'correct-answer';
                              }
                              itemHtml += `<li class="${optClass}">${String.fromCharCode(97 + idx)}) ${opt}</li>`;
                          });
                          itemHtml += `</ul>`;
                     }
                     // Add correct answer text explicitly
                      if (question.correctAnswerText) {
                         itemHtml += `<p class="answer-text correct-answer"><strong>Correct Answer:</strong> ${question.correctAnswerText}</p>`;
                     }


                 } else if (question.type === 'essay') {
                      // Add model answer for Essay
                      if (question.correctAnswerText) {
                         itemHtml += `<p class="answer-text correct-answer"><strong>Model Answer:</strong> ${question.correctAnswerText}</p>`;
                     }
                 }

                 // Add explanation
                 if (question.explanation) {
                    itemHtml += `<p class="explanation-text"><strong>Explanation:</strong> ${question.explanation}</p>`;
                 }
            }


            itemHtml += `</div>`; // Close item-container

             return itemHtml; // Return HTML without styles
        }


        // PDF Generation Function for Mistakes, Skips, and Remembered Items using html2pdf.js
        function generateReviewPDF() {
             console.log("Executing generateReviewPDF()"); // Debug log
             // lessonAttempts contains incorrect MCQs, skipped MCQs, and self-corrected wrong Essays
             // questionsToRemember contains correct MCQs added (if button clicked), and self-corrected correct Essays added (if button clicked)

            if (lessonAttempts.length === 0 && questionsToRemember.length === 0) {
                alert("No mistakes, skips, or items added to the 'Remember' list to review.");
                console.log("generateReviewPDF() aborted: No items to include."); // Debug log
                return;
            }

            const topicName = currentTopicQuestions.length > 0 ? currentTopicQuestions[0].topic : 'Lesson';
            console.log(`Generating Review PDF for ${topicName}...`); // Debug log

            let pdfHtml = `
                <html>
                <head>
                    <title>${topicName} Review</title>
                    ${pdfStyles} <!-- Include styles here -->
                </head>
                <body>
                    <h1>Review - Mistakes, Skips, and Remembered Items</h1>
                    <h2>Lesson: ${topicName}</h2>
                    <p><strong>Final Score:</strong> ${score} / ${currentTopicQuestions.length}</p>
            `;

            // --- Incorrect Answers & Skips & Self-Corrected Wrong Section ---
            if (lessonAttempts.length > 0) {
                pdfHtml += `<h2 class="section-title attempts">Incorrect Answers, Skips & Self-Corrected Wrong (${lessonAttempts.length})</h2>`;
                 // Sort attempts by original question number before adding to PDF
                 const sortedAttempts = lessonAttempts.slice().sort((a, b) => a.originalNumber - b.originalNumber);
                sortedAttempts.forEach((item, index) => {
                    pdfHtml += buildItemHtml(item, index, true); // true for isReview
                });
                 console.log(`${lessonAttempts.length} items added to Attempts section of PDF.`); // Debug log
            }

            // --- Questions to Remember Section ---
            if (questionsToRemember.length > 0) {
                 // Add a little space before this section if the previous one exists
                 if (lessonAttempts.length > 0) {
                     pdfHtml += `<div style="height: 10mm;"></div>`; // Add vertical space
                 }
                pdfHtml += `<h2 class="section-title remember">Questions to Remember (${questionsToRemember.length})</h2>`;
                 // Sort remembered items by original question number
                 const sortedRemembered = questionsToRemember.slice().sort((a, b) => a.originalNumber - b.originalNumber);
                sortedRemembered.forEach((item, index) => {
                     // For remembered items, use buildItemHtml in review mode.
                     // The item object already has the necessary structure (question, type, etc.)
                    pdfHtml += buildItemHtml(item, index, true); // true for isReview
                });
                 console.log(`${questionsToRemember.length} items added to Remember section of PDF.`); // Debug log
            }

            pdfHtml += `</body></html>`;

            // Use html2pdf.js to generate and save the PDF
            const worker = html2pdf().from(pdfHtml).set({
                margin: 5, // Page margins in mm
                filename: `${topicName.replace(/[^a-z0-9]/gi, '_')}_Review.pdf`,
				pagebreak:{mode:"css"}, // Use css mode for page breaks
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: {
                    scale: 2, // Keep scale 8 for now, reduce if still issues with white pages or memory
                    logging: true,
                    dpi: 300, // Higher DPI for better text rendering
                    letterRendering: true, // Improve text rendering
                    useCORS: true // Needed if any images are from external domains (unlikely here, but good practice)
                },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            });

             worker.save().then(() => {
                 console.log("PDF Generation complete."); // Debug log
             }).catch(error => {
                 console.error("PDF Generation failed:", error); // Debug log
                 alert("Failed to generate PDF. Please check the console for errors.");
             });
             console.log("PDF Generation initiated."); // Debug log
        }


        // PDF Generation Function for ALL Questions using html2pdf.js
        function generateAllQuestionsPDF() {
             console.log("Executing generateAllQuestionsPDF()"); // Debug log
             if (currentTopicQuestions.length === 0) {
                alert("No questions available for the current lesson.");
                 console.log("generateAllQuestionsPDF() aborted: No questions available."); // Debug log
                return;
            }

            const topicName = currentTopicQuestions.length > 0 ? currentTopicQuestions[0].topic : 'Lesson';
             console.log(`Generating All Questions PDF for ${topicName}...`); // Debug log

            let pdfHtml = `
                <html>
                <head>
                    <title>${topicName} All Questions</title>
                     ${pdfStyles} <!-- Include styles here -->
                </head>
                <body>
                    <h1>All Questions and Answers</h1>
                    <h2>Lesson: ${topicName}</h2>
            `;

             // Sort questions just in case they weren't filtered/sorted earlier (though startGame does this)
             const sortedQuestions = currentTopicQuestions.slice().sort((a, b) => a.originalNumber - b.originalNumber);

            // Add each question to the HTML
             sortedQuestions.forEach((item, index) => {
                pdfHtml += buildItemHtml(item, index, false); // false for not isReview (i.e., building for All Questions)
            });
             console.log(`${sortedQuestions.length} items added to All Questions PDF.`); // Debug log

            pdfHtml += `</body></html>`;


            // Use html2pdf.js to generate and save the PDF
             const worker = html2pdf().from(pdfHtml).set({
                margin: 5, // Page margins in mm
                filename: `${topicName.replace(/[^a-z0-9]/gi, '_')}_All_Questions_and_Answers.pdf`,
                 image: { type: 'jpeg', quality: 0.98 },
				 pagebreak:{mode:"css"}, // Use css mode for page breaks
                 html2canvas: {
                     scale: 2, // Keep scale 8 for now, reduce if still issues with white pages
                     logging: true,
                     dpi: 300,
                     letterRendering: true,
                      useCORS: true // Needed if any images are from external domains
                    },
                 jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            });

             worker.save().then(() => {
                 console.log("PDF Generation complete."); // Debug log
             }).catch(error => {
                 console.error("PDF Generation failed:", error); // Debug log
                 alert("Failed to generate PDF. Please check the console for errors.");
             });
             console.log("PDF Generation initiated."); // Debug log
        }


        // --- Event Listeners ---
        addToRememberButton.addEventListener('click', addToRememberList);
        // revealAnswerButton.addEventListener('click', revealAnswer); // Listener added in displayQuestion now
        skipButton.addEventListener('click', skipQuestion);
        nextButton.addEventListener('click', nextQuestion);
        restartButton.addEventListener('click', showLessonSelection);
        downloadPdfButton.addEventListener('click', generateReviewPDF); // Hook up to the new Review PDF function
        exportAllPdfButton.addEventListener('click', generateAllQuestionsPDF);


        // --- Initial Call to Show Lesson Selection ---
        // Using DOMContentLoaded ensures the script runs after the HTML is fully parsed
        document.addEventListener('DOMContentLoaded', () => {
             console.log("DOMContentLoaded fired. Initializing application."); // Debug log
             showLessonSelection();
             console.log("Initial showLessonSelection() called."); // Debug log
        });
    </script>

</body>

</html>
