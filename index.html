<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biology Exams</title>

    <!-- Embedded CSS Styles -->
    <style>
        /* Use the imported Lato font */
        body {
            font-family: 'Lato', sans-serif;
            background-color: #eef2f7;
            /* Light, cool background */
            color: #333;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: #ffffff;
            /* White container background */
            padding: 30px;
            border-radius: 8px;
            /* Subtle rounding */
            text-align: center;
            max-width: 650px;
            /* Wider container */
            width: 100%;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            /* Clean shadow */
        }

        #lesson-selection.container {
            padding: 40px 30px;
        }

        #lesson-selection h2 {
            color: #1a2a6c;
            /* Deep blue */
            margin-bottom: 30px;
            font-size: 2.2em;
            font-weight: 900;
            /* Lato Black */
        }

        .action-button {
            background-color: #4a69bd;
            /* Muted blue */
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            border-radius: 5px;
            cursor: pointer;
            margin: 8px;
            transition: background-color 0.2s ease, transform 0.1s ease;
            font-weight: 700;
            /* Lato Bold */
            text-transform: uppercase;
        }

        .action-button:hover:not(:disabled) {
            background-color: #3b5998;
            /* Darker blue on hover */
            transform: translateY(-2px);
        }

        .action-button:active:not(:disabled) {
            transform: translateY(0);
        }

        .action-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Specific style for the skip button */
        #skip-button {
            background-color: #6c757d;
            /* Muted grey */
            margin-top: 15px;
            /* Space above skip button */
            margin-bottom: 15px;
            /* Space below skip button before separator/next */
        }

        #skip-button:hover:not(:disabled) {
            background-color: #5a6268;
            /* Darker grey on hover */
        }

         /* Specific style for the reveal answer button */
         #reveal-answer-button {
             background-color: #17a2b8; /* Info blue */
             margin-top: 15px;
             margin-bottom: 15px;
         }
         #reveal-answer-button:hover:not(:disabled) {
             background-color: #138496; /* Darker info blue */
         }


        /* Style for the "Add to Remember" button */
        #add-to-remember-button {
            background-color: #ffc107;
            /* Orange/Yellow */
            color: #343a40;
            /* Dark text */
            font-size: 0.9em;
            /* Slightly smaller */
            padding: 8px 15px;
            margin-top: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        #add-to-remember-button:hover:not(:disabled) {
            background-color: #e0a800;
            /* Darker orange */
        }

        #add-to-remember-button:disabled {
            /* Use a lighter version of its own color */
            background-color: #cccccc; /* Grey color for disabled remember button */
            color: #666; /* Dark grey text */
            cursor: not-allowed;
        }

         /* Style for self-correction buttons (Right/Wrong) */
        .self-correct-button {
            background-color: #28a745; /* Green for Right */
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            border-radius: 5px;
            cursor: pointer;
            margin: 8px;
            transition: background-color 0.2s ease, transform 0.1s ease;
            font-weight: 700;
            text-transform: uppercase;
        }

        .self-correct-button.wrong {
             background-color: #dc3545; /* Red for Wrong */
        }

        .self-correct-button:hover:not(:disabled) {
             background-color: #218838; /* Darker green */
             transform: translateY(-2px);
        }

        .self-correct-button.wrong:hover:not(:disabled) {
             background: #c82333; /* Darker red */
             transform: translateY(-2px);
        }

        .self-correct-button:active:not(:disabled) {
             transform: translateY(0);
        }

        .self-correct-button:disabled {
             opacity: 0.6;
             cursor: not-allowed;
        }


        #game-title {
            color: #1a2a6c;
            /* Deep blue */
            margin-bottom: 15px;
            /* Less margin above counter */
            font-size: 2em;
            font-weight: 900;
        }

        .question-counter {
            font-size: 1em;
            color: #666;
            margin-bottom: 25px;
            /* Space below counter */
            font-weight: 400;
            /* Lato Regular */
        }

        #question-area {
            margin-bottom: 20px;
        }

        #question-text {
            font-size: 1.3em;
            margin-bottom: 20px;
            font-weight: 700;
            /* Lato Bold */
            line-height: 1.5;
            color: #444;
            text-align: left;
            /* Align question text left */
        }

        #answer-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
            /* Add margin below answer buttons */
        }

         #essay-self-correction-buttons {
             /* Container for essay correction buttons */
             margin-top: 15px; /* Space above buttons */
             margin-bottom: 20px; /* Space below buttons */
         }


        .answer-button {
            background-color: #f0f0f0;
            /* Light grey button */
            color: #333;
            border: 1px solid #ddd;
            padding: 12px 15px;
            font-size: 1em;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            text-align: left;
            word-wrap: break-word;
            font-weight: 400;
        }

        .answer-button:hover:not(:disabled) {
            background-color: #e0e0e0;
            /* Slightly darker grey on hover */
            border-color: #ccc;
        }

        .answer-button:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        /* Visual feedback on answer buttons */
        .answer-button.correct {
            background-color: #4CAF50;
            /* Green */
            border-color: #4CAF50;
            color: white;
            font-weight: 700;
        }

        .answer-button.incorrect {
            background-color: #f44336;
            /* Red */
            border-color: #f44336;
            color: white;
            font-weight: 700;
        }

        #feedback {
            margin-top: 20px;
            font-size: 1.1em;
            min-height: 1.4em;
            font-weight: 700;
            color: #333;
            /* Neutral color, feedback color set by JS */
        }

        #explanation-area {
            margin-top: 15px;
            padding: 15px;
            background-color: #e8f5e9;
            /* Very light green for explanation */
            border: 1px solid #c8e6c9;
            /* Light green border */
            border-radius: 5px;
            text-align: left;
            color: #2e7d32;
            /* Dark green text */
            font-size: 0.95em;
            line-height: 1.5;
            opacity: 0;
            /* Start hidden */
            transform: translateY(10px);
            /* Start slightly lower */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            /* Animation */
        }

        #explanation-area.visible {
            /* Class added by JS */
            opacity: 1;
            transform: translateY(0);
        }


        #explanation-area h3 {
            margin-top: 0;
            margin-bottom: 8px;
            font-size: 1em;
            font-weight: 700;
            color: #1b5e20;
            /* Even darker green */
        }

        #score-area {
            margin-top: 20px;
            font-size: 1.1em;
            color: #1a2a6c;
            /* Deep blue */
            font-weight: 700;
        }

        .separator {
            border: none;
            border-top: 1px solid #eee;
            /* Very light solid line */
            height: 1px;
            margin: 20px 0;
        }

        #final-score {
            margin-top: 20px;
            font-size: 1.2em;
        }

        #final-score h2 {
            color: #1a2a6c;
            /* Deep blue */
            margin-bottom: 10px;
            font-weight: 900;
        }

        #final-score p {
            margin-bottom: 15px;
            font-weight: 700;
        }

        #final-score .action-button {
            margin-top: 15px;
            /* Less space above final score buttons */
        }


        #quote-area {
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            /* Very light solid line */
            color: #6c757d;
            /* Muted grey text */
            font-size: 0.9em;
            font-style: italic;
            font-weight: 400;
        }

        #current-quote {
            margin: 0;
            line-height: 1.4;
        }

        .hidden {
            display: none;
        }
    </style>

    <!-- Link to Google Fonts (Lato) -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    <!-- jsPDF library for PDF generation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
    <div id="lesson-selection" class="container">
        <h2>Choose a Lesson</h2>
        <!-- Lesson buttons will be added here by JavaScript -->
    </div>

    <div class="game-container container hidden">
        <h1 id="game-title">Math (Application) Game Show!</h1>
        <div class="question-counter">Question <span id="current-q-num">0</span> of <span id="total-q-num">0</span>
        </div>

        <div id="question-area">
            <p id="question-text">Loading question...</p>
            <div id="answer-buttons">
                <!-- MCQ Answer buttons will be added here by JavaScript -->
            </div>
            <button id="reveal-answer-button" class="action-button hidden">Reveal Answer</button> <!-- New Reveal button -->
            <div id="essay-self-correction-buttons" class="hidden">
                <!-- Essay self-correction buttons will be added here by JavaScript -->
            </div>
        </div>

        <div id="feedback">
            <!-- Feedback message (Correct/Incorrect/Skipped/Self-Corrected) will appear here -->
        </div>

        <div id="explanation-area" class="hidden">
            <h3>Explanation:</h3>
            <p id="explanation-text"></p>
        </div>

        <!-- Add the "Add to Remember" button here -->
        <button id="add-to-remember-button" class="action-button hidden">Add to Remember List</button>


        <div id="score-area">
            Score: <span id="score">0</span>
        </div>

        <hr class="separator">

        <!-- Add the Skip button (visible only for MCQs) -->
        <button id="skip-button" class="action-button hidden">Skip Question</button>

        <button id="next-button" class="action-button hidden">Next Question</button>

        <div id="final-score" class="hidden">
            <h2>Game Over!</h2>
            <p>Your final score for this lesson is: <span id="final-score-text">0</span> / <span
                    id="final-total-text">0</span></p>
            <button id="download-mistakes-pdf" class="action-button hidden">Download Review PDF</button>
            <!-- Add the "Export All" button here -->
            <button id="export-all-pdf-button" class="action-button hidden">Export All Questions with Answers</button>
            <button id="restart-button" class="action-button">Choose Another Lesson</button>
        </div>

        <div id="quote-area">
            <p id="current-quote"></p>
        </div>
    </div>

    <!-- Embedded JavaScript -->
    <script>
        // Define the lesson topic(s) based on the new PDF
	    const Topics = {
    PLANT_TROPISM_SENSATION: 'Plant Tropism and Sensation',
    NERVOUS_SYSTEM_STRUCTURE: 'Nervous System Structure (Neurons and Neuroglia)',
    NERVOUS_SYSTEM_PHYSIOLOGY: 'Nerve Impulse Transmission (Polarization, Action Potential)',
};

// Helper function to add location tag
const addLocation = (text, location) => `${text}<sub>(${location})</sub>`;

const allQuestions = [
    // Fourth Week Class Performance (Page 1)
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("1- The swollen (Pulvinous) in mimosa plant represent the role of ............ in human.", "Fourth Week Class Performance"),
        options: ["a- muscles", "b- joints", "c- ligaments", "d- bones"],
        correctAnswer: 1,
        correctAnswerText: "b- joints",
        explanation: "The pulvinus, a motor organ in Mimosa, allows for bending and movement through turgor changes at specific points, analogous to how joints in the human skeleton enable movement at articulation points.<br><br><b>Why this answer is correct:</b> Pulvini functionally resemble joints in allowing movement at specific points.<br><br><b>Why other options are incorrect:</b><br>a- Muscles generate force; the pulvinus acts more like the point of movement.<br>c- Ligaments stabilize joints, they don't cause movement.<br>d- Bones provide structure, movement happens at joints."
    },
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("2- In which of the following living organisms does the process of sensation appear more clearly?", "Fourth Week Class Performance"),
        options: ["a- apples", "b- mimosa", "c- rabbit", "d- oats"],
        correctAnswer: 1,
        correctAnswerText: "b- mimosa",
        explanation: "The rapid, dramatic folding of Mimosa leaves in response to touch (thigmonasty) is a highly visible demonstration of sensation compared to the subtler responses in the other options.<br><br><b>Why this answer is correct:</b> Mimosa exhibits rapid and clearly visible touch responses.<br><br><b>Why other options are incorrect:</b><br>a- Apples are fruits; the plant's sensation is less dramatic.<br>c- Rabbits have complex sensation, but Mimosa is a classic plant example of clear, observable response.<br>d- Oats show slower growth-based responses (tropisms)."
    },
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("3- Which of the following happen when the growing plant is exposed to light from the right side?", "Fourth Week Class Performance"),
        options: ["a- the stem moves to the left and the root to the right", "b- the stem moves to the right and the root to the left", "c- the stem and root move to the right direction", "d- the stem and root move to the left direction"],
        correctAnswer: 1,
        correctAnswerText: "b- the stem moves to the right and the root to the left",
        explanation: "Stems are positively phototropic (grow towards light), while roots are negatively phototropic (grow away from light). Light from the right causes the stem to bend right and the root to grow left.<br><br><b>Why this answer is correct:</b> Stem bends towards light (right), root grows away from light (left).<br><br><b>Why other options are incorrect:</b><br>a- Stem bends right, not left.<br>c- Root grows left, not right.<br>d- Stem bends right, not left; root grows left."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\n1- The direction of the stem of growing plant towards the light.", "Fourth Week Class Performance"),
        correctAnswerText: "Positive phototropism of the stem.",
        explanation: "Growth towards a light source is defined as positive phototropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\n2- The response of the living organism to internal and external stimuli.", "Fourth Week Class Performance"),
        correctAnswerText: "Sensation.",
        explanation: "Sensation is the ability to perceive and react to stimuli."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("Write what the following expressions mean:\n3- Chemical substances that affect on plant growth and found in the growing tips.", "Fourth Week Class Performance"),
        correctAnswerText: "Auxins (or Plant hormones).",
        explanation: "Auxins are plant hormones produced in meristems that regulate growth and tropisms."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Give reasons for the following:\n1- The root is a negative phototropism.", "Fourth Week Class Performance"),
        correctAnswerText: "Roots are negatively phototropic because they grow away from light. Unilateral light causes auxin accumulation on the shaded side, which, at the concentrations present in roots, inhibits cell elongation. The illuminated side elongates more, causing the root to bend away from the light.",
        explanation: "Explains the growth direction and the inhibitory effect of auxin on root elongation."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("Give reasons for the following:\n2- The lower half of cell walls of the swollen (Pulvinous) has importance in movement.", "Fourth Week Class Performance"),
        correctAnswerText: "The motor cells in the pulvinus have cell walls with differential properties (e.g., thickness or composition) on the upper and lower sides. These differences allow for differential volume changes in response to turgor pressure changes, causing the pulvinus to bend and facilitate leaf movement.",
        explanation: "Highlights the structural basis (differential wall properties) in pulvinus cells for movement."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Mention two conditions for occurrence of phototropism.", "Fourth Week Class Performance"),
        correctAnswerText: "1. Unilateral light stimulus.\n2. A growing plant tip (like a coleoptile or stem apex) that is sensitive to light and can produce and redistribute auxin.",
        explanation: "Lists the necessary stimulus and the biological requirement for the response."
    },

    // Fourth Week Home performances (Page 2)
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("1- Define the following:\na- Sensation.\nb- Tropism", "Fourth Week Home performances"),
        correctAnswerText: "a- Sensation: The capacity of a living organism to detect and respond to stimuli from its environment or within itself.\nb- Tropism: A growth movement of a plant organ in a specific direction in response to an external stimulus.",
        explanation: "Provides definitions for sensation and tropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("2- Correct what is underlined:\na- One of the plants that show the movement of sleep and wakefulness is the <U>date palm</U>.\nb- <U>Roots</U> play the role of joints when plants respond to touch or darkness.\nc- One of the scientists who contributed to explaining the phenomenon of phototropism is the scientist <U>Malpighi</U>", "Fourth Week Home performances"),
        correctAnswerText: "a- One of the plants that show the movement of sleep and wakefulness is the <U>Mimosa (or sensitive plant)</U>.\nb- <U>Pulvini (or swollen leaf bases)</U> play the role of joints when plants respond to touch or darkness.\nc- One of the scientists who contributed to explaining the phenomenon of phototropism is the scientist <U>Darwin (or Went)</U>",
        explanation: "Corrects factual errors regarding plant movements and key scientists in phototropism research."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("3- Give reasons for the following:\na- The phenomenon of wilting occurs when touching a mimosa plant\nb- The importance of the sensation's property for a living organism", "Fourth Week Home performances"),
        correctAnswerText: "a- Touching a mimosa plant triggers rapid ion movement in pulvinus cells, causing water to leave the cells quickly (loss of turgor pressure). This sudden decrease in turgidity leads to the rapid wilting or folding of the leaves.\nb- Sensation is crucial for survival as it allows organisms to perceive environmental changes (stimuli) and internal states, enabling adaptive responses such as finding food/water, escaping danger, coordinating internal functions, and interacting with the environment.",
        explanation: "Explains the turgor change mechanism in Mimosa and the overall adaptive value of sensation."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 4,
        question: addLocation("4- What happens when?:\na- The growing plant is exposed to light from the east direction (for each of the following):\n1) Root\n2) Stem", "Fourth Week Home performances"),
        correctAnswerText: "1) Root: The root grows away from the east light, bending towards the west (negative phototropism).\n2) Stem: The stem grows towards the east light, bending towards the east (positive phototropism).",
        explanation: "Describes the directional phototropic responses of roots and stems to unilateral light."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 4,
        question: addLocation("b- The swollen (Pulvinous) which in the leaves of the mimosa plant are disappeared.", "Fourth Week Home performances"),
        correctAnswerText: "The mimosa plant would lose its ability to perform rapid touch-induced movements and rhythmic sleep/wake movements of its leaves, as these movements are driven by the turgor changes in the pulvini.",
        explanation: "States the loss of specific leaf movements without the functional pulvini."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 4,
        question: addLocation("c- Remove the top of the oat seedling and separate it with a mica sheet", "Fourth Week Home performances"),
        correctAnswerText: "Removing the tip removes the source of auxin. The mica sheet, being impermeable, prevents any potential signal (like auxin from a replaced tip) from moving down to the bending region. As a result, the seedling will not exhibit phototropic bending.",
        explanation: "Explains the consequence of removing or blocking the signal from the tip in phototropism experiments."
    },

    // Weekly evaluation (4) A (Page 3)
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("1- The parts of the mimosa plant that do not affected by touch are ...........", "Weekly evaluation 4 A"),
        options: ["a- Leaflets.", "b- Swollen leaf bases.", "c- The stem.", "d- Secondary axes"],
        correctAnswer: 2,
        correctAnswerText: "c- The stem.",
        explanation: "The rapid touch response is localized to the leaf structures (leaflets, pulvini, rachises), not the main stem.<br><br><b>Why this answer is correct:</b> The stem does not show the dramatic, rapid touch response like the leaves.<br><br><b>Why other options are incorrect:</b><br>a- Leaflets fold upon touch.<br>b- Pulvini are the motor organs that drive the movement upon touch.<br>d- Secondary axes droop due to pulvini at their base."
    },
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("2- Increasing the concentration of auxins leads to....", "Weekly evaluation 4 A"),
        options: ["a- Increased elongation of root cells.", "b- Increased elongation of the stem cells.", "c- Decrease in stem cell elongation.", "d- Inhibition of root cell elongation."],
        correctAnswer: 3,
        correctAnswerText: "d- Inhibition of root cell elongation.",
        explanation: "Higher auxin concentrations inhibit elongation in roots due to their greater sensitivity compared to stems.<br><br><b>Why this answer is correct:</b> Auxin inhibits root elongation at high concentrations.<br><br><b>Why other options are incorrect:</b><br>a- Auxin inhibits root elongation at these levels.<br>b- Auxin increases stem elongation (up to optimum).<br>c- Auxin increases stem elongation."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\na- The growing plant responds to an external stimulus, which is Earth's gravity, so plant organs move toward or away from it. (.................)", "Weekly evaluation 4 A"),
        correctAnswerText: "Geotropism (or Gravitropism).",
        explanation: "Definition of geotropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\nb- The scientist who built his explanation of phototropism through his observations and conclusions from his experiments that he conducted on the coleoptile of the oat seedling. (................)", "Weekly evaluation 4 A"),
        correctAnswerText: "Charles Darwin and Francis Darwin.",
        explanation: "The Darwins conducted pioneering experiments on oat coleoptiles regarding phototropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("Give reasons for the following:\nThe movement of the mimosa plant depends on internal and external factors.", "Weekly evaluation 4 A"),
        correctAnswerText: "External stimuli (touch, light) trigger internal physiological changes (ion fluxes, turgor changes in pulvinus cells) that result in the visible movement.",
        explanation: "Explains the interaction of external triggers and internal mechanisms in Mimosa movement."
    },

    // Weekly evaluation (4) B (Page 4)
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("1- The mimosa plant has ............ looks like the function of human joints.", "Weekly evaluation 4 B"),
        options: ["a- Leaflets.", "b- Primary rachis.", "c- Secondary rachis.", "d- Swollen (Pulvinous)."],
        correctAnswer: 3,
        correctAnswerText: "d- Swollen (Pulvinous).",
        explanation: "The pulvinus acts functionally like a joint in Mimosa.<br><br><b>Why this answer is correct:</b> Pulvinus is the joint-like structure.<br><br><b>Why other options are incorrect:</b><br>a- Leaflets move.<br>b, c - Rachises are parts of the leaf that bend at pulvini."
    },
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("2- How many rows of leaflets hang down when there is a contraction of the first swollen (pulvinus) of a leaf in the mimosa plant?", "Weekly evaluation 4 B"),
        options: ["a-4.", "b-8.", "c- 16.", "d-32."],
        correctAnswer: 2,
        correctAnswerText: "c- 16.",
        explanation: "Assuming a leaf with 8 pinnae, each having 2 rows of leaflets, contraction of pinna pulvini causes 8 pinnae * 2 rows = 16 rows to hang down.<br><br><b>Why this answer is correct:</b> Calculation based on typical Mimosa leaf structure.<br><br><b>Why other options are incorrect:</b> Numbers do not fit the structure."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\na- A biological process that expresses the flowers of some plants opening during the day and closing them at night. (..............)", "Weekly evaluation 4 B"),
        correctAnswerText: "Nyctinasty (or Sleep movements).",
        explanation: "Nastic movements in response to daily light cycles."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\nb- The plant's response to an external stimulus, which is humidity, so plant organs move toward or away from it. (..................)", "Weekly evaluation 4 B"),
        correctAnswerText: "Hydrotropism.",
        explanation: "Definition of hydrotropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("Give reasons for the following:\nThe effect of auxins varies depending on their location in the plant.", "Weekly evaluation 4 B"),
        correctAnswerText: "Different plant tissues (stem vs root) have different sensitivities to auxin concentration, and auxin distribution is uneven within organs due to environmental stimuli (light, gravity), leading to differential growth.",
        explanation: "Explains differential sensitivity and uneven distribution."
    },

    // Weekly evaluation (4) C (Page 5)
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("1- The cells of ............ increase their division speed due to the accumulation of auxins in them.", "Weekly evaluation 4 C"),
        options: ["a- the stem facing the light.", "b- the root facing the light.", "c- the upper side of a root placed horizontally.", "d- the underside of a stem placed horizontally."],
        correctAnswer: 3,
        correctAnswerText: "d- the underside of a stem placed horizontally.",
        explanation: "Auxin accumulates on the lower side of a horizontal stem due to gravity, stimulating growth (elongation and related division) in that region.<br><br><b>Why this answer is correct:</b> Auxin accumulates on the lower side of a horizontal stem and stimulates growth.<br><br><b>Why other options are incorrect:</b><br>a- Less auxin, slower growth.<br>b- Less auxin on illuminated side of root.<br>c- Less auxin on upper side of horizontal root, relative inhibition on lower side where auxin accumulates."
    },
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("2- The process of feeling in plants, ...........", "Weekly evaluation 4 C"),
        options: ["a- is limited to some types, such as the mimosa.", "b- decreases as the plant structure becomes more complex.", "c- is connected to the internal and external factors.", "d- the life of the plant does not depend on it."],
        correctAnswer: 2,
        correctAnswerText: "c- is connected to the internal and external factors.",
        explanation: "Sensation involves receiving external stimuli and triggering internal physiological responses.<br><br><b>Why this answer is correct:</b> Sensation requires both external perception and internal processing/response.<br><br><b>Why other options are incorrect:</b><br>a- Sensation is widespread in plants.<br>b- Complexity doesn't necessarily decrease sensation.<br>d- Sensation is vital for survival."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\na- A structure found in the mimosa plant and similar to the functioning of the joints in humans (.........)", "Weekly evaluation 4 C"),
        correctAnswerText: "Pulvinous (or Pulvinus).",
        explanation: "Definition of pulvinus."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\nb- The plant's response to an external stimulus, which is light, so plant organs move towards it or away from it. (....................)", "Weekly evaluation 4 C"),
        correctAnswerText: "Phototropism.",
        explanation: "Definition of phototropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("3- What happens when the Pulvinous is absent from the leaves of the mimosa plant?", "Weekly evaluation 4 C"),
        correctAnswerText: "The plant would lose its ability to perform rapid touch-induced and sleep movements of the leaves.",
        explanation: "States the consequence of lacking pulvini."
    },

    // Fifth Week Class Performance (Page 6)
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("1- The figure in front of you shows the growing tip of a plant stem and the distribution of auxins in it. Determine the direction in which the sunlight fall on this growing tip?", "Fifth Week Class Performance"),
        options: ["a- From the right", "c- Vertically", "b- From the left", "d- Horizontally"],
        correctAnswer: 0,
        correctAnswerText: "a- From the right",
        explanation: "Auxin moves away from light. Accumulation on the left means light came from the right.<br><br><b>Why this answer is correct:</b> Auxin is on the shaded side (left), meaning light is from the right.<br><br><b>Why other options are incorrect:</b><br>b- Light from left would accumulate auxin on the right.<br>c- Vertical light gives even distribution.<br>d- 'Horizontally' needs a direction."
    },
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("2- Which of the following occurs when the amount of indole acetic acid increased in the growing tips of the roots of a plant...", "Fifth Week Class Performance"),
        options: ["a- The elongation of root cells increased.", "c- Elongation of stem cells increased.", "b- Elongation of root cells inhibited.", "d- Elongation of stem cells inhibited."],
        correctAnswer: 2,
        correctAnswerText: "b- Elongation of root cells inhibited.",
        explanation: "Increased auxin levels inhibit root elongation.<br><br><b>Why this answer is correct:</b> Roots are inhibited by high auxin.<br><br><b>Why other options are incorrect:</b><br>a- Inhibition occurs.<br>c- Stem elongation increases with auxin.<br>d- Stem elongation increases."
    },
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("3- Which of the following occurs when the root of a growing plant is exposed to irrigation from one direction?", "Fifth Week Class Performance"),
        options: ["a- the stem bends towards the water.", "b- the stem bends against the direction of the water", "c- the root bends towards the water.", "d- the root bends against the direction of the water."],
        correctAnswer: 2,
        correctAnswerText: "c- the root bends towards the water.",
        explanation: "Roots show positive hydrotropism.<br><br><b>Why this answer is correct:</b> Roots grow towards water.<br><br><b>Why other options are incorrect:</b><br>a, b - Stems are not hydrotropic.<br>d- Roots grow towards water."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Write what the following statments mean:\n1- The scientist who conducted experiments to verify Boysen-Jensen's experiments.", "Fifth Week Class Performance"),
        correctAnswerText: "Frits Went.",
        explanation: "Went's experiments confirmed Boysen-Jensen's findings and isolated auxin."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("Write what the following statments mean:\n2- The plant's response to an external stimulus, which is humidity, so plant organs move toward or away from it.", "Fifth Week Class Performance"),
        correctAnswerText: "Hydrotropism.",
        explanation: "Definition of hydrotropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Give reasons for the following:\n1- The root is a positive geotropic.", "Fifth Week Class Performance"),
        correctAnswerText: "Roots grow downwards towards gravity. Gravity causes auxin to accumulate on the lower side of a horizontal root, inhibiting elongation. The upper side elongates more, causing the root to bend down.",
        explanation: "Explains downward growth and the auxin inhibition mechanism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("Give reasons for the following:\n2- The effect of auxins varies depending on their location in the plant.", "Fifth Week Class Performance"),
        correctAnswerText: "Different tissues (root vs stem) have different sensitivities to auxin concentration. Uneven distribution due to stimuli also causes differential growth in different areas.",
        explanation: "Explains differential sensitivity and uneven distribution."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("Give reasons for the following:\n3- The growing stem is not affected when the plant is placed in an upright position.", "Fifth Week Class Performance"),
        correctAnswerText: "In a vertical position, auxin distribution is symmetrical. This causes uniform elongation on all sides, resulting in straight growth without bending.",
        explanation: "Explains that symmetrical auxin distribution leads to straight growth."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("The figure in front of you contains a mistake. Identify the mistake with an explanation:\n1- The mistake:\n2- The explanation:", "Fifth Week Class Performance"),
        correctAnswerText: "1- The mistake: The stem bends horizontally towards the right when the light source is shown vertically overhead.\n2- The explanation: Vertical light should cause a stem to grow straight upwards (positive phototropism), not bend horizontally.",
        explanation: "Identifies inconsistency between light source and stem bending."
    },

    // Fifth Week Home performances (Page 7)
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("1- Define the following:\na- Auxins.\nb- Geotropism.", "Fifth Week Home performances"),
        correctAnswerText: "a- Auxins: Plant hormones primarily stimulating cell elongation and differentiation. b- Geotropism (or Gravitropism): Growth response to gravity.",
        explanation: "Provides definitions."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("2- Give reasons for the following:\na- The root is a positive hydrotropism.\nb- Root cells far from light do not elongate despite the increase in the percentage of auxins in them.", "Fifth Week Home performances"),
        correctAnswerText: "a- Roots grow towards water to absorb it, which is essential for plant survival.<br>b- Root cells are highly sensitive; increased auxin above the optimum level inhibits elongation, even without light influence.",
        explanation: "Explains the adaptive value of hydrotropism and auxin's inhibitory effect on root elongation."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("3- Explain the relationship between each two:\na- The geotropism of the root and the percentage of auxins in its growing apex\nb- The direction of sunlight to which the plant is exposed and the direction of stem growth", "Fifth Week Home performances"),
        correctAnswerText: "a- Gravity causes auxin accumulation on the lower side of a root apex. High auxin inhibits root elongation on the lower side, causing the root to bend down (positive geotropism).<br>b- Unilateral sunlight causes auxin to move to the shaded side of the stem. High auxin stimulates stem elongation on the shaded side, causing the stem to bend towards the light (positive phototropism).",
        explanation: "Explains how auxin distribution mediates root geotropism and stem phototropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 4,
        question: addLocation("4- What happens when?:\nThe growing tip in front of you was exposed to moisture from one side. Determine the effect of this on the growth of the developing growing tip if it is located in:\n1- The root.\n2- The stem.", "Fifth Week Home performances"),
        correctAnswerText: "1- The root: It will exhibit positive hydrotropism and grow towards the source of moisture.\n2- The stem: It will not show hydrotropism; its growth direction is governed by light and gravity.",
        explanation: "Describes the presence of hydrotropism in roots and its absence in stems."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 5,
        question: addLocation("5- The figure in front of you contains a mistake. Identify the mistake with an explanation:\n1- The mistake.\n2- The explanation:", "Fifth Week Home performances"),
        correctAnswerText: "1- The mistake: The roots are shown growing upwards, out of the pot.\n2- The explanation: Roots are positively geotropic and should grow downwards into the soil in response to gravity.",
        explanation: "Identifies and explains the incorrect depiction of root geotropism."
    },

    // Weekly evaluation (5) A (Page 8)
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("1- It happens in phototropism and geotropism to roots in the horizontal position.", "Weekly evaluation 5 A"),
        options: ["a- auxins act in the same direction as the effect.", "b- auxins move away from the effector.", "c- auxins stop cells from growing.", "d- auxins stimulate cells to grow."],
        correctAnswer: 2,
        correctAnswerText: "c- auxins stop cells from growing.",
        explanation: "Auxin accumulation in roots inhibits cell elongation on that side, effectively slowing or 'stopping' growth relative to the other side.<br><br><b>Why this answer is correct:</b> Auxin inhibits root elongation at high concentrations.<br><br><b>Why other options are incorrect:</b><br>a- Effect (bending) is towards accumulation side, but growth effect (inhibition) is localized.<br>b- Auxins redistribute towards the shaded/lower side.<br>d- Auxins inhibit root growth at these concentrations."
    },
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("2- Which of the following statements agree with the nature of the action of auxins?", "Weekly evaluation 5 A"),
        options: ["a- Whenever its concentration in the root cells increases, it stimulates their elongation.", "b- Whenever its concentration in the stem cells decreases, it inhibits their elongation..", "c- It is not affected by external influences in all circumstances.", "d- It flows from top to bottom in the horizontal position of the gesture."],
        correctAnswer: 1,
        correctAnswerText: "b- Whenever its concentration in the stem cells decreases, it inhibits their elongation..",
        explanation: "Auxin stimulates stem elongation. Less auxin means less stimulation, thus inhibited elongation compared to higher levels.<br><br><b>Why this answer is correct:</b> Lower auxin levels result in less stem elongation.<br><br><b>Why other options are incorrect:</b><br>a- Increased auxin inhibits root elongation.<br>c- Auxin distribution is affected by external factors.<br>d- Lateral transport occurs in horizontal stems, not just top-to-bottom flow."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\n1- Chemicals substances secreted by the growing tip of the plant and greatly affected by external conditions.", "Weekly evaluation 5 A"),
        correctAnswerText: "Auxins (or Plant hormones).",
        explanation: "Auxins are produced in growing tips and their distribution is influenced by environmental stimuli."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\n2- The response of the growing plant to an external stimulus, which is Earth's gravity, so plant organs move toward or away from it.", "Weekly evaluation 5 A"),
        correctAnswerText: "Geotropism (or Gravitropism).",
        explanation: "Definition of geotropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Give reasons for the following:\n1- When the plant is in the vertical (natural) position, the stem grows straight up and the root grows down.", "Weekly evaluation 5 A"),
        correctAnswerText: "In a vertical position, gravity and light are symmetrical, leading to uniform auxin distribution. Uniform auxin in the stem causes uniform elongation (straight up). Uniform auxin in the root allows for normal downward growth (positive geotropism).",
        explanation: "Explains straight growth due to symmetrical stimuli and auxin distribution."
    },

    // Weekly evaluation (5) B (Page 9)
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("1- Cells whose division rate increases due to the accumulation of auxin in them are...", "Weekly evaluation 5 B"),
        options: ["a- the side of the stem facing the light.", "b- the side of the root facing the light.", "c- the upper side of a horizontally placed root.", "d- the underside of a stem placed horizontally."],
        correctAnswer: 3,
        correctAnswerText: "d- the underside of a stem placed horizontally.",
        explanation: "Auxin accumulates on the lower side of a horizontal stem, stimulating growth and cell division/elongation there.<br><br><b>Why this answer is correct:</b> Auxin accumulation on the lower side of a horizontal stem promotes growth.<br><br><b>Why other options are incorrect:</b><br>a- Less auxin, slower growth.<br>b- Less auxin on illuminated side of root.<br>c- Less auxin on upper side of horizontal root."
    },
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("2- Which of the following statements is incorrect?", "Weekly evaluation 5 B"),
        options: ["a- The stem is positive for phototropism.", "b- The stem is negative in geotropism.", "c- The root is negative for phototropism.", "d- The root has positive geotropism"],
        correctAnswer: null,
        correctAnswerText: "Question is flawed, all statements are correct.",
        explanation: "All options correctly describe plant tropisms."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\n1- The plant's response to an external stimulus, which is humidity, so plant organs move toward or away from it.", "Weekly evaluation 5 B"),
        correctAnswerText: "Hydrotropism.",
        explanation: "Definition of hydrotropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\n2- The tip of the stem bends upward against the Earth's gravity when the plant is in a horizontal position.", "Weekly evaluation 5 B"),
        correctAnswerText: "Negative geotropism of the stem.",
        explanation: "Describes negative geotropism in a horizontal stem."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("Give reasons for the following:\nThe root is a positive hydrotropic.", "Weekly evaluation 5 B"),
        correctAnswerText: "Roots grow towards water to ensure the plant can absorb the necessary water and nutrients for survival and physiological processes.",
        explanation: "Explains the adaptive value of positive hydrotropism in roots."
    },

    // Weekly evaluation (5) C (Page 10)
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("1- Which of the following statements does not apply to auxins?", "Weekly evaluation 5 C"),
        options: ["a- It is greatly affected by environmental factors.", "b- It cannot enter during the blocks of agar.", "c- It is used by humans to increase the rate of plant growth.", "d- Chemicals substances secreted by plant buds."],
        correctAnswer: 1,
        correctAnswerText: "b- It cannot enter during the blocks of agar.",
        explanation: "Auxin readily diffuses through agar.<br><br><b>Why this answer is correct:</b> Auxin passes through agar.<br><br><b>Why other options are incorrect:</b><br>a- Auxin distribution is affected by light/gravity.<br>c- Synthetic auxins are used in horticulture.<br>d- Auxins are produced in buds."
    },
    {
        type: 'mcq',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("2- Which of the following cases has a tropism opposite to the direction of auxin accumulation?", "Weekly evaluation 5 C"),
        options: ["a- A stem placed horizontally and another vertically exposed to light from one side.", "b- A root placed horizontally and another vertically exposed to water from one side.", "c- A stem and root in an upright position exposed to light from one side.", "d- A stem and root in a horizontal position."],
        correctAnswer: 0,
        correctAnswerText: "a- A stem placed horizontally and another vertically exposed to light from one side.",
        explanation: "Stem tropisms result in bending away from auxin accumulation (lower side in horizontal, shaded side in unilateral light). Root tropisms bend towards auxin accumulation (lower side in horizontal, shaded side in unilateral light). Option (a) lists only stem scenarios.<br><br><b>Why this answer is correct:</b> Both stem geotropism and phototropism bend away from auxin accumulation.<br><br><b>Why other options are incorrect:</b><br>b, c, d - These include root tropisms which bend towards accumulation."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\n1- The root tip bends downward with gravity when the plant is in a horizontal position.", "Weekly evaluation 5 C"),
        correctAnswerText: "Positive geotropism of the root.",
        explanation: "Describes positive geotropism in a horizontal root."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\n2- The response of the growing plant to an external stimulus, which is Earth's gravity, so plant organs move toward or away from it.", "Weekly evaluation 5 C"),
        correctAnswerText: "Geotropism (or Gravitropism).",
        explanation: "Definition of geotropism."
    },
    {
        type: 'essay',
        topic: Topics.PLANT_TROPISM_SENSATION,
        originalNumber: 3,
        question: addLocation("Give reasons for the following:\nStems are negative in geotropism.", "Weekly evaluation 5 C"),
        correctAnswerText: "Stems grow upwards, away from gravity. Gravity causes auxin to accumulate on the lower side of a horizontal stem, which stimulates elongation more than the upper side, causing upward bending.",
        explanation: "Explains upward growth and differential stimulation by auxin."
    },

    // Sixth Week Class Performance (Page 11)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("1- The cells that transmit nerve impulses from the peripheral nervous system to the central nervous system are ...........", "Sixth Week Class Performance"),
        options: ["a- Sensory neurons", "c- Connector neurons", "b- Motor neurons", "d- Neuroglia"],
        correctAnswer: 0,
        correctAnswerText: "a- Sensory neurons",
        explanation: "Sensory neurons carry afferent signals from the PNS to the CNS.<br><br><b>Why this answer is correct:</b> Sensory neurons transmit PNS to CNS.<br><br><b>Why other options are incorrect:</b><br>b- Motor transmit CNS to PNS.<br>c- Connector are within CNS.<br>d- Neuroglia are support."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("2- The part of the cell that transmits the nerve impulse away from the cell body is is.....", "Sixth Week Class Performance"),
        options: ["a- Schwann cells", "c- Nerve ending", "b- dendrites", "d- Ranvier nodes"],
        correctAnswer: 2,
        correctAnswerText: "c- Nerve ending",
        explanation: "The axon transmits away; the nerve ending is the terminal part of the axon where transmission to the next cell occurs.<br><br><b>Why this answer is correct:</b> Nerve ending transmits the impulse to the next cell, away from the cell body.<br><br><b>Why other options are incorrect:</b><br>a- Schwann cells form myelin.<br>b- Dendrites transmit towards cell body.<br>d- Nodes are gaps in myelin."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 3,
        question: addLocation("3- The absence of Schwann cells from the nerve axons leads to ...................", "Sixth Week Class Performance"),
        options: ["a- increased speed of the nerve impulse", "b- stopped speed of the nerve impulse", "c- non-division of nerve cells", "d- decreased speed of the nerve impulse"],
        correctAnswer: 3,
        correctAnswerText: "d- decreased speed of the nerve impulse",
        explanation: "Myelin sheath (formed by Schwann cells) speeds up conduction via saltatory conduction. Without it, conduction is slower.<br><br><b>Why this answer is correct:</b> Myelination increases speed; absence decreases it.<br><br><b>Why other options are incorrect:</b><br>a- Speed decreases.<br>b- Conduction still occurs, just slower.<br>c- Non-division of neurons is due to lack of centrosome."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("Write what the following statments mean:\n1- Many short processes, exit from the body of the nerve cell to increase the surface of the nerve area.", "Sixth Week Class Performance"),
        correctAnswerText: "Dendrites.",
        explanation: "Dendrites are branched processes for receiving signals."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("Write what the following statments mean:\n2- Cells that transmit nerve impulses from the central nervous system to the response organs.", "Sixth Week Class Performance"),
        correctAnswerText: "Motor neurons.",
        explanation: "Motor neurons carry efferent signals from CNS to effectors."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 3,
        question: addLocation("Write what the following statments mean:\n3- A long cytoplasmic extension that may reach more than a meter and end with nerve endings.", "Sixth Week Class Performance"),
        correctAnswerText: "Axon.",
        explanation: "The axon is the long projection carrying impulses away."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("What happens when:\n1- The absence of the connector neurons from the nervous tissue.", "Sixth Week Class Performance"),
        correctAnswerText: "Integration between sensory and motor pathways would be impaired, disrupting complex reflexes and processing within the CNS.",
        explanation: "Explains the role of interneurons in linking pathways."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 2,
        question: addLocation("What happens when:\n2- A cutting occurs in the cell axon at the nodes of Ranvier.", "Sixth Week Class Performance"),
        correctAnswerText: "Nerve impulse transmission would be blocked at the site of the cut, preventing the signal from propagating further along the axon.",
        explanation: "Explains that axonal damage disrupts conduction."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("Mention the function of each of the following:\n1- The axon of the nerve cell.\n2- Nissil granules in the body of the nerve cell.", "Sixth Week Class Performance"),
        correctAnswerText: "1- Transmits nerve impulses away from the cell body. 2- Sites of protein synthesis.",
        explanation: "States key functions."
    },

    // Sixth Week Home performances (Page 12)
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("1- Define the following:\na- Myelin sheath\nb- Neurolemma.", "Sixth Week Home performances"),
        correctAnswerText: "a- Myelin sheath: Insulating layer around axons increasing impulse speed. b- Neurolemma: Outer membrane of Schwann cell surrounding axon/myelin in PNS, involved in regeneration.",
        explanation: "Provides definitions."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("2- Give reasons for the following:\na- Many short process emerge from the cell body (dendrites).\nb- Axons covered with myelin sheath transmit nerve impulses faster than nonmyelinated axons.\nc- Connector neurons (intermediate) are called by this name.", "Sixth Week Home performances"),
        correctAnswerText: "a- To increase the receptive surface area for receiving signals from other neurons.<br>b- Myelin allows for saltatory conduction, where the impulse jumps between Nodes of Ranvier, increasing speed.<br>c- They connect sensory and motor neurons within the CNS, acting as intermediates.",
        explanation: "Explains functional advantages of dendrites, myelin, and the role of interneurons."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 3,
        question: addLocation("3- Explain the following:\na- Nerve impulses always pass in one direction.\nb- The structure of the nerve cell body.", "Sixth Week Home performances"),
        correctAnswerText: "a- Unidirectional transmission at synapses, where neurotransmitters are released from the axon terminal and received by the postsynaptic membrane, ensures one-way flow.<br>b- Contains nucleus, RER (Nissl granules), Golgi, mitochondria; site of metabolism and signal integration.",
        explanation: "Explains unidirectional flow and cell body structure/function."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 4,
        question: addLocation("4- What are the consequences of :\na- The absence of a central body (centrosome) in the nerve cell.\nb- The destruction of Schwann cells.", "Sixth Week Home performances"),
        correctAnswerText: "a- Inability to undergo cell division (mitosis).<br>b- Demyelination of axons in PNS, severely slowing or blocking impulse conduction.",
        explanation: "States consequences of lacking centrosomes and losing Schwann cells."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 5,
        question: addLocation("5- Compare between sensory neurons and motor neurons.\n\nsensory neurons\nmotor neurons", "Sixth Week Home performances"),
        correctAnswerText: "Sensory: Receptor to CNS (afferent), cell bodies often in ganglia. Motor: CNS to effector (efferent), cell bodies in CNS or autonomic ganglia.",
        explanation: "Compares based on signal direction and cell body location."
    },

    // Weekly evaluation (6) A (Page 13)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("1- Both ..... and ..... receive nerve impulses in nerve cells.", "Weekly evaluation 6 A"),
        options: ["a- the cell axon and nerve endings.", "b- the cell body and dendrites.", "c- dendrites and nerve endings.", "d- the cell body and nerve endings."],
        correctAnswer: 1,
        correctAnswerText: "b- the cell body and dendrites.",
        explanation: "Dendrites and the cell body are the receptive areas of the neuron, receiving synaptic input.<br><br><b>Why this answer is correct:</b> Dendrites and cell body receive signals.<br><br><b>Why other options are incorrect:</b><br>a- Axon transmits away, nerve endings transmit to other cells.<br>c, d - Nerve endings transmit signals."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("2- The ........ transmits nerve impulses away from the cell body through synapses.", "Weekly evaluation 6 A"),
        options: ["a- axons.", "b- dendrites.", "c- the cell body.", "d- Nissil granules."],
        correctAnswer: 0,
        correctAnswerText: "a- axons.",
        explanation: "The axon conducts impulses away from the cell body to the synapse.<br><br><b>Why this answer is correct:</b> Axon transmits away.<br><br><b>Why other options are incorrect:</b><br>b- Dendrites receive.<br>c- Cell body integrates.<br>d- Nissl granules are for synthesis."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\n1- Cells that transmit nerve impulses from the receptor organs to the central nervous system.", "Weekly evaluation 6 A"),
        correctAnswerText: "Sensory neurons.",
        explanation: "Sensory neurons carry signals from receptors to CNS."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\n2- Fine granules found only in the nerve cell, and are believed to be stored food that the cell consumes during its activity.", "Weekly evaluation 6 A"),
        correctAnswerText: "Nissl granules.",
        explanation: "Describes Nissl granules (RER and ribosomes)."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 3,
        question: addLocation("Give reasons for the following:\nNerve cells do not have the ability to divide.", "Weekly evaluation 6 A"),
        correctAnswerText: "Most mature nerve cells lack a centrosome, which is required for cell division.",
        explanation: "Explains lack of centrosome prevents division."
    },

    // Weekly evaluation (6) B (Page 14)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("1- The ............ is fine granules found only in the nerve cell, and are believed to be stored food consumed by the cell during its activity.", "Weekly evaluation 6 B"),
        options: ["a- Nissil granules.", "b- Schwann cells.", "c- Neurolemma.", "d- Cell body."],
        correctAnswer: 0,
        correctAnswerText: "a- Nissil granules.",
        explanation: "Matches the description for Nissl granules.<br><br><b>Why this answer is correct:</b> Description fits Nissl granules.<br><br><b>Why other options are incorrect:</b><br>b- Glial cells. c- Membrane. d- Part of cell."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("2- The myelin sheath is interrupted at certain points of constrictions called ...", "Weekly evaluation 6 B"),
        options: ["a- Nodes of Ranvier.", "b- Neurolemma.", "c- Dendrites.", "D- Nissil granules."],
        correctAnswer: 0,
        correctAnswerText: "a- Nodes of Ranvier.",
        explanation: "Nodes of Ranvier are gaps in myelin.<br><br><b>Why this answer is correct:</b> Nodes of Ranvier are interruptions in myelin.<br><br><b>Why other options are incorrect:</b><br>b- Outer membrane. c- Receiving processes. d- Protein synthesis sites."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\n1- Cells that transmit nerve impulses from the central nervous system to the response organs.", "Weekly evaluation 6 B"),
        correctAnswerText: "Motor neurons.",
        explanation: "Motor neurons carry signals from CNS to effectors."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\n2- A thin layer that covers the myelin sheath from the outside.", "Weekly evaluation 6 B"),
        correctAnswerText: "Neurolemma.",
        explanation: "Neurolemma is the outer membrane of Schwann cells."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 3,
        question: addLocation("Give reasons for the following:\nThe body of the nerve cell has many dendrites.", "Weekly evaluation 6 B"),
        correctAnswerText: "To increase the receptive surface area for receiving synaptic input from multiple other neurons.",
        explanation: "Explains structural adaptation for signal reception."
    },

    // Weekly evaluation (6) C (Page 15)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("1- A long cytoplasmic extension that may reach more than a meter is .....", "Weekly evaluation 6 C"),
        options: ["a- Dendrites.", "b- Axon.", "c- Nerve fibers.", "d- Nissil granules."],
        correctAnswer: 1,
        correctAnswerText: "b- Axon.",
        explanation: "Axons can be very long.<br><br><b>Why this answer is correct:</b> Axons are the long neuronal processes.<br><br><b>Why other options are incorrect:</b><br>a- Dendrites are short. c- Nerve fiber is an axon with sheaths. d- Nissl granules are in cell body."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("2- Terminal arbonizations transmit nerve impulses away from the cell body through...... .", "Weekly evaluation 6 C"),
        options: ["a- Synapse.", "b- Dendrites.", "c- Cell body.", "d- Nissil granules."],
        correctAnswer: 0,
        correctAnswerText: "a- Synapse.",
        explanation: "Transmission to the next cell occurs at the synapse.<br><br><b>Why this answer is correct:</b> Synapse is the junction for transmission.<br><br><b>Why other options are incorrect:</b><br>b- Dendrites receive. c- Cell body processes. d- Nissl granules are for synthesis."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\n1- Cells that are the link between sensory cells and motor cells.", "Weekly evaluation 6 C"),
        correctAnswerText: "Connector neurons (or Interneurons).",
        explanation: "Interneurons bridge sensory and motor pathways."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\n2- Tiny granules found only in the nerve cell, and it is believed that they are stored food that the cell consumes during its activity.", "Weekly evaluation 6 C"),
        correctAnswerText: "Nissl granules.",
        explanation: "Repeats description of Nissl granules."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 3,
        question: addLocation("Give reasons for the following:\nThe nerve impulses always pass in one direction.", "Weekly evaluation 6 C"),
        correctAnswerText: "The unidirectional nature of synaptic transmission, where neurotransmitters are released from the presynaptic axon terminal and received by the postsynaptic membrane, ensures the signal travels in one direction.",
        explanation: "Explains that synaptic structure dictates unidirectional flow."
    },

    // Seventh Week Class Performance (Page 16)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("1- Cells that comprise nervous tissue and are characterized by their ability to divide are........", "Seventh Week Class Performance"),
        options: ["a- sensory neurons", "c- conducting neurons", "b- motor neurons", "d- neuroglia cells"],
        correctAnswer: 3,
        correctAnswerText: "d- neuroglia cells",
        explanation: "Neuroglia are the non-neuronal, dividing cells in nervous tissue.<br><br><b>Why this answer is correct:</b> Neuroglia retain mitotic activity.<br><br><b>Why other options are incorrect:</b><br>a, b, c - Mature neurons do not divide."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("2. The ................... is composed of a group of nerve bundles, each of which consists of a group of nerve fibers.", "Seventh Week Class Performance"),
        options: ["a- Schwann cells", "c- nerve ending", "b- dendritic appendage", "d- nerve"],
        correctAnswer: 3,
        correctAnswerText: "d- nerve",
        explanation: "A nerve is a structure containing bundles (fascicles) of axons (nerve fibers).<br><br><b>Why this answer is correct:</b> Definition of a nerve.<br><br><b>Why other options are incorrect:</b><br>a- Glial cells. b- Part of neuron. c- Part of axon."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 3,
        question: addLocation("3- The message transmitted by nerves from the sensory organs to the central nervous system and from there to the response organs is the .................", "Seventh Week Class Performance"),
        options: ["a- nerve", "c- nerve impulse", "b- nerve ending", "d- neuroglia"],
        correctAnswer: 2,
        correctAnswerText: "c- nerve impulse",
        explanation: "The electrical signal itself is the nerve impulse.<br><br><b>Why this answer is correct:</b> Nerve impulse is the signal.<br><br><b>Why other options are incorrect:</b><br>a- Structure. b- Location of transmission. d- Support cells."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 4,
        question: addLocation("4. The concentration of sodium ions (Na+) outside the cell is ............ times higher than its concentration inside the cell.", "Seventh Week Class Performance"),
        options: ["a-10:15", "b-5:9", "c- 15:20", "d-20:30"],
        correctAnswer: null,
        correctAnswerText: "Question flawed, options formatted incorrectly.",
        explanation: "The ratio of Na+ outside to inside is typically 10-15:1. The options present ranges that are not ratios."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\n1- The resting state of a nerve cell, when its outer surface is positive and its inner surface is negative.", "Seventh Week Class Performance"),
        correctAnswerText: "Polarization.",
        explanation: "Definition of polarization (resting state)."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\n2- A sheath of connective tissue supplied with blood vessels that encloses the bundles of nerve fibers.", "Seventh Week Class Performance"),
        correctAnswerText: "Perineurium (or Epineurium).",
        explanation: "Connective tissue sheath around fascicles or nerve."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 3,
        question: addLocation("Write what the following expressions mean:\n3- Ions its concentration inside the nerve cell is 30 times greater than its concentration in the extracellular fluid surrounding the cell.", "Seventh Week Class Performance"),
        correctAnswerText: "Potassium ions (K+).",
        explanation: "K+ is highly concentrated inside the neuron."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Give reason for each of the following:\n1- The concentration of negative ions inside the nerve cell is much higher than its concentration outside.", "Seventh Week Class Performance"),
        correctAnswerText: "Due to large, trapped intracellular negative proteins and organic anions.",
        explanation: "Explains source of internal negativity."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("Give reason for each of the following:\n2- The role of the connector neuron differs from that of the neuroglia in its connecting function.", "Seventh Week Class Performance"),
        correctAnswerText: "Connector neurons connect by transmitting impulses and integrating information. Neuroglia connect structurally, providing support and binding tissue.",
        explanation: "Distinguishes functional vs structural connection."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("Compare between neurons and neuroglia cells in terms of function.", "Seventh Week Class Performance"),
        correctAnswerText: "Neurons: Transmit nerve impulses. Neuroglia: Support, nourish, insulate, and protect neurons; do not transmit impulses.",
        explanation: "Compares primary functions."
    },

    // Seventh Week Home performances (Page 17)
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("1- Define the following:\na- Neuroglia.\nb- The nerve.\nc- Nerve impulse.\nd- Polarization.", "Seventh Week Home performances"),
        correctAnswerText: "a- Neuroglia: Supporting cells in nervous tissue. b- The nerve: Bundle of axons in PNS. c- Nerve impulse: Propagating electrical signal. d- Polarization: Resting state membrane potential (-70mV).",
        explanation: "Provides definitions."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("2- Give reasons for the following:\na- Neuroglia cells contribute to the replacement of cutted parts in some neurons.\nb- Neuroglia cells have a binding function.\nc- The inner surface of neurons is negative during rest.", "Seventh Week Home performances"),
        correctAnswerText: "a- Neuroglia proliferate and fill damaged space (gliosis), replacing tissue volume.<br>b- They provide a structural framework, holding neurons and tissues together.<br>c- Due to outward K+ leak and trapped negative intracellular anions.",
        explanation: "Explains neuroglia roles and basis of negative resting potential."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 3,
        question: addLocation("3- Explain the following:\na- How the potential difference of a neuron is formed during rest.\nb- The structure of the nerve.", "Seventh Week Home performances"),
        correctAnswerText: "a- Maintained by Na+/K+ pump creating gradients and selective permeability (high to K+), causing K+ efflux and internal negativity.<br>b- Bundle of axons (fibers) grouped into fascicles, enclosed by connective tissue sheaths (perineurium, epineurium) with blood vessels.",
        explanation: "Explains resting potential mechanism and nerve structure."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 4,
        question: addLocation("4- Compare between the concentration of sodium and potassium ions in a neuron during rest.", "Seventh Week Home performances"),
        correctAnswerText: "Na+ is high outside, low inside. K+ is high inside, low outside.",
        explanation: "Compares ion distribution at rest."
    },

    // Weekly evaluation (7) A (Page 18)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("1- One of the functions of neuroglia is similar to the function of ............ in the skin.", "Weekly evaluation 7 A"),
        options: ["a- the superficial layer of the epidermis", "b- the inner layer of the epidermis", "c- sweat gland", "d- fatty layer"],
        correctAnswer: 3,
        correctAnswerText: "d- fatty layer",
        explanation: "Both provide support and insulation.<br><br><b>Why this answer is correct:</b> Fatty layer and neuroglia share supportive and insulating roles.<br><br><b>Why other options are incorrect:</b><br>a, b - Layers of skin barrier/regeneration. c- Secretory gland."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 2,
        question: addLocation("2- When the potential difference of the neuronal membrane reaches -70 millivolts, the ...................", "Weekly evaluation 7 A"),
        options: ["a- concentration of potassium ions outside the neuron is higher than inside.", "b- concentration of potassium ions inside the neuron is higher than outside.", "c- concentration of sodium ions inside the neuron is higher than outside.", "d- concentration of chloride ions outside the neuron is higher than inside."],
        correctAnswer: 1,
        correctAnswerText: "b- concentration of potassium ions inside the neuron is higher than outside.",
        explanation: "-70mV is resting potential, characterized by high internal K+.<br><br><b>Why this answer is correct:</b> High internal K+ is a defining feature of the resting potential.<br><br><b>Why other options are incorrect:</b><br>a- K+ is low outside. c- Na+ is low inside. d- Cl- is high outside, but K+ is primary for resting potential."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\na- Cells within the components of the nervous system that have the ability to divide.", "Weekly evaluation 7 A"),
        correctAnswerText: "Neuroglia (or Glial cells).",
        explanation: "Neuroglia are mitotic."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\nb- A group of nerve bundles", "Weekly evaluation 7 A"),
        correctAnswerText: "A nerve.",
        explanation: "Definition of a nerve."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 3,
        question: addLocation("Give reasons for the following:\nNeuroglia cells works like connective tissue.", "Weekly evaluation 7 A"),
        correctAnswerText: "Neuroglia provide structural support and binding to neurons and nervous tissue, analogous to the role of connective tissue.",
        explanation: "Explains structural support function."
    },

    // Weekly evaluation (7) B (Page 19)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("1- Which of the following structures is similar in function to that of a neuroglia cell?", "Weekly evaluation 7 B"),
        options: ["a- Nissil granules.", "b- Schwann cells.", "c- Nodes of Ranvier.", "d- Myelin sheath."],
        correctAnswer: 1,
        correctAnswerText: "b- Schwann cells.",
        explanation: "Schwann cells are a type of neuroglia.<br><br><b>Why this answer is correct:</b> Schwann cells are neuroglia.<br><br><b>Why other options are incorrect:</b><br>a- In neuron. c- Part of axon. d- Produced by neuroglia."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 2,
        question: addLocation("2- One of the causes of polarization is ...........", "Weekly evaluation 7 B"),
        options: ["a- increased concentration of potassium ions outside the neuron.", "b- increased concentration of potassium ions inside the neuron.", "c- increased concentration of sodium ions inside the neuron.", "d- Increased concentration of chloride ions outside the neuron."],
        correctAnswer: 1,
        correctAnswerText: "b- increased concentration of potassium ions inside the neuron.",
        explanation: "High internal K+ concentration and membrane permeability to K+ are primary causes of negative resting potential.<br><br><b>Why this answer is correct:</b> High internal K+ contributes to resting potential.<br><br><b>Why other options are incorrect:</b><br>a- K+ is low outside. c- Na+ is low inside. d- Cl- high outside, but K+ is more significant for resting potential."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\na- A sheath of connective tissue supplied with blood vessels that surrounds a group of nerve bundles.\nb- The state of a nerve cell during rest when its outer surface is positive and its inner surface is negative.", "Weekly evaluation 7 B"),
        correctAnswerText: "a- Perineurium (or Epineurium).<br>b- Polarization.",
        explanation: "a- Connective tissue sheath. b- Definition of polarization."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 3,
        question: addLocation("Give reasons for the following:\nNeuroglia cells have the ability to compensate..", "Weekly evaluation 7 B"),
        correctAnswerText: "They can divide and fill spaces left by damaged neurons, cleaning debris and forming scar tissue, which provides some structural compensation for neuronal loss.",
        explanation: "Explains compensation through division and filling space."
    },

    // Weekly evaluation (7) C (Page 20)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 1,
        question: addLocation("1- Neuroglia cells are distinguished from other neurons by ...................", "Weekly evaluation 7 C"),
        options: ["a- being from components of the nervous system.", "b) having a body cell.", "c) being nourish the neuron.", "d) being nourished by the neuron"],
        correctAnswer: 2,
        correctAnswerText: "c) being nourish the neuron.",
        explanation: "Neuroglia provide essential metabolic support to neurons.<br><br><b>Why this answer is correct:</b> Neuroglia nourish neurons.<br><br><b>Why other options are incorrect:</b><br>a, b - Both share these features. d- Neurons are nourished *by* neuroglia."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 2,
        question: addLocation("2- The concentration of sodium ions outside the cell is ................... times higher than its concentration inside the cell.", "Weekly evaluation 7 C"),
        options: ["a-5-10", "b-10-15", "c-15-30", "d-30-40"],
        correctAnswer: 1,
        correctAnswerText: "b-10-15",
        explanation: "Typical ratio is 10-15:1.<br><br><b>Why this answer is correct:</b> 10-15 is the accurate range.<br><br><b>Why other options are incorrect:</b> Other ranges are incorrect."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\na- The message transmitted by nerves from the sensory organs to the central nervous system", "Weekly evaluation 7 C"),
        correctAnswerText: "Nerve impulse (or Sensory information).",
        explanation: "The signal is the nerve impulse."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\nb- Molecules inside the neuron are ionized and have high molecular weights that do not cross the plasma membrane.", "Weekly evaluation 7 C"),
        correctAnswerText: "Negatively charged proteins and organic anions.",
        explanation: "Describes trapped intracellular anions."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("What does it mean that:\nThe effective potential difference is approximately -70 millivolts?", "Weekly evaluation 7 C"),
        correctAnswerText: "The neuron is at its resting membrane potential, with the inside 70mV more negative than the outside.",
        explanation: "Explains the meaning of resting potential value."
    },

    // Week 9 Class Performance (Page 21)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("1- Which of the following ions, if its permeability increased, causes the potential difference in the neuron to return to -70 mV after excitation?", "Week 9 Class Performance"),
        options: ["a- Na+", "b- K+", "c- Ca++", "d- Cl-"],
        correctAnswer: 1,
        correctAnswerText: "b- K+",
        explanation: "Increased K+ permeability leads to K+ efflux, causing repolarization.<br><br><b>Why this answer is correct:</b> K+ efflux repolarizes.<br><br><b>Why other options are incorrect:</b><br>a- Na+ influx depolarizes. c- Ca++ for release. d- Cl- for inhibition/resting."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 2,
        question: addLocation("2- Which of the following is related to the resting potential?", "Week 9 Class Performance"),
        options: ["a- Equal distribution of ions.", "b- Insulation by Schwann cells.", "c- Action potential.", "d- Permeability of potassium ions outside the cell"],
        correctAnswer: 3,
        correctAnswerText: "d- Permeability of potassium ions outside the cell",
        explanation: "Selective permeability of the membrane to K+ is key to resting potential.<br><br><b>Why this answer is correct:</b> Membrane permeability to K+ determines resting potential.<br><br><b>Why other options are incorrect:</b><br>a- Unequal distribution. b- Insulation for speed. c- Action potential is excitation."
    },
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 3,
        question: addLocation("3- Which of the following does the speed of nerve impulse transmission not depend on?", "Week 9 Class Performance"),
        options: ["a- The diameter of the nerve fiber.", "b- The presence of acetylcholine.", "c- The presence of myelin sheaths.", "d- An increase in the strength of the stimulus"],
        correctAnswer: 1,
        correctAnswerText: "b- The presence of acetylcholine.",
        explanation: "Acetylcholine is a neurotransmitter for synaptic transmission, not axonal conduction speed.<br><br><b>Why this answer is correct:</b> Acetylcholine does not affect axonal speed.<br><br><b>Why other options are incorrect:</b><br>a, c - Diameter and myelin affect speed. d- Stimulus strength (above threshold) doesn't change impulse speed."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\n1- The state of a nerve cell at the time of excitation, when its outer surface is negative and its inner surface is positive.", "Week 9 Class Performance"),
        correctAnswerText: "Depolarization (or Action potential peak).",
        explanation: "Charge reversal during action potential."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 2,
        question: addLocation("Write what the following expressions mean:\n2- A short period of time follow nerve excitation, during which the nerve cell membrane regains its physiological properties so that a new nerve impulse can be transmitted. During this period, the nerve does not respond to any stimulus, regardless of its strength.", "Week 9 Class Performance"),
        correctAnswerText: "Absolute refractory period.",
        explanation: "Period of unresponsiveness after action potential."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 3,
        question: addLocation("Write what the following expressions mean:\n3- The phenomenon of depolarization from -70 mV to +40 mV and then back to -70 mV, which equals 110 mV.", "Week 9 Class Performance"),
        correctAnswerText: "Action Potential.",
        explanation: "Total voltage change during an action potential."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("What happens when:\n1- A neuron is stimulated or excited by another nearby neuron.", "Week 9 Class Performance"),
        correctAnswerText: "Neurotransmitters are released, potentially causing a depolarization in the receiving neuron. If threshold is reached, an action potential is generated.",
        explanation: "Describes synaptic transmission and threshold triggering."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 2,
        question: addLocation("What happens when:\n2- The stimulus acting on the neuron is removed.", "Week 9 Class Performance"),
        correctAnswerText: "If threshold was reached, the action potential completes and the neuron repolarizes. If sub-threshold, the membrane potential returns to resting.",
        explanation: "Describes return to resting state."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Explain:\n1- The composition of the nerve cell's plasma membrane contributes to the generation of nerve impulses.", "Week 9 Class Performance"),
        correctAnswerText: "The membrane contains ion channels and pumps that maintain electrochemical gradients and allow controlled ion flow, which underlies the resting potential and action potential generation.",
        explanation: "Explains role of membrane components."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 2,
        question: addLocation("Explain:\n2- The nerve impulse is transmitted in the form of successive waves of depolarization, repolarization, and depolarization.", "Week 9 Class Performance"),
        correctAnswerText: "Depolarization in one area triggers depolarization in the next, propagating the action potential as a wave along the axon, followed by repolarization.",
        explanation: "Describes action potential propagation."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_STRUCTURE,
        originalNumber: 3,
        question: addLocation("Explain:\n3- Role of Nissil granules in the nerve cell body.", "Week 9 Class Performance"),
        correctAnswerText: "Nissl granules are sites of protein synthesis, providing proteins needed for neuronal structure, function, and repair.",
        explanation: "Explains protein synthesis role."
    },

    // Week 9 Home performances (Page 22)
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("1- Define the following:\na- Depolarization.\nb- Action Potential.", "Week 9 Home performances"),
        correctAnswerText: "a- Depolarization: Decrease in membrane potential (inside becomes less negative or positive). b- Action Potential: Brief, rapid change in membrane potential propagating along axon.",
        explanation: "Provides definitions."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 2,
        question: addLocation("2- Give reasons for the following:\na- The importance of sodium and potassium pumps.\nb- The difference in nerve impulse velocity is affected by the diameter of the nerve fiber.", "Week 9 Home performances"),
        correctAnswerText: "a- Maintain ion gradients necessary for resting and action potentials.<br>b- Larger diameter reduces resistance to current flow, allowing faster signal spread.",
        explanation: "Explains pump importance and diameter effect."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 3,
        question: addLocation("3- Complete the following table:\n\n| Comparison            | Polarization State | Depolarization State |\n|-----------------------|--------------------|----------------------|\n| Potential Difference  |                    |                      |\n| Inner Membrane Charge |                    |                      |", "Week 9 Home performances"),
        correctAnswerText: "| Comparison            | Polarization State | Depolarization State |\n|-----------------------|--------------------|----------------------|\n| Potential Difference  | Approx. -70 mV     | Approx. +30 to +40 mV |\n| Inner Membrane Charge | Negative           | Positive             |",
        explanation: "Fills table with state characteristics."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 4,
        question: addLocation("4- What happens when:\nA region of the nerve membrane is excited:\n1- during the refractory period.\n2- during the depolarization period.", "Week 9 Home performances"),
        correctAnswerText: "1- Will not fire (absolute) or needs stronger stimulus (relative).<br>2- No additional effect (absolute refractory period).",
        explanation: "Describes responsiveness during refractory and depolarization periods."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 5,
        question: addLocation("5- Determine the effect of the nerve membrane's transition from a polarized state to a depolarized state on:\n1- negative protein ions.\n2- potassium ion concentration.", "Week 9 Home performances"),
        correctAnswerText: "1- Remain trapped inside.<br>2- Bulk concentration inside remains high; efflux primarily during repolarization.",
        explanation: "Describes ion movement/location during depolarization."
    },

    // Week 9 Weekly evaluation A (Page 23)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("The speed of nerve impulse is affected by all of the following except ..........", "Weekly evaluation 9 A"),
        options: ["a- The presence of a Ranvier node", "b- Increased stimulus strength", "c- The presence of a myelin sheath", "d- Nerve fiber diameter"],
        correctAnswer: 1,
        correctAnswerText: "b- Increased stimulus strength",
        explanation: "Stimulus strength above threshold does not affect impulse speed.<br><br><b>Why this answer is correct:</b> Speed is all-or-none after threshold.<br><br><b>Why other options are incorrect:</b><br>a, c, d - Nodes, myelin, diameter affect speed."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("What happens when?\nA cell is exposed to a stimulus of a higher intensity than the threshold required for excitation during resting state?", "Weekly evaluation 9 A"),
        correctAnswerText: "A full action potential will be generated.",
        explanation: "Suprathreshold stimulus triggers standard action potential."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\nIt plays a role in maintaining the relative stability of ion distribution.", "Weekly evaluation 9 A"),
        correctAnswerText: "Sodium-potassium pump (Na<sup>+</sup>/K<sup>+</sup> pump).",
        explanation: "Pump maintains ion gradients."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Give reasons for the following:\nOccurrence of depolarization state", "Weekly evaluation 9 A"),
        correctAnswerText: "Stimulus reaches threshold, opening voltage-gated Na+ channels. Na+ influx causes inside to become positive.",
        explanation: "Explains trigger and ionic cause of depolarization."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Write the number that represents: the action potential of a neuron.", "Weekly evaluation 9 A"),
        correctAnswerText: "Approx. +30 to +40 mV (peak).",
        explanation: "Typical peak value of action potential."
    },

    // Week 9 Weekly evaluation B (Page 24)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("The cell's entry into a depolarized state is caused by a rush of ............", "Weekly evaluation 9 B"),
        options: ["a- Sodium ions in large quantities to inside", "b- Potassium ions in large quantities to outside", "c- Sodium ions in large quantities to outside", "d- Chloride ions in large quantities inside"],
        correctAnswer: 0,
        correctAnswerText: "a- Sodium ions in large quantities to inside",
        explanation: "Depolarization is caused by Na+ influx.<br><br><b>Why this answer is correct:</b> Influx of Na+ causes depolarization.<br><br><b>Why other options are incorrect:</b><br>b- K+ efflux for repolarization. c- Na+ rushes in. d- Cl- influx for inhibition/hyperpolarization."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("What happens when:\nThe cell is exposed to a stimulus of greater intensity than the threshold required for excitation during the refractory period?", "Weekly evaluation 9 B"),
        correctAnswerText: "During absolute refractory, no response. During relative refractory, a stronger stimulus can trigger a response.",
        explanation: "Describes responsiveness during refractory period."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\nPositive charged ions pass from the cell's interior to the outside environment during nervous excitation.", "Weekly evaluation 9 B"),
        correctAnswerText: "Potassium efflux during repolarization.",
        explanation: "Outward movement of K+ restores negative potential."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Give reasons for the following:\nThe importance of sodium and potassium pumps.", "Weekly evaluation 9 B"),
        correctAnswerText: "They maintain the ion gradients required for the resting potential and the ability to generate action potentials.",
        explanation: "Explains pumps' role in maintaining gradients."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Write the number that represents: the speed of nerve impulses at the myelin sheath.", "Weekly evaluation 9 B"),
        correctAnswerText: "Approx. 100-120 m/s (speed along myelinated axon).",
        explanation: "Typical speed of saltatory conduction."
    },

    // Week 9 Weekly evaluation C (Page 25)
    {
        type: 'mcq',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("A nerve cell is exposed to a stimulus. Which of the following indicates that the cell membrane will not be affected by this stimulus?", "Weekly evaluation 9 C"),
        options: ["a) The Electrical potential difference is -70 mV", "b) The Electrical potential difference is +40 mV", "c) The outer surface of the nerve membrane is positive", "d) The inner surface of the nerve cell is negative"],
        correctAnswer: 0,
        correctAnswerText: "a) The Electrical potential difference is -70 mV",
        explanation: "Remaining at the resting potential (-70mV) means the stimulus was insufficient to cause excitation.<br><br><b>Why this answer is correct:</b> -70mV indicates the resting state, no excitation by the stimulus.<br><br><b>Why other options are incorrect:</b><br>b) +40mV is peak action potential (affected). c, d) Describe the resting state, but the potential value (a) is the most direct indicator of being unaffected.",
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Write what the following expressions mean:\nThe period during which the cell membrane of a neuron regains its physiological properties.", "Weekly evaluation 9 C"),
        correctAnswerText: "Refractory period.",
        explanation: "Period of recovery and preparation for next impulse."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Explain the following:\nThe \"all or none\" law is from the properties of nerve impulse.", "Weekly evaluation 9 C"),
        correctAnswerText: "If a stimulus reaches threshold, the action potential fires fully and consistently. If below threshold, it doesn't fire at all. The magnitude is independent of stimulus strength above threshold.",
        explanation: "Explains the characteristic all-or-none response."
    },
    {
        type: 'essay',
        topic: Topics.NERVOUS_SYSTEM_PHYSIOLOGY,
        originalNumber: 1,
        question: addLocation("Write the number that represents: the velocity of nerve impulse at the node of Ranvier.", "Weekly evaluation 9 C"),
        correctAnswerText: "Very high (rapid depolarization) but the overall speed of saltatory conduction is approx. 100-120 m/s.",
        explanation: "Clarifies the speed concept related to nodes in saltatory conduction."
    },
];


        const quotes = [
            "The only way to do great work is to love what you do. – Steve Jobs",
            "Education is the most powerful weapon which you can use to change the world. – Nelson Mandela",
            "The future belongs to those who believe in the beauty of their dreams. – Eleanor Roosevelt",
            "Strive for progress, not perfection.",
            "The expert in anything was once a beginner.",
            "Don't watch the clock; do what it does. Keep going.",
            "Success is not final, failure is not fatal: It is the courage to continue that counts. – Winston Churchill",
            "The mind is not a vessel to be filled, but a fire to be kindled. – Plutarch",
            "Study hard what interests you the most in the most undisciplined, irreverent and original manner possible. – Richard Feynman",
            "Learning never exhausts the mind. – Leonardo da Vinci"
        ];


        let currentQuestionIndex = 0;
        let score = 0;
        let buttonsDisabled = false; // Controls user input on answer/skip buttons / self-correction buttons / reveal button
        let gameInProgress = false; // Controls overall game state
        let currentTopicQuestions = [];
        let lessonAttempts = []; // To store results for PDF: Incorrect MCQs, Skipped MCQs, Self-corrected Wrong Essays
        let questionsToRemember = []; // To store questions added to remember list for PDF: Correct MCQs (if button clicked), Self-corrected Correct Essays (if button clicked)

        // Get DOM elements
        const lessonSelectionElement = document.getElementById('lesson-selection');
        const gameContainerElement = document.querySelector('.game-container');
        const gameTitleElement = document.getElementById('game-title');
        const questionCounterElement = document.querySelector('.question-counter');
        const currentQNumElement = document.getElementById('current-q-num');
        const totalQNumElement = document.getElementById('total-q-num');
        const questionAreaElement = document.getElementById('question-area');
        const questionTextElement = document.getElementById('question-text');
        const answerButtonsElement = document.getElementById('answer-buttons'); // MCQ buttons container
        const revealAnswerButton = document.getElementById('reveal-answer-button'); // New Reveal button
        const essaySelfCorrectionButtonsElement = document.getElementById('essay-self-correction-buttons'); // Essay buttons container
        const feedbackElement = document.getElementById('feedback');
        const explanationAreaElement = document.getElementById('explanation-area');
        const explanationTextElement = document.getElementById('explanation-text');
        const scoreAreaElement = document.getElementById('score-area');
        const scoreElement = document.getElementById('score');
        const skipButton = document.getElementById('skip-button'); // Skip button (only for MCQ)
        const nextButton = document.getElementById('next-button');
        const addToRememberButton = document.getElementById('add-to-remember-button'); // Add to Remember button
        const finalScoreElement = document.getElementById('final-score');
        const finalScoreTextElement = document.getElementById('final-score-text');
        const finalTotalTextElement = document.getElementById('final-total-text');
        const restartButton = document.getElementById('restart-button');
        const downloadPdfButton = document.getElementById('download-mistakes-pdf');
        const exportAllPdfButton = document.getElementById('export-all-pdf-button'); // Export All button
        const quoteAreaElement = document.getElementById('quote-area');
        const currentQuoteElement = document.getElementById('current-quote');

         // Create self-correction buttons once and manage their visibility
        const correctEssayButton = document.createElement('button');
        correctEssayButton.textContent = 'I got it Right!';
        correctEssayButton.classList.add('self-correct-button');
        // Event listener added in revealAnswer()

        const wrongEssayButton = document.createElement('button');
        wrongEssayButton.textContent = 'I was Wrong';
        wrongEssayButton.classList.add('self-correct-button', 'wrong');
        // Event listener added in revealAnswer()

        // Append them to the container, they will be hidden by default via CSS .hidden
        essaySelfCorrectionButtonsElement.appendChild(correctEssayButton);
        essaySelfCorrectionButtonsElement.appendChild(wrongEssayButton);

         // Add event listener for the new Reveal Answer button
         revealAnswerButton.addEventListener('click', revealAnswer);


        // --- Functions ---

        function showLessonSelection() {
            gameInProgress = false;
            // Hide game elements
            gameContainerElement.classList.add('hidden');
            finalScoreElement.classList.add('hidden');
            explanationAreaElement.classList.add('hidden');
            explanationAreaElement.classList.remove('visible'); // Remove animation class
            addToRememberButton.classList.add('hidden'); // Hide remember button
            quoteAreaElement.classList.add('hidden'); // Hide quote area

            // Show lesson selection
            lessonSelectionElement.classList.remove('hidden');

            // Clear existing buttons before adding new ones
             while (lessonSelectionElement.firstChild) {
                 lessonSelectionElement.removeChild(lessonSelectionElement.firstChild);
             }
             // Add back the h2 title
             const title = document.createElement('h2');
             title.textContent = 'Choose a Lesson';
             lessonSelectionElement.appendChild(title);


            for (const topicKey in Topics) {
                const topicName = Topics[topicKey];
                // Check if there are questions for this topic before adding the button
                const questionsForTopic = allQuestions.filter(q => q.topic === topicName);
                if (questionsForTopic.length > 0) {
                    const btn = document.createElement("button");
                    btn.classList.add("action-button");
                    btn.innerText = `${topicName} (${questionsForTopic.length} Questions)`;
                    btn.addEventListener('click', () => startGame(topicName));
                    lessonSelectionElement.appendChild(btn);
                }
            }
        }

        function startGame(topic) {
            gameInProgress = true;
            console.log(`Starting lesson: ${topic}`);
            // Filter questions based on the chosen topic and sort by original number
            currentTopicQuestions = allQuestions
                .filter(q => q.topic === topic)
                .sort((a, b) => a.originalNumber - b.originalNumber); // Sort by original number

            if (currentTopicQuestions.length === 0) {
                alert(`No questions found for the topic: ${topic}`);
                showLessonSelection(); // Go back to selection if no questions
                return;
            }

            // Reset game state
            currentQuestionIndex = 0;
            score = 0;
            lessonAttempts = []; // Clear attempts for the new lesson
            questionsToRemember = []; // Clear remember list for the new lesson
            scoreElement.textContent = score;
            totalQNumElement.textContent = currentTopicQuestions.length; // Update total count

            // Update game title
            gameTitleElement.textContent = `Game Show! - ${topic}`; // Updated title

            // Hide lesson selection
            lessonSelectionElement.classList.add('hidden');

            // Show game elements
            gameContainerElement.classList.remove('hidden');
            questionAreaElement.classList.remove('hidden');
            feedbackElement.classList.remove('hidden');
            scoreAreaElement.classList.remove('hidden');
            quoteAreaElement.classList.remove('hidden');
            questionCounterElement.classList.remove('hidden'); // Show question counter

            // Hide end game elements
            finalScoreElement.classList.add('hidden');
            nextButton.classList.add('hidden');
            restartButton.classList.add('hidden');
            downloadPdfButton.classList.add('hidden');
            exportAllPdfButton.classList.add('hidden'); // Hide export all button

            displayQuestion();
            displayRandomQuote();
        }

        function displayQuestion() {
            resetState(); // Clears feedback, explanation, buttons, etc.
            buttonsDisabled = false; // Re-enable input

            const question = currentTopicQuestions[currentQuestionIndex];

            if (!question) {
                console.error("Question index out of bounds or no questions found.");
                questionTextElement.innerHTML = "Error: Could not load next question."; // Use innerHTML for potential HTML
                buttonsDisabled = true;
                // Hide all action buttons on error
                nextButton.classList.add('hidden');
                skipButton.classList.add('hidden');
                addToRememberButton.classList.add('hidden');
                revealAnswerButton.classList.add('hidden');
                essaySelfCorrectionButtonsElement.classList.add('hidden');
                 quoteAreaElement.classList.add('hidden'); // Hide quote area on error
                setTimeout(() => restartButton.classList.remove('hidden'), 2000);
                return;
            }

            // Update question counter
            currentQNumElement.textContent = currentQuestionIndex + 1;

            questionTextElement.innerHTML = question.question; // Use innerHTML

            // --- Handle different question types ---
            if (question.type === 'mcq') {
                answerButtonsElement.classList.remove('hidden');
                revealAnswerButton.classList.add('hidden'); // Hide reveal for MCQ
                essaySelfCorrectionButtonsElement.classList.add('hidden'); // Hide essay buttons
                skipButton.classList.remove('hidden'); // Show the skip button for MCQ
                skipButton.disabled = false; // Enable the skip button

                 if (!question.options || question.options.length === 0) {
                     console.error("MCQ question has no options:", question);
                     questionTextElement.innerHTML = `Error loading MCQ question ${question.originalNumber}. Please check the question data.`; // Use innerHTML
                     buttonsDisabled = true;
                     // Hide all action buttons on error
                     skipButton.classList.add('hidden');
                     addToRememberButton.classList.add('hidden');
                     revealAnswerButton.classList.add('hidden');
                      essaySelfCorrectionButtonsElement.classList.add('hidden');
                      quoteAreaElement.classList.add('hidden'); // Hide quote area on error
                     if (currentQuestionIndex < currentTopicQuestions.length - 1) {
                         setTimeout(() => { nextButton.classList.remove('hidden'); }, 800);
                     } else {
                         setTimeout(endGame, 1000);
                     }
                     return;
                 }


                answerButtonsElement.innerHTML = ''; // Clear previous MCQ buttons effectively
                question.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.innerHTML = option; // Use innerHTML
                    button.classList.add('answer-button');
                    button.dataset.index = index;

                    // Use an anonymous function to call selectAnswer with the correct index
                    button.addEventListener('click', () => selectAnswer(index));
                    answerButtonsElement.appendChild(button);
                });

            } else if (question.type === 'essay') {
                answerButtonsElement.classList.add('hidden'); // Hide MCQ buttons
                skipButton.classList.add('hidden'); // Hide the skip button for essay
                essaySelfCorrectionButtonsElement.classList.add('hidden'); // Hide essay buttons initially
                explanationAreaElement.classList.add('hidden'); // Hide explanation initially for essay
                explanationAreaElement.classList.remove('visible'); // Remove animation class
                 addToRememberButton.classList.add('hidden'); // Hide remember button initially for essay

                 // Show and enable the Reveal Answer button
                 revealAnswerButton.classList.remove('hidden');
                 revealAnswerButton.disabled = false;

            } else {
                // Handle unknown question types
                 console.error("Question has unknown type:", question);
                 questionTextElement.innerHTML = `Error loading question ${question.originalNumber} (Unknown type). Please check the question data.`; // Use innerHTML
                 buttonsDisabled = true;
                  // Hide all action buttons on error
                 skipButton.classList.add('hidden');
                 addToRememberButton.classList.add('hidden');
                 revealAnswerButton.classList.add('hidden');
                  essaySelfCorrectionButtonsElement.classList.add('hidden');
                  quoteAreaElement.classList.add('hidden'); // Hide quote area on error
                 if (currentQuestionIndex < currentTopicQuestions.length - 1) {
                     setTimeout(() => { nextButton.classList.remove('hidden'); }, 800);
                 } else {
                     setTimeout(endGame, 1000);
                 }
                 return;
            }
        }

        function resetState() {
            // Clear previous answer buttons (MCQ) and hide their container
             answerButtonsElement.innerHTML = '';
             answerButtonsElement.classList.add('hidden'); // Ensure MCQ buttons are hidden by default


            // Hide essay self-correction buttons
            essaySelfCorrectionButtonsElement.classList.add('hidden');
             correctEssayButton.disabled = true; // Disable them when hidden
             wrongEssayButton.disabled = true;

             // Hide reveal answer button
             revealAnswerButton.classList.add('hidden');
             revealAnswerButton.disabled = true;


            feedbackElement.textContent = '';
            feedbackElement.style.color = '';
            explanationAreaElement.classList.add('hidden');
            explanationAreaElement.classList.remove('visible');
            explanationTextElement.innerHTML = ''; // Use innerHTML
            nextButton.classList.add('hidden');
            skipButton.classList.add('hidden'); // Hide skip button by default, displayQuestion will show for MCQ
            addToRememberButton.classList.add('hidden'); // Hide remember button by default, selectAnswer/handleSelfCorrection will show on correct

             // Remove any event listeners added in revealAnswer to prevent duplicates on subsequent questions
             correctEssayButton.removeEventListener('click', () => handleSelfCorrection(true));
             wrongEssayButton.removeEventListener('click', () => handleSelfCorrection(false));
        }

        // Handle MCQ answer selection
        function selectAnswer(selectedIndex) {
            if (buttonsDisabled) return; // Prevent double-clicking
            const question = currentTopicQuestions[currentQuestionIndex];

            // Ensure this is an MCQ, although displayQuestion should prevent calling this
             if (question.type !== 'mcq') {
                 console.warn("selectAnswer called for non-MCQ type:", question);
                 return; // Should not happen if displayQuestion works correctly
             }

            buttonsDisabled = true; // Disable input once an answer is chosen

            // Disable and hide the skip button immediately
            skipButton.disabled = true;
            skipButton.classList.add('hidden');

            // Disable all answer buttons
            const answerButtons = answerButtonsElement.querySelectorAll('.answer-button');
            answerButtons.forEach(button => button.disabled = true);


            const isCorrect = (selectedIndex === question.correctAnswer);

            // Record the attempt ONLY IF INCORRECT OR SKIPPED (handled in skipQuestion)
            // Correct MCQ attempts are NOT added to lessonAttempts
            if (!isCorrect) {
                lessonAttempts.push({
                    type: 'mcq', // Store type in attempt
                    originalNumber: question.originalNumber, // Include original number
                    questionText: question.question, // Keep original HTML
                    selectedAnswer: question.options[selectedIndex], // Keep original HTML
                    correctAnswerText: question.correctAnswerText, // Keep original HTML
                    options: question.options, // Keep original HTML options list
                    explanation: question.explanation, // Keep original HTML
                    isCorrect: isCorrect, // Will be false here
                    topic: question.topic,
                    // isRememberedItem is only added to questionsToRemember list
                });
            }


            // Highlight buttons
            answerButtons.forEach((button, index) => {
                if (index === question.correctAnswer) {
                    button.classList.add('correct');
                } else if (index === selectedIndex) {
                    button.classList.add('incorrect');
                }
            });

            if (isCorrect) {
                score++;
                scoreElement.textContent = score;
                feedbackElement.textContent = 'Correct!';
                feedbackElement.style.color = '#28a745'; // Green

                // Show and check state of Add to Remember button ONLY if correct
                addToRememberButton.classList.remove('hidden');
                checkRememberButtonState(question); // Check if already added and set state/text

            } else {
                feedbackElement.textContent = `Incorrect.`;
                feedbackElement.style.color = '#dc3545'; // Red
                addToRememberButton.classList.add('hidden'); // Ensure hidden if incorrect
            }

            // Display explanation with animation (includes correct answer)
            // Construct explanation HTML to include Correct Answer text for display
            const explanationHtml = `<strong>Correct Answer:</strong> ${question.correctAnswerText}<br><br><strong>Explanation:</strong> ${question.explanation}`;
            explanationTextElement.innerHTML = explanationHtml; // Use innerHTML
            explanationAreaElement.classList.remove('hidden');
            setTimeout(() => {
                explanationAreaElement.classList.add('visible');
            }, 10);


            // Determine next action after a delay
            if (currentQuestionIndex < currentTopicQuestions.length - 1) {
                setTimeout(() => {
                    nextButton.classList.remove('hidden');
                }, 800); // Faster timeout
            } else {
                // This is the last question
                setTimeout(endGame, 1200); // Faster endgame
            }
        }

         // Handle clicking the Reveal Answer button for essay questions
         function revealAnswer() {
             if (buttonsDisabled) return; // Prevent double-clicking
             buttonsDisabled = true; // Disable input temporarily

             const question = currentTopicQuestions[currentQuestionIndex];
             if (question.type !== 'essay') {
                  console.warn("revealAnswer called for non-essay type:", question);
                  buttonsDisabled = false; // Re-enable if it was a mistake
                  return;
             }

             // Disable and hide the Reveal button
             revealAnswerButton.disabled = true;
             revealAnswerButton.classList.add('hidden');


             // Display explanation with animation (includes model answer)
             const explanationHtml = `<strong>Model Answer:</strong> ${question.correctAnswerText}<br><br><strong>Explanation:</strong> ${question.explanation}`;
             explanationTextElement.innerHTML = explanationHtml; // Use innerHTML
             explanationAreaElement.classList.remove('hidden');
             setTimeout(() => {
                 explanationAreaElement.classList.add('visible');
             }, 10);


             // Now show and enable the self-correction buttons after a slight delay
             setTimeout(() => {
                  essaySelfCorrectionButtonsElement.classList.remove('hidden');
                  correctEssayButton.disabled = false;
                  wrongEssayButton.disabled = false;
                  buttonsDisabled = false; // Re-enable input for self-correction buttons

                  // Add listeners *only* after they are revealed and enabled
                  // Previous listeners are removed in resetState
                  correctEssayButton.addEventListener('click', () => handleSelfCorrection(true));
                  wrongEssayButton.addEventListener('click', () => handleSelfCorrection(false));

             }, 500); // Small delay before showing correction buttons
         }


        // Handle Essay self-correction
        function handleSelfCorrection(isCorrect) {
            if (buttonsDisabled) return; // Prevent double-clicking
             const question = currentTopicQuestions[currentQuestionIndex];

            // Ensure this is an Essay
             if (question.type !== 'essay') {
                 console.warn("handleSelfCorrection called for non-essay type:", question);
                  return; // Should not happen
             }

            buttonsDisabled = true; // Disable input once self-corrected

            // Disable self-correction buttons immediately
             correctEssayButton.disabled = true;
             wrongEssayButton.disabled = true;
             essaySelfCorrectionButtonsElement.classList.add('hidden'); // Hide the container

             // Remove listeners to prevent them from firing again
             correctEssayButton.removeEventListener('click', () => handleSelfCorrection(true));
             wrongEssayButton.removeEventListener('click', () => handleSelfCorrection(false));


             if (isCorrect) {
                score++;
                scoreElement.textContent = score;
                feedbackElement.textContent = 'Marked as Correct!';
                feedbackElement.style.color = '#28a745'; // Green

                // *** REMOVED AUTOMATIC ADDITION FOR ESSAY CORRECT ***
                // Now just show the 'Add to Remember' button like for MCQs
                 addToRememberButton.classList.remove('hidden');
                 checkRememberButtonState(question); // Set button text and state

             } else {
                feedbackElement.textContent = `Marked as Incorrect.`;
                feedbackElement.style.color = '#dc3545'; // Red
                 addToRememberButton.classList.add('hidden'); // Ensure hidden if incorrect

                 // Record the attempt as self-corrected wrong
                lessonAttempts.push({
                    type: 'essay', // Store type in attempt
                    originalNumber: question.originalNumber,
                    questionText: question.question, // Include question text
                    selectedAnswer: "[Self-Corrected as Wrong]", // Indicate it was self-corrected wrong
                    correctAnswerText: question.correctAnswerText, // Include correct answer text (model answer)
                    options: [], // No options for essay
                    explanation: question.explanation, // Include explanation
                    isCorrect: false, // Mark as incorrect/missed
                    topic: question.topic,
                });
             }

            // Explanation is already visible from revealAnswer()


            // Determine next action after a delay
            if (currentQuestionIndex < currentTopicQuestions.length - 1) {
                setTimeout(() => {
                    nextButton.classList.remove('hidden');
                }, 800); // Faster timeout
            } else {
                setTimeout(endGame, 1200);
            }
        }


        // Handle MCQ skip
        function skipQuestion() {
            if (buttonsDisabled) return; // Prevent double-clicking
            const question = currentTopicQuestions[currentQuestionIndex];
             // Ensure this is an MCQ
            if (question.type !== 'mcq') {
                 console.warn("skipQuestion called for non-MCQ type:", question);
                 return; // Should not happen
            }

            buttonsDisabled = true; // Disable input once skip is clicked

            // Disable and hide the skip button immediately
            skipButton.disabled = true;
            skipButton.classList.add('hidden');

            // Disable all answer buttons
            const answerButtons = answerButtonsElement.querySelectorAll('.answer-button');
            answerButtons.forEach(button => button.disabled = true);

            // Record the attempt as skipped/incorrect
             lessonAttempts.push({
                type: 'mcq', // Store type in attempt
                originalNumber: question.originalNumber,
                questionText: question.question, // Include question text
                selectedAnswer: "[Skipped]", // Indicate it was skipped
                correctAnswerText: question.correctAnswerText, // Include correct answer text
                options: question.options, // Include options
                explanation: question.explanation, // Include explanation
                isCorrect: false, // Mark as incorrect/missed for filtering
                topic: question.topic,
                // Do NOT add isRememberedItem: true here
            });


            // Provide feedback for skipping
            feedbackElement.textContent = 'Question Skipped.';
            feedbackElement.style.color = '#ffc107'; // Yellow/Orange color for skipped feedback

            // Highlight the correct answer button visually (if it exists)
             const answerButtonsList = answerButtonsElement.querySelectorAll('.answer-button');
            if (question.correctAnswer !== undefined && question.correctAnswer >= 0 && question.correctAnswer < answerButtonsList.length) {
                 answerButtonsList[question.correctAnswer].classList.add('correct');
            }


            // Display explanation and correct answer with animation
             const explanationHtml = `<strong>Correct Answer:</strong> ${question.correctAnswerText}<br><br><strong>Explanation:</strong> ${question.explanation}`;
             explanationTextElement.innerHTML = explanationHtml; // Use innerHTML
            explanationAreaElement.classList.remove('hidden');
            setTimeout(() => {
                explanationAreaElement.classList.add('visible');
            }, 10);

            // *** Do NOT show "Add to Remember" button if skipped ***
            addToRememberButton.classList.add('hidden');


            // Determine next action after a delay
            if (currentQuestionIndex < currentTopicQuestions.length - 1) {
                setTimeout(() => {
                    nextButton.classList.remove('hidden');
                }, 800); // Faster timeout
            } else {
                setTimeout(endGame, 1200);
            }
        }

        // Function to check and set the state of the "Add to Remember" button
        function checkRememberButtonState(question) {
            // Check if the current question is already in the remember list
            const isAlreadyAdded = questionsToRemember.some(q => q.originalNumber === question.originalNumber && q.topic === question.topic);

            if (isAlreadyAdded) {
                addToRememberButton.textContent = "Added!";
                addToRememberButton.disabled = true;
                 // Styling is handled by the CSS :disabled rule now
            } else {
                addToRememberButton.textContent = "Add to Remember List";
                addToRememberButton.disabled = false;
                 // Styling is handled by the CSS rule for #add-to-remember-button
            }
        }


        // Function to add the current question to the remember list when button is clicked
        // This function is now called *only* when the 'Add to Remember List' button is explicitly clicked.
        function addToRememberList() {
            const question = currentTopicQuestions[currentQuestionIndex];
            // Check if the current question is already in the remember list before adding
            const isAlreadyAdded = questionsToRemember.some(q => q.originalNumber === question.originalNumber && q.topic === question.topic);

            if (!isAlreadyAdded) {
                // Add a copy of the current question object with a flag
                 questionsToRemember.push({...question, isRememberedItem: true}); // Use spread to copy properties

                // Update button state immediately
                checkRememberButtonState(question); // This will set the text to "Added!" and disable the button
                console.log(`Question ${question.originalNumber} added to remember list.`);
            }
            // If it was already added, the button should have been disabled already by checkRememberButtonState
        }


        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentTopicQuestions.length) {
                displayQuestion(); // displayQuestion will handle showing/enabling buttons based on type
                displayRandomQuote();
            } else {
                // Should be handled by selectAnswer/skipQuestion/handleSelfCorrection, but included for safety
                endGame();
            }
        }

        function endGame() {
            gameInProgress = false;
            // Hide game elements
            questionAreaElement.classList.add('hidden');
            feedbackElement.classList.add('hidden');
            explanationAreaElement.classList.add('hidden');
            explanationAreaElement.classList.remove('visible');
            scoreAreaElement.classList.add('hidden');
            nextButton.classList.add('hidden');
            skipButton.classList.add('hidden'); // Ensure skip button is hidden at the end
            addToRememberButton.classList.add('hidden'); // Ensure remember button is hidden at the end
             essaySelfCorrectionButtonsElement.classList.add('hidden'); // Ensure essay buttons are hidden at the end
             revealAnswerButton.classList.add('hidden'); // Ensure reveal button is hidden at the end
            quoteAreaElement.classList.add('hidden');
            questionCounterElement.classList.add('hidden');


            // Show final score and restart button
            finalScoreElement.classList.remove('hidden');
            finalScoreTextElement.textContent = score;
            finalTotalTextElement.textContent = currentTopicQuestions.length;
            restartButton.classList.remove('hidden');

            // Show Review PDF button only if there were mistakes, skips, or items to remember
             // lessonAttempts contains incorrect MCQs, skipped MCQs, and self-corrected wrong Essays
             // questionsToRemember contains correct MCQs added (if button clicked), and self-corrected correct Essays added (if button clicked)
            if (lessonAttempts.length > 0 || questionsToRemember.length > 0) {
                downloadPdfButton.classList.remove('hidden');
            } else {
                downloadPdfButton.classList.add('hidden');
            }

            // Always show the Export All button on the final screen
            exportAllPdfButton.classList.remove('hidden');
        }

        function displayRandomQuote() {
            // Only display quote if game is in progress
            if (gameInProgress) {
                const randomIndex = Math.floor(Math.random() * quotes.length);
                currentQuoteElement.textContent = quotes[randomIndex];
                quoteAreaElement.classList.remove('hidden');
            } else {
                quoteAreaElement.classList.add('hidden'); // Hide if not in game
            }
        }

        // --- PDF Generation Functions using html2pdf.js ---

        // Helper function to generate the HTML content for a single item in the PDF
        // It now handles different question types and sources (attempts vs remembered vs all)
        function buildItemHtml(item, index, isReview = true) {
            // Common CSS styles for PDF content
            const pdfStyles = `
                <style>
                    body { font-family: 'Arial', sans-serif; line-height: 1.5; color: #333; margin: 0; padding: 0; }
                    p { margin: 0 0 8px 0; }
                    strong { font-weight: bold; }
                    ul { margin: 8px 0 8px 20px; padding: 0; list-style: none; }
                    li { margin-bottom: 4px; font-size: 15pt; } /* Set font size for options list items */
                    .item-container { border: 1px solid #eee; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
                    .item-header { font-size: 11pt; font-weight: bold; margin-bottom: 10px; color: #444; }
                    .question-text { font-size: 16pt; margin-bottom: 8px; } /* Set font size for question text */
                    .answer-text { font-size: 15pt; } /* Set font size for answer text */
                    .correct-answer { color: #28a745; }
                    .incorrect-answer { color: #dc3545; }
                    .skipped-answer { color: #6c757d; font-style: italic; }
                     .self-corrected-wrong { color: #dc3545; font-style: italic; }
                    .explanation-text { font-size: 14pt; color: #1b5e20; margin-top: 8px; } /* Set font size for explanation */
                    /* Basic sub/sup styling */
                    sub, sup { font-size: 0.7em; line-height: 0; position: relative; vertical-align: baseline; }
                    sup { top: -0.5em; }
                    sub { bottom: -0.2em; }
                </style>
            `;

            let itemHtml = `<div class="item-container">`;

             // Determine how to display the item based on context (Review vs All) and type (MCQ vs Essay)

            if (isReview) {
                 // --- Building for Review PDF (Mistakes/Skips/Remembered) ---
                 // Item comes from either lessonAttempts or questionsToRemember
                 const isRemembered = !!item.isRememberedItem; // Check the flag

                 itemHtml += `<p class="item-header">Item ${index + 1}: (Original Question ${item.originalNumber})</p>`;
                 itemHtml += `<p class="question-text"><strong>Question:</strong> ${item.questionText || item.question}</p>`; // Use questionText from attempt if available, otherwise question from original

                 if (item.type === 'mcq') {
                      // Display for MCQ in review (Incorrect/Skipped - from lessonAttempts)
                      // Or Remembered MCQ (from questionsToRemember)
                      if (isRemembered) {
                          // Do nothing specific for remembered MCQs here, just show Question, Answer, Explanation below
                      } else { // Must be from lessonAttempts, i.e., incorrect or skipped
                          if (item.selectedAnswer === "[Skipped]") {
                             itemHtml += `<p class="answer-text skipped-answer"><strong>Your Action:</strong> [Skipped]</p>`;
                         } else if (item.selectedAnswer) { // Was an incorrect attempt
                             itemHtml += `<p class="answer-text incorrect-answer"><strong>Your Answer:</strong> ${item.selectedAnswer}</p>`;
                         }
                      }

                 } else if (item.type === 'essay') {
                     // Display for Essay in review (Self-corrected Wrong - from lessonAttempts or Remembered - from questionsToRemember)
                     if (!isRemembered) { // Must be a self-corrected wrong attempt from lessonAttempts
                         itemHtml += `<p class="answer-text self-corrected-wrong"><strong>Your Action:</strong> [Self-Corrected as Wrong]</p>`;
                     }
                     // If it's a remembered essay (isRememberedItem: true), no user action text is shown here,
                     // just the question, model answer, and explanation below.
                 }

                 // Always show the correct/model answer in the review PDF
                 itemHtml += `<p class="answer-text correct-answer"><strong>Correct/Model Answer:</strong> ${item.correctAnswerText}</p>`;

                 // Always show the explanation in the review PDF
                 itemHtml += `<p class="explanation-text"><strong>Explanation:</strong> ${item.explanation}</p>`;


            } else {
                 // --- Building for All Questions PDF ---
                 // Item comes directly from allQuestions
                 const question = item; // Use the original question object directly

                 itemHtml += `<p class="item-header">Question ${question.originalNumber}:</p>`;
                 itemHtml += `<p class="question-text"><strong>Question:</strong> ${question.question}</p>`;

                 if (question.type === 'mcq') {
                     // Add options list for MCQ
                     if (question.options && Array.isArray(question.options) && question.options.length > 0) {
                          itemHtml += `<p style="margin-bottom: 5px;"><strong>Options:</strong></p><ul>`;
                          question.options.forEach((opt, idx) => {
                              itemHtml += `<li>${String.fromCharCode(97 + idx)}) ${opt}</li>`;
                          });
                          itemHtml += `</ul>`;
                     }
                     // Add correct answer for MCQ
                     itemHtml += `<p class="answer-text correct-answer"><strong>Correct Answer:</strong> ${question.correctAnswerText}</p>`;

                 } else if (question.type === 'essay') {
                      // Add model answer for Essay
                     itemHtml += `<p class="answer-text correct-answer"><strong>Model Answer:</strong> ${question.correctAnswerText}</p>`;
                 }

                 // Add explanation
                 itemHtml += `<p class="explanation-text"><strong>Explanation:</strong> ${question.explanation}</p>`;
            }


            itemHtml += `</div>`; // Close item-container

            // Include styles with each item for safety in html2pdf rendering
             return pdfStyles + itemHtml;
        }


        // PDF Generation Function for Mistakes, Skips, and Remembered Items using html2pdf.js
        function generateReviewPDF() {
             // lessonAttempts contains incorrect MCQs, skipped MCQs, and self-corrected wrong Essays
             // questionsToRemember contains correct MCQs added (if button clicked), and self-corrected correct Essays added (if button clicked)

            if (lessonAttempts.length === 0 && questionsToRemember.length === 0) {
                alert("No mistakes, skips, or items added to the 'Remember' list to review.");
                return;
            }

            const topicName = currentTopicQuestions.length > 0 ? currentTopicQuestions[0].topic : 'Lesson';

            let pdfHtml = `
                <html>
                <head>
                    <title>${topicName} Review</title>
                    <style>
                         body { font-family: 'Arial', sans-serif; line-height: 1.4; color: #333; margin: 0; padding: 20mm; }
                         h1, h2 { color: #1a2a6c; }
                         h1 { font-size: 18pt; margin-bottom: 5mm; }
                         h2 { font-size: 14pt; margin-bottom: 8mm; } /* Adjusted margin */
                         p { margin: 0 0 8px 0; }
                         strong { font-weight: bold; }
                         ul { margin: 8px 0 8px 20px; padding: 0; list-style: none; }
                         /* Font sizes for list items, question, answer, explanation handled in buildItemHtml */

                         /* Basic sub/sup styling */
                         sub, sup { font-size: 0.7em; line-height: 0; position: relative; vertical-align: baseline; }
                         sup { top: -0.5em; }
                         sub { bottom: -0.2em; }

                         /* Section Titles */
                         .section-title { font-size: 16pt; font-weight: bold; margin-top: 15mm; margin-bottom: 8mm; } /* Adjusted margin */
                         .section-title.attempts { color: #dc3545; } /* Color for Mistakes/Skips/Wrong */
                         .section-title.remember { color: #4a69bd; } /* Color for Remembered */

                    </style>
                </head>
                <body>
                    <h1>Review - Mistakes, Skips, and Remembered Items</h1>
                    <h2>Lesson: ${topicName}</h2>
                    <p><strong>Final Score:</strong> ${score} / ${currentTopicQuestions.length}</p>
            `;

            // --- Incorrect Answers & Skips & Self-Corrected Wrong Section ---
            if (lessonAttempts.length > 0) {
                pdfHtml += `<h2 class="section-title attempts">Incorrect Answers, Skips & Self-Corrected Wrong (${lessonAttempts.length})</h2>`;
                 // Sort attempts by original question number before adding to PDF
                 const sortedAttempts = lessonAttempts.slice().sort((a, b) => a.originalNumber - b.originalNumber);
                sortedAttempts.forEach((item, index) => {
                    pdfHtml += buildItemHtml(item, index, true); // true for isReview
                });
            }

            // --- Questions to Remember Section ---
            if (questionsToRemember.length > 0) {
                 // Add a little space before this section if the previous one exists
                 if (lessonAttempts.length > 0) {
                     pdfHtml += `<div style="height: 10mm;"></div>`; // Add vertical space
                 }
                pdfHtml += `<h2 class="section-title remember">Questions to Remember (${questionsToRemember.length})</h2>`;
                 // Sort remembered items by original question number
                 const sortedRemembered = questionsToRemember.slice().sort((a, b) => a.originalNumber - b.originalNumber);
                sortedRemembered.forEach((item, index) => {
                     // For remembered items, use buildItemHtml in review mode.
                     // The item object already has the necessary structure (question, type, etc.)
                    pdfHtml += buildItemHtml(item, index, true); // true for isReview
                });
            }

            pdfHtml += `</body></html>`;

            // Use html2pdf.js to generate and save the PDF
            const worker = html2pdf().from(pdfHtml).set({
                margin: 15, // Page margins in mm
                filename: `${topicName.replace(/[^a-z0-9]/gi, '_')}_Review.pdf`,
				pagebreak:{mode:"avoid-all"}, // Use avoid-all to prevent breaking items/sections
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: {
                    scale: 8, // Increased scale for better resolution
                    logging: true,
                    dpi: 300,
                    letterRendering: true
                },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            });

             worker.save();
        }


        // PDF Generation Function for ALL Questions using html2pdf.js
        function generateAllQuestionsPDF() {
             if (currentTopicQuestions.length === 0) {
                alert("No questions available for the current lesson.");
                return;
            }

            const topicName = currentTopicQuestions.length > 0 ? currentTopicQuestions[0].topic : 'Lesson';

            let pdfHtml = `
                <html>
                <head>
                    <title>${topicName} All Questions</title>
                     <style>
                         body { font-family: 'Arial', sans-serif; line-height: 1.4; color: #333; margin: 0; padding: 20mm; }
                         h1, h2 { color: #1a2a6c; }
                         h1 { font-size: 18pt; margin-bottom: 5mm; }
                         h2 { font-size: 14pt; margin-bottom: 10mm; }
                         p { margin: 0 0 8px 0; }
                         strong { font-weight: bold; }
                         ul { margin: 8px 0 8px 20px; padding: 0; list-style: none; }
                         /* Font sizes for list items, question, answer, explanation handled in buildItemHtml */

                         /* Basic sub/sup styling */
                         sub, sup { font-size: 0.7em; line-height: 0; position: relative; vertical-align: baseline; }
                         sup { top: -0.5em; }
                         sub { bottom: -0.2em; }
                    </style>
                </head>
                <body>
                    <h1>All Questions and Answers</h1>
                    <h2>Lesson: ${topicName}</h2>
            `;

             // Sort questions just in case they weren't filtered/sorted earlier (though startGame does this)
             const sortedQuestions = currentTopicQuestions.slice().sort((a, b) => a.originalNumber - b.originalNumber);

            // Add each question to the HTML
             sortedQuestions.forEach((item, index) => {
                pdfHtml += buildItemHtml(item, index, false); // false for not isReview (i.e., building for All Questions)
            });

            pdfHtml += `</body></html>`;


            // Use html2pdf.js to generate and save the PDF
             const worker = html2pdf().from(pdfHtml).set({
                margin: 15, // Page margins in mm
                filename: `${topicName.replace(/[^a-z0-9]/gi, '_')}_All_Questions_and_Answers.pdf`,
                 image: { type: 'jpeg', quality: 0.98 },
				 pagebreak:{mode:"avoid-all"}, // Use avoid-all to prevent breaking items
                 html2canvas: {
                     scale: 8, // Increased scale for better resolution
                     logging: true,
                     dpi: 300,
                     letterRendering: true
                    },
                 jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            });

             worker.save();
        }


        // --- Event Listeners ---
        addToRememberButton.addEventListener('click', addToRememberList);
        // revealAnswerButton.addEventListener('click', revealAnswer); // Listener added in displayQuestion now
        skipButton.addEventListener('click', skipQuestion);
        nextButton.addEventListener('click', nextQuestion);
        restartButton.addEventListener('click', showLessonSelection);
        downloadPdfButton.addEventListener('click', generateReviewPDF); // Hook up to the new Review PDF function
        exportAllPdfButton.addEventListener('click', generateAllQuestionsPDF);


        // --- Initial Call to Show Lesson Selection ---
        // Using DOMContentLoaded ensures the script runs after the HTML is fully parsed
        document.addEventListener('DOMContentLoaded', showLessonSelection);
    </script>

</body>

</html>
